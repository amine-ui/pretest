function il(i,a){for(var l=0;l<a.length;l++){const f=a[l];if(typeof f!="string"&&!Array.isArray(f)){for(const g in f)if(g!=="default"&&!(g in i)){const d=Object.getOwnPropertyDescriptor(f,g);d&&Object.defineProperty(i,g,d.get?d:{enumerable:!0,get:()=>f[g]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function Wo(i,a){return function(){return i.apply(a,arguments)}}const{toString:sl}=Object.prototype,{getPrototypeOf:cs}=Object,Kr=(i=>a=>{const l=sl.call(a);return i[l]||(i[l]=l.slice(8,-1).toLowerCase())})(Object.create(null)),Nt=i=>(i=i.toLowerCase(),a=>Kr(a)===i),qr=i=>a=>typeof a===i,{isArray:Pn}=Array,cr=qr("undefined");function ol(i){return i!==null&&!cr(i)&&i.constructor!==null&&!cr(i.constructor)&&Et(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Go=Nt("ArrayBuffer");function al(i){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(i):a=i&&i.buffer&&Go(i.buffer),a}const ll=qr("string"),Et=qr("function"),Xo=qr("number"),Qr=i=>i!==null&&typeof i=="object",cl=i=>i===!0||i===!1,Pr=i=>{if(Kr(i)!=="object")return!1;const a=cs(i);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},ul=Nt("Date"),fl=Nt("File"),hl=Nt("Blob"),dl=Nt("FileList"),gl=i=>Qr(i)&&Et(i.pipe),xl=i=>{let a;return i&&(typeof FormData=="function"&&i instanceof FormData||Et(i.append)&&((a=Kr(i))==="formdata"||a==="object"&&Et(i.toString)&&i.toString()==="[object FormData]"))},wl=Nt("URLSearchParams"),[pl,Al,El,ml]=["ReadableStream","Request","Response","Headers"].map(Nt),Cl=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fr(i,a,{allOwnKeys:l=!1}={}){if(i===null||typeof i>"u")return;let f,g;if(typeof i!="object"&&(i=[i]),Pn(i))for(f=0,g=i.length;f<g;f++)a.call(null,i[f],f,i);else{const d=l?Object.getOwnPropertyNames(i):Object.keys(i),w=d.length;let C;for(f=0;f<w;f++)C=d[f],a.call(null,i[C],C,i)}}function zo(i,a){a=a.toLowerCase();const l=Object.keys(i);let f=l.length,g;for(;f-- >0;)if(g=l[f],a===g.toLowerCase())return g;return null}const hn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jo=i=>!cr(i)&&i!==hn;function Ui(){const{caseless:i}=jo(this)&&this||{},a={},l=(f,g)=>{const d=i&&zo(a,g)||g;Pr(a[d])&&Pr(f)?a[d]=Ui(a[d],f):Pr(f)?a[d]=Ui({},f):Pn(f)?a[d]=f.slice():a[d]=f};for(let f=0,g=arguments.length;f<g;f++)arguments[f]&&fr(arguments[f],l);return a}const bl=(i,a,l,{allOwnKeys:f}={})=>(fr(a,(g,d)=>{l&&Et(g)?i[d]=Wo(g,l):i[d]=g},{allOwnKeys:f}),i),yl=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),_l=(i,a,l,f)=>{i.prototype=Object.create(a.prototype,f),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:a.prototype}),l&&Object.assign(i.prototype,l)},Il=(i,a,l,f)=>{let g,d,w;const C={};if(a=a||{},i==null)return a;do{for(g=Object.getOwnPropertyNames(i),d=g.length;d-- >0;)w=g[d],(!f||f(w,i,a))&&!C[w]&&(a[w]=i[w],C[w]=!0);i=l!==!1&&cs(i)}while(i&&(!l||l(i,a))&&i!==Object.prototype);return a},Sl=(i,a,l)=>{i=String(i),(l===void 0||l>i.length)&&(l=i.length),l-=a.length;const f=i.indexOf(a,l);return f!==-1&&f===l},Tl=i=>{if(!i)return null;if(Pn(i))return i;let a=i.length;if(!Xo(a))return null;const l=new Array(a);for(;a-- >0;)l[a]=i[a];return l},Ol=(i=>a=>i&&a instanceof i)(typeof Uint8Array<"u"&&cs(Uint8Array)),Nl=(i,a)=>{const f=(i&&i[Symbol.iterator]).call(i);let g;for(;(g=f.next())&&!g.done;){const d=g.value;a.call(i,d[0],d[1])}},Rl=(i,a)=>{let l;const f=[];for(;(l=i.exec(a))!==null;)f.push(l);return f},Dl=Nt("HTMLFormElement"),Ml=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(l,f,g){return f.toUpperCase()+g}),no=(({hasOwnProperty:i})=>(a,l)=>i.call(a,l))(Object.prototype),vl=Nt("RegExp"),Yo=(i,a)=>{const l=Object.getOwnPropertyDescriptors(i),f={};fr(l,(g,d)=>{let w;(w=a(g,d,i))!==!1&&(f[d]=w||g)}),Object.defineProperties(i,f)},Bl=i=>{Yo(i,(a,l)=>{if(Et(i)&&["arguments","caller","callee"].indexOf(l)!==-1)return!1;const f=i[l];if(Et(f)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+l+"'")})}})},Pl=(i,a)=>{const l={},f=g=>{g.forEach(d=>{l[d]=!0})};return Pn(i)?f(i):f(String(i).split(a)),l},Ll=()=>{},Fl=(i,a)=>i!=null&&Number.isFinite(i=+i)?i:a,Ri="abcdefghijklmnopqrstuvwxyz",ro="0123456789",Zo={DIGIT:ro,ALPHA:Ri,ALPHA_DIGIT:Ri+Ri.toUpperCase()+ro},kl=(i=16,a=Zo.ALPHA_DIGIT)=>{let l="";const{length:f}=a;for(;i--;)l+=a[Math.random()*f|0];return l};function Ul(i){return!!(i&&Et(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const Vl=i=>{const a=new Array(10),l=(f,g)=>{if(Qr(f)){if(a.indexOf(f)>=0)return;if(!("toJSON"in f)){a[g]=f;const d=Pn(f)?[]:{};return fr(f,(w,C)=>{const _=l(w,g+1);!cr(_)&&(d[C]=_)}),a[g]=void 0,d}}return f};return l(i,0)},Hl=Nt("AsyncFunction"),Wl=i=>i&&(Qr(i)||Et(i))&&Et(i.then)&&Et(i.catch),Ko=((i,a)=>i?setImmediate:a?((l,f)=>(hn.addEventListener("message",({source:g,data:d})=>{g===hn&&d===l&&f.length&&f.shift()()},!1),g=>{f.push(g),hn.postMessage(l,"*")}))(`axios@${Math.random()}`,[]):l=>setTimeout(l))(typeof setImmediate=="function",Et(hn.postMessage)),Gl=typeof queueMicrotask<"u"?queueMicrotask.bind(hn):typeof process<"u"&&process.nextTick||Ko,v={isArray:Pn,isArrayBuffer:Go,isBuffer:ol,isFormData:xl,isArrayBufferView:al,isString:ll,isNumber:Xo,isBoolean:cl,isObject:Qr,isPlainObject:Pr,isReadableStream:pl,isRequest:Al,isResponse:El,isHeaders:ml,isUndefined:cr,isDate:ul,isFile:fl,isBlob:hl,isRegExp:vl,isFunction:Et,isStream:gl,isURLSearchParams:wl,isTypedArray:Ol,isFileList:dl,forEach:fr,merge:Ui,extend:bl,trim:Cl,stripBOM:yl,inherits:_l,toFlatObject:Il,kindOf:Kr,kindOfTest:Nt,endsWith:Sl,toArray:Tl,forEachEntry:Nl,matchAll:Rl,isHTMLForm:Dl,hasOwnProperty:no,hasOwnProp:no,reduceDescriptors:Yo,freezeMethods:Bl,toObjectSet:Pl,toCamelCase:Ml,noop:Ll,toFiniteNumber:Fl,findKey:zo,global:hn,isContextDefined:jo,ALPHABET:Zo,generateString:kl,isSpecCompliantForm:Ul,toJSONObject:Vl,isAsyncFn:Hl,isThenable:Wl,setImmediate:Ko,asap:Gl};function le(i,a,l,f,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",a&&(this.code=a),l&&(this.config=l),f&&(this.request=f),g&&(this.response=g,this.status=g.status?g.status:null)}v.inherits(le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.status}}});const qo=le.prototype,Qo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Qo[i]={value:i}});Object.defineProperties(le,Qo);Object.defineProperty(qo,"isAxiosError",{value:!0});le.from=(i,a,l,f,g,d)=>{const w=Object.create(qo);return v.toFlatObject(i,w,function(_){return _!==Error.prototype},C=>C!=="isAxiosError"),le.call(w,i.message,a,l,f,g),w.cause=i,w.name=i.name,d&&Object.assign(w,d),w};const Xl=null;function Vi(i){return v.isPlainObject(i)||v.isArray(i)}function Jo(i){return v.endsWith(i,"[]")?i.slice(0,-2):i}function io(i,a,l){return i?i.concat(a).map(function(g,d){return g=Jo(g),!l&&d?"["+g+"]":g}).join(l?".":""):a}function zl(i){return v.isArray(i)&&!i.some(Vi)}const jl=v.toFlatObject(v,{},null,function(a){return/^is[A-Z]/.test(a)});function Jr(i,a,l){if(!v.isObject(i))throw new TypeError("target must be an object");a=a||new FormData,l=v.toFlatObject(l,{metaTokens:!0,dots:!1,indexes:!1},!1,function(X,P){return!v.isUndefined(P[X])});const f=l.metaTokens,g=l.visitor||I,d=l.dots,w=l.indexes,_=(l.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(a);if(!v.isFunction(g))throw new TypeError("visitor must be a function");function E(j){if(j===null)return"";if(v.isDate(j))return j.toISOString();if(!_&&v.isBlob(j))throw new le("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(j)||v.isTypedArray(j)?_&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function I(j,X,P){let $=j;if(j&&!P&&typeof j=="object"){if(v.endsWith(X,"{}"))X=f?X:X.slice(0,-2),j=JSON.stringify(j);else if(v.isArray(j)&&zl(j)||(v.isFileList(j)||v.endsWith(X,"[]"))&&($=v.toArray(j)))return X=Jo(X),$.forEach(function(G,ee){!(v.isUndefined(G)||G===null)&&a.append(w===!0?io([X],ee,d):w===null?X:X+"[]",E(G))}),!1}return Vi(j)?!0:(a.append(io(P,X,d),E(j)),!1)}const O=[],W=Object.assign(jl,{defaultVisitor:I,convertValue:E,isVisitable:Vi});function Y(j,X){if(!v.isUndefined(j)){if(O.indexOf(j)!==-1)throw Error("Circular reference detected in "+X.join("."));O.push(j),v.forEach(j,function($,Z){(!(v.isUndefined($)||$===null)&&g.call(a,$,v.isString(Z)?Z.trim():Z,X,W))===!0&&Y($,X?X.concat(Z):[Z])}),O.pop()}}if(!v.isObject(i))throw new TypeError("data must be an object");return Y(i),a}function so(i){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(f){return a[f]})}function us(i,a){this._pairs=[],i&&Jr(i,this,a)}const $o=us.prototype;$o.append=function(a,l){this._pairs.push([a,l])};$o.toString=function(a){const l=a?function(f){return a.call(this,f,so)}:so;return this._pairs.map(function(g){return l(g[0])+"="+l(g[1])},"").join("&")};function Yl(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ea(i,a,l){if(!a)return i;const f=l&&l.encode||Yl;v.isFunction(l)&&(l={serialize:l});const g=l&&l.serialize;let d;if(g?d=g(a,l):d=v.isURLSearchParams(a)?a.toString():new us(a,l).toString(f),d){const w=i.indexOf("#");w!==-1&&(i=i.slice(0,w)),i+=(i.indexOf("?")===-1?"?":"&")+d}return i}class oo{constructor(){this.handlers=[]}use(a,l,f){return this.handlers.push({fulfilled:a,rejected:l,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){v.forEach(this.handlers,function(f){f!==null&&a(f)})}}const ta={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zl=typeof URLSearchParams<"u"?URLSearchParams:us,Kl=typeof FormData<"u"?FormData:null,ql=typeof Blob<"u"?Blob:null,Ql={isBrowser:!0,classes:{URLSearchParams:Zl,FormData:Kl,Blob:ql},protocols:["http","https","file","blob","url","data"]},fs=typeof window<"u"&&typeof document<"u",Hi=typeof navigator=="object"&&navigator||void 0,Jl=fs&&(!Hi||["ReactNative","NativeScript","NS"].indexOf(Hi.product)<0),$l=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ec=fs&&window.location.href||"http://localhost",tc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:fs,hasStandardBrowserEnv:Jl,hasStandardBrowserWebWorkerEnv:$l,navigator:Hi,origin:ec},Symbol.toStringTag,{value:"Module"})),rt={...tc,...Ql};function nc(i,a){return Jr(i,new rt.classes.URLSearchParams,Object.assign({visitor:function(l,f,g,d){return rt.isNode&&v.isBuffer(l)?(this.append(f,l.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},a))}function rc(i){return v.matchAll(/\w+|\[(\w*)]/g,i).map(a=>a[0]==="[]"?"":a[1]||a[0])}function ic(i){const a={},l=Object.keys(i);let f;const g=l.length;let d;for(f=0;f<g;f++)d=l[f],a[d]=i[d];return a}function na(i){function a(l,f,g,d){let w=l[d++];if(w==="__proto__")return!0;const C=Number.isFinite(+w),_=d>=l.length;return w=!w&&v.isArray(g)?g.length:w,_?(v.hasOwnProp(g,w)?g[w]=[g[w],f]:g[w]=f,!C):((!g[w]||!v.isObject(g[w]))&&(g[w]=[]),a(l,f,g[w],d)&&v.isArray(g[w])&&(g[w]=ic(g[w])),!C)}if(v.isFormData(i)&&v.isFunction(i.entries)){const l={};return v.forEachEntry(i,(f,g)=>{a(rc(f),g,l,0)}),l}return null}function sc(i,a,l){if(v.isString(i))try{return(a||JSON.parse)(i),v.trim(i)}catch(f){if(f.name!=="SyntaxError")throw f}return(0,JSON.stringify)(i)}const hr={transitional:ta,adapter:["xhr","http","fetch"],transformRequest:[function(a,l){const f=l.getContentType()||"",g=f.indexOf("application/json")>-1,d=v.isObject(a);if(d&&v.isHTMLForm(a)&&(a=new FormData(a)),v.isFormData(a))return g?JSON.stringify(na(a)):a;if(v.isArrayBuffer(a)||v.isBuffer(a)||v.isStream(a)||v.isFile(a)||v.isBlob(a)||v.isReadableStream(a))return a;if(v.isArrayBufferView(a))return a.buffer;if(v.isURLSearchParams(a))return l.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let C;if(d){if(f.indexOf("application/x-www-form-urlencoded")>-1)return nc(a,this.formSerializer).toString();if((C=v.isFileList(a))||f.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return Jr(C?{"files[]":a}:a,_&&new _,this.formSerializer)}}return d||g?(l.setContentType("application/json",!1),sc(a)):a}],transformResponse:[function(a){const l=this.transitional||hr.transitional,f=l&&l.forcedJSONParsing,g=this.responseType==="json";if(v.isResponse(a)||v.isReadableStream(a))return a;if(a&&v.isString(a)&&(f&&!this.responseType||g)){const w=!(l&&l.silentJSONParsing)&&g;try{return JSON.parse(a)}catch(C){if(w)throw C.name==="SyntaxError"?le.from(C,le.ERR_BAD_RESPONSE,this,null,this.response):C}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rt.classes.FormData,Blob:rt.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],i=>{hr.headers[i]={}});const oc=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ac=i=>{const a={};let l,f,g;return i&&i.split(`
`).forEach(function(w){g=w.indexOf(":"),l=w.substring(0,g).trim().toLowerCase(),f=w.substring(g+1).trim(),!(!l||a[l]&&oc[l])&&(l==="set-cookie"?a[l]?a[l].push(f):a[l]=[f]:a[l]=a[l]?a[l]+", "+f:f)}),a},ao=Symbol("internals");function tr(i){return i&&String(i).trim().toLowerCase()}function Lr(i){return i===!1||i==null?i:v.isArray(i)?i.map(Lr):String(i)}function lc(i){const a=Object.create(null),l=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let f;for(;f=l.exec(i);)a[f[1]]=f[2];return a}const cc=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Di(i,a,l,f,g){if(v.isFunction(f))return f.call(this,a,l);if(g&&(a=l),!!v.isString(a)){if(v.isString(f))return a.indexOf(f)!==-1;if(v.isRegExp(f))return f.test(a)}}function uc(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,l,f)=>l.toUpperCase()+f)}function fc(i,a){const l=v.toCamelCase(" "+a);["get","set","has"].forEach(f=>{Object.defineProperty(i,f+l,{value:function(g,d,w){return this[f].call(this,a,g,d,w)},configurable:!0})})}class wt{constructor(a){a&&this.set(a)}set(a,l,f){const g=this;function d(C,_,E){const I=tr(_);if(!I)throw new Error("header name must be a non-empty string");const O=v.findKey(g,I);(!O||g[O]===void 0||E===!0||E===void 0&&g[O]!==!1)&&(g[O||_]=Lr(C))}const w=(C,_)=>v.forEach(C,(E,I)=>d(E,I,_));if(v.isPlainObject(a)||a instanceof this.constructor)w(a,l);else if(v.isString(a)&&(a=a.trim())&&!cc(a))w(ac(a),l);else if(v.isHeaders(a))for(const[C,_]of a.entries())d(_,C,f);else a!=null&&d(l,a,f);return this}get(a,l){if(a=tr(a),a){const f=v.findKey(this,a);if(f){const g=this[f];if(!l)return g;if(l===!0)return lc(g);if(v.isFunction(l))return l.call(this,g,f);if(v.isRegExp(l))return l.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,l){if(a=tr(a),a){const f=v.findKey(this,a);return!!(f&&this[f]!==void 0&&(!l||Di(this,this[f],f,l)))}return!1}delete(a,l){const f=this;let g=!1;function d(w){if(w=tr(w),w){const C=v.findKey(f,w);C&&(!l||Di(f,f[C],C,l))&&(delete f[C],g=!0)}}return v.isArray(a)?a.forEach(d):d(a),g}clear(a){const l=Object.keys(this);let f=l.length,g=!1;for(;f--;){const d=l[f];(!a||Di(this,this[d],d,a,!0))&&(delete this[d],g=!0)}return g}normalize(a){const l=this,f={};return v.forEach(this,(g,d)=>{const w=v.findKey(f,d);if(w){l[w]=Lr(g),delete l[d];return}const C=a?uc(d):String(d).trim();C!==d&&delete l[d],l[C]=Lr(g),f[C]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const l=Object.create(null);return v.forEach(this,(f,g)=>{f!=null&&f!==!1&&(l[g]=a&&v.isArray(f)?f.join(", "):f)}),l}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,l])=>a+": "+l).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...l){const f=new this(a);return l.forEach(g=>f.set(g)),f}static accessor(a){const f=(this[ao]=this[ao]={accessors:{}}).accessors,g=this.prototype;function d(w){const C=tr(w);f[C]||(fc(g,w),f[C]=!0)}return v.isArray(a)?a.forEach(d):d(a),this}}wt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(wt.prototype,({value:i},a)=>{let l=a[0].toUpperCase()+a.slice(1);return{get:()=>i,set(f){this[l]=f}}});v.freezeMethods(wt);function Mi(i,a){const l=this||hr,f=a||l,g=wt.from(f.headers);let d=f.data;return v.forEach(i,function(C){d=C.call(l,d,g.normalize(),a?a.status:void 0)}),g.normalize(),d}function ra(i){return!!(i&&i.__CANCEL__)}function Ln(i,a,l){le.call(this,i??"canceled",le.ERR_CANCELED,a,l),this.name="CanceledError"}v.inherits(Ln,le,{__CANCEL__:!0});function ia(i,a,l){const f=l.config.validateStatus;!l.status||!f||f(l.status)?i(l):a(new le("Request failed with status code "+l.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(l.status/100)-4],l.config,l.request,l))}function hc(i){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return a&&a[1]||""}function dc(i,a){i=i||10;const l=new Array(i),f=new Array(i);let g=0,d=0,w;return a=a!==void 0?a:1e3,function(_){const E=Date.now(),I=f[d];w||(w=E),l[g]=_,f[g]=E;let O=d,W=0;for(;O!==g;)W+=l[O++],O=O%i;if(g=(g+1)%i,g===d&&(d=(d+1)%i),E-w<a)return;const Y=I&&E-I;return Y?Math.round(W*1e3/Y):void 0}}function gc(i,a){let l=0,f=1e3/a,g,d;const w=(E,I=Date.now())=>{l=I,g=null,d&&(clearTimeout(d),d=null),i.apply(null,E)};return[(...E)=>{const I=Date.now(),O=I-l;O>=f?w(E,I):(g=E,d||(d=setTimeout(()=>{d=null,w(g)},f-O)))},()=>g&&w(g)]}const Vr=(i,a,l=3)=>{let f=0;const g=dc(50,250);return gc(d=>{const w=d.loaded,C=d.lengthComputable?d.total:void 0,_=w-f,E=g(_),I=w<=C;f=w;const O={loaded:w,total:C,progress:C?w/C:void 0,bytes:_,rate:E||void 0,estimated:E&&C&&I?(C-w)/E:void 0,event:d,lengthComputable:C!=null,[a?"download":"upload"]:!0};i(O)},l)},lo=(i,a)=>{const l=i!=null;return[f=>a[0]({lengthComputable:l,total:i,loaded:f}),a[1]]},co=i=>(...a)=>v.asap(()=>i(...a)),xc=rt.hasStandardBrowserEnv?((i,a)=>l=>(l=new URL(l,rt.origin),i.protocol===l.protocol&&i.host===l.host&&(a||i.port===l.port)))(new URL(rt.origin),rt.navigator&&/(msie|trident)/i.test(rt.navigator.userAgent)):()=>!0,wc=rt.hasStandardBrowserEnv?{write(i,a,l,f,g,d){const w=[i+"="+encodeURIComponent(a)];v.isNumber(l)&&w.push("expires="+new Date(l).toGMTString()),v.isString(f)&&w.push("path="+f),v.isString(g)&&w.push("domain="+g),d===!0&&w.push("secure"),document.cookie=w.join("; ")},read(i){const a=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pc(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Ac(i,a){return a?i.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):i}function sa(i,a){return i&&!pc(a)?Ac(i,a):a}const uo=i=>i instanceof wt?{...i}:i;function En(i,a){a=a||{};const l={};function f(E,I,O,W){return v.isPlainObject(E)&&v.isPlainObject(I)?v.merge.call({caseless:W},E,I):v.isPlainObject(I)?v.merge({},I):v.isArray(I)?I.slice():I}function g(E,I,O,W){if(v.isUndefined(I)){if(!v.isUndefined(E))return f(void 0,E,O,W)}else return f(E,I,O,W)}function d(E,I){if(!v.isUndefined(I))return f(void 0,I)}function w(E,I){if(v.isUndefined(I)){if(!v.isUndefined(E))return f(void 0,E)}else return f(void 0,I)}function C(E,I,O){if(O in a)return f(E,I);if(O in i)return f(void 0,E)}const _={url:d,method:d,data:d,baseURL:w,transformRequest:w,transformResponse:w,paramsSerializer:w,timeout:w,timeoutMessage:w,withCredentials:w,withXSRFToken:w,adapter:w,responseType:w,xsrfCookieName:w,xsrfHeaderName:w,onUploadProgress:w,onDownloadProgress:w,decompress:w,maxContentLength:w,maxBodyLength:w,beforeRedirect:w,transport:w,httpAgent:w,httpsAgent:w,cancelToken:w,socketPath:w,responseEncoding:w,validateStatus:C,headers:(E,I,O)=>g(uo(E),uo(I),O,!0)};return v.forEach(Object.keys(Object.assign({},i,a)),function(I){const O=_[I]||g,W=O(i[I],a[I],I);v.isUndefined(W)&&O!==C||(l[I]=W)}),l}const oa=i=>{const a=En({},i);let{data:l,withXSRFToken:f,xsrfHeaderName:g,xsrfCookieName:d,headers:w,auth:C}=a;a.headers=w=wt.from(w),a.url=ea(sa(a.baseURL,a.url),i.params,i.paramsSerializer),C&&w.set("Authorization","Basic "+btoa((C.username||"")+":"+(C.password?unescape(encodeURIComponent(C.password)):"")));let _;if(v.isFormData(l)){if(rt.hasStandardBrowserEnv||rt.hasStandardBrowserWebWorkerEnv)w.setContentType(void 0);else if((_=w.getContentType())!==!1){const[E,...I]=_?_.split(";").map(O=>O.trim()).filter(Boolean):[];w.setContentType([E||"multipart/form-data",...I].join("; "))}}if(rt.hasStandardBrowserEnv&&(f&&v.isFunction(f)&&(f=f(a)),f||f!==!1&&xc(a.url))){const E=g&&d&&wc.read(d);E&&w.set(g,E)}return a},Ec=typeof XMLHttpRequest<"u",mc=Ec&&function(i){return new Promise(function(l,f){const g=oa(i);let d=g.data;const w=wt.from(g.headers).normalize();let{responseType:C,onUploadProgress:_,onDownloadProgress:E}=g,I,O,W,Y,j;function X(){Y&&Y(),j&&j(),g.cancelToken&&g.cancelToken.unsubscribe(I),g.signal&&g.signal.removeEventListener("abort",I)}let P=new XMLHttpRequest;P.open(g.method.toUpperCase(),g.url,!0),P.timeout=g.timeout;function $(){if(!P)return;const G=wt.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),me={data:!C||C==="text"||C==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:G,config:i,request:P};ia(function(k){l(k),X()},function(k){f(k),X()},me),P=null}"onloadend"in P?P.onloadend=$:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout($)},P.onabort=function(){P&&(f(new le("Request aborted",le.ECONNABORTED,i,P)),P=null)},P.onerror=function(){f(new le("Network Error",le.ERR_NETWORK,i,P)),P=null},P.ontimeout=function(){let ee=g.timeout?"timeout of "+g.timeout+"ms exceeded":"timeout exceeded";const me=g.transitional||ta;g.timeoutErrorMessage&&(ee=g.timeoutErrorMessage),f(new le(ee,me.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,i,P)),P=null},d===void 0&&w.setContentType(null),"setRequestHeader"in P&&v.forEach(w.toJSON(),function(ee,me){P.setRequestHeader(me,ee)}),v.isUndefined(g.withCredentials)||(P.withCredentials=!!g.withCredentials),C&&C!=="json"&&(P.responseType=g.responseType),E&&([W,j]=Vr(E,!0),P.addEventListener("progress",W)),_&&P.upload&&([O,Y]=Vr(_),P.upload.addEventListener("progress",O),P.upload.addEventListener("loadend",Y)),(g.cancelToken||g.signal)&&(I=G=>{P&&(f(!G||G.type?new Ln(null,i,P):G),P.abort(),P=null)},g.cancelToken&&g.cancelToken.subscribe(I),g.signal&&(g.signal.aborted?I():g.signal.addEventListener("abort",I)));const Z=hc(g.url);if(Z&&rt.protocols.indexOf(Z)===-1){f(new le("Unsupported protocol "+Z+":",le.ERR_BAD_REQUEST,i));return}P.send(d||null)})},Cc=(i,a)=>{const{length:l}=i=i?i.filter(Boolean):[];if(a||l){let f=new AbortController,g;const d=function(E){if(!g){g=!0,C();const I=E instanceof Error?E:this.reason;f.abort(I instanceof le?I:new Ln(I instanceof Error?I.message:I))}};let w=a&&setTimeout(()=>{w=null,d(new le(`timeout ${a} of ms exceeded`,le.ETIMEDOUT))},a);const C=()=>{i&&(w&&clearTimeout(w),w=null,i.forEach(E=>{E.unsubscribe?E.unsubscribe(d):E.removeEventListener("abort",d)}),i=null)};i.forEach(E=>E.addEventListener("abort",d));const{signal:_}=f;return _.unsubscribe=()=>v.asap(C),_}},bc=function*(i,a){let l=i.byteLength;if(l<a){yield i;return}let f=0,g;for(;f<l;)g=f+a,yield i.slice(f,g),f=g},yc=async function*(i,a){for await(const l of _c(i))yield*bc(l,a)},_c=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const a=i.getReader();try{for(;;){const{done:l,value:f}=await a.read();if(l)break;yield f}}finally{await a.cancel()}},fo=(i,a,l,f)=>{const g=yc(i,a);let d=0,w,C=_=>{w||(w=!0,f&&f(_))};return new ReadableStream({async pull(_){try{const{done:E,value:I}=await g.next();if(E){C(),_.close();return}let O=I.byteLength;if(l){let W=d+=O;l(W)}_.enqueue(new Uint8Array(I))}catch(E){throw C(E),E}},cancel(_){return C(_),g.return()}},{highWaterMark:2})},$r=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",aa=$r&&typeof ReadableStream=="function",Ic=$r&&(typeof TextEncoder=="function"?(i=>a=>i.encode(a))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),la=(i,...a)=>{try{return!!i(...a)}catch{return!1}},Sc=aa&&la(()=>{let i=!1;const a=new Request(rt.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!a}),ho=64*1024,Wi=aa&&la(()=>v.isReadableStream(new Response("").body)),Hr={stream:Wi&&(i=>i.body)};$r&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!Hr[a]&&(Hr[a]=v.isFunction(i[a])?l=>l[a]():(l,f)=>{throw new le(`Response type '${a}' is not supported`,le.ERR_NOT_SUPPORT,f)})})})(new Response);const Tc=async i=>{if(i==null)return 0;if(v.isBlob(i))return i.size;if(v.isSpecCompliantForm(i))return(await new Request(rt.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(v.isArrayBufferView(i)||v.isArrayBuffer(i))return i.byteLength;if(v.isURLSearchParams(i)&&(i=i+""),v.isString(i))return(await Ic(i)).byteLength},Oc=async(i,a)=>{const l=v.toFiniteNumber(i.getContentLength());return l??Tc(a)},Nc=$r&&(async i=>{let{url:a,method:l,data:f,signal:g,cancelToken:d,timeout:w,onDownloadProgress:C,onUploadProgress:_,responseType:E,headers:I,withCredentials:O="same-origin",fetchOptions:W}=oa(i);E=E?(E+"").toLowerCase():"text";let Y=Cc([g,d&&d.toAbortSignal()],w),j;const X=Y&&Y.unsubscribe&&(()=>{Y.unsubscribe()});let P;try{if(_&&Sc&&l!=="get"&&l!=="head"&&(P=await Oc(I,f))!==0){let me=new Request(a,{method:"POST",body:f,duplex:"half"}),oe;if(v.isFormData(f)&&(oe=me.headers.get("content-type"))&&I.setContentType(oe),me.body){const[k,he]=lo(P,Vr(co(_)));f=fo(me.body,ho,k,he)}}v.isString(O)||(O=O?"include":"omit");const $="credentials"in Request.prototype;j=new Request(a,{...W,signal:Y,method:l.toUpperCase(),headers:I.normalize().toJSON(),body:f,duplex:"half",credentials:$?O:void 0});let Z=await fetch(j);const G=Wi&&(E==="stream"||E==="response");if(Wi&&(C||G&&X)){const me={};["status","statusText","headers"].forEach(V=>{me[V]=Z[V]});const oe=v.toFiniteNumber(Z.headers.get("content-length")),[k,he]=C&&lo(oe,Vr(co(C),!0))||[];Z=new Response(fo(Z.body,ho,k,()=>{he&&he(),X&&X()}),me)}E=E||"text";let ee=await Hr[v.findKey(Hr,E)||"text"](Z,i);return!G&&X&&X(),await new Promise((me,oe)=>{ia(me,oe,{data:ee,headers:wt.from(Z.headers),status:Z.status,statusText:Z.statusText,config:i,request:j})})}catch($){throw X&&X(),$&&$.name==="TypeError"&&/fetch/i.test($.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,i,j),{cause:$.cause||$}):le.from($,$&&$.code,i,j)}}),Gi={http:Xl,xhr:mc,fetch:Nc};v.forEach(Gi,(i,a)=>{if(i){try{Object.defineProperty(i,"name",{value:a})}catch{}Object.defineProperty(i,"adapterName",{value:a})}});const go=i=>`- ${i}`,Rc=i=>v.isFunction(i)||i===null||i===!1,ca={getAdapter:i=>{i=v.isArray(i)?i:[i];const{length:a}=i;let l,f;const g={};for(let d=0;d<a;d++){l=i[d];let w;if(f=l,!Rc(l)&&(f=Gi[(w=String(l)).toLowerCase()],f===void 0))throw new le(`Unknown adapter '${w}'`);if(f)break;g[w||"#"+d]=f}if(!f){const d=Object.entries(g).map(([C,_])=>`adapter ${C} `+(_===!1?"is not supported by the environment":"is not available in the build"));let w=a?d.length>1?`since :
`+d.map(go).join(`
`):" "+go(d[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+w,"ERR_NOT_SUPPORT")}return f},adapters:Gi};function vi(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Ln(null,i)}function xo(i){return vi(i),i.headers=wt.from(i.headers),i.data=Mi.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),ca.getAdapter(i.adapter||hr.adapter)(i).then(function(f){return vi(i),f.data=Mi.call(i,i.transformResponse,f),f.headers=wt.from(f.headers),f},function(f){return ra(f)||(vi(i),f&&f.response&&(f.response.data=Mi.call(i,i.transformResponse,f.response),f.response.headers=wt.from(f.response.headers))),Promise.reject(f)})}const ua="1.7.9",ei={};["object","boolean","number","function","string","symbol"].forEach((i,a)=>{ei[i]=function(f){return typeof f===i||"a"+(a<1?"n ":" ")+i}});const wo={};ei.transitional=function(a,l,f){function g(d,w){return"[Axios v"+ua+"] Transitional option '"+d+"'"+w+(f?". "+f:"")}return(d,w,C)=>{if(a===!1)throw new le(g(w," has been removed"+(l?" in "+l:"")),le.ERR_DEPRECATED);return l&&!wo[w]&&(wo[w]=!0,console.warn(g(w," has been deprecated since v"+l+" and will be removed in the near future"))),a?a(d,w,C):!0}};ei.spelling=function(a){return(l,f)=>(console.warn(`${f} is likely a misspelling of ${a}`),!0)};function Dc(i,a,l){if(typeof i!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const f=Object.keys(i);let g=f.length;for(;g-- >0;){const d=f[g],w=a[d];if(w){const C=i[d],_=C===void 0||w(C,d,i);if(_!==!0)throw new le("option "+d+" must be "+_,le.ERR_BAD_OPTION_VALUE);continue}if(l!==!0)throw new le("Unknown option "+d,le.ERR_BAD_OPTION)}}const Fr={assertOptions:Dc,validators:ei},kt=Fr.validators;class gn{constructor(a){this.defaults=a,this.interceptors={request:new oo,response:new oo}}async request(a,l){try{return await this._request(a,l)}catch(f){if(f instanceof Error){let g={};Error.captureStackTrace?Error.captureStackTrace(g):g=new Error;const d=g.stack?g.stack.replace(/^.+\n/,""):"";try{f.stack?d&&!String(f.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(f.stack+=`
`+d):f.stack=d}catch{}}throw f}}_request(a,l){typeof a=="string"?(l=l||{},l.url=a):l=a||{},l=En(this.defaults,l);const{transitional:f,paramsSerializer:g,headers:d}=l;f!==void 0&&Fr.assertOptions(f,{silentJSONParsing:kt.transitional(kt.boolean),forcedJSONParsing:kt.transitional(kt.boolean),clarifyTimeoutError:kt.transitional(kt.boolean)},!1),g!=null&&(v.isFunction(g)?l.paramsSerializer={serialize:g}:Fr.assertOptions(g,{encode:kt.function,serialize:kt.function},!0)),Fr.assertOptions(l,{baseUrl:kt.spelling("baseURL"),withXsrfToken:kt.spelling("withXSRFToken")},!0),l.method=(l.method||this.defaults.method||"get").toLowerCase();let w=d&&v.merge(d.common,d[l.method]);d&&v.forEach(["delete","get","head","post","put","patch","common"],j=>{delete d[j]}),l.headers=wt.concat(w,d);const C=[];let _=!0;this.interceptors.request.forEach(function(X){typeof X.runWhen=="function"&&X.runWhen(l)===!1||(_=_&&X.synchronous,C.unshift(X.fulfilled,X.rejected))});const E=[];this.interceptors.response.forEach(function(X){E.push(X.fulfilled,X.rejected)});let I,O=0,W;if(!_){const j=[xo.bind(this),void 0];for(j.unshift.apply(j,C),j.push.apply(j,E),W=j.length,I=Promise.resolve(l);O<W;)I=I.then(j[O++],j[O++]);return I}W=C.length;let Y=l;for(O=0;O<W;){const j=C[O++],X=C[O++];try{Y=j(Y)}catch(P){X.call(this,P);break}}try{I=xo.call(this,Y)}catch(j){return Promise.reject(j)}for(O=0,W=E.length;O<W;)I=I.then(E[O++],E[O++]);return I}getUri(a){a=En(this.defaults,a);const l=sa(a.baseURL,a.url);return ea(l,a.params,a.paramsSerializer)}}v.forEach(["delete","get","head","options"],function(a){gn.prototype[a]=function(l,f){return this.request(En(f||{},{method:a,url:l,data:(f||{}).data}))}});v.forEach(["post","put","patch"],function(a){function l(f){return function(d,w,C){return this.request(En(C||{},{method:a,headers:f?{"Content-Type":"multipart/form-data"}:{},url:d,data:w}))}}gn.prototype[a]=l(),gn.prototype[a+"Form"]=l(!0)});class hs{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let l;this.promise=new Promise(function(d){l=d});const f=this;this.promise.then(g=>{if(!f._listeners)return;let d=f._listeners.length;for(;d-- >0;)f._listeners[d](g);f._listeners=null}),this.promise.then=g=>{let d;const w=new Promise(C=>{f.subscribe(C),d=C}).then(g);return w.cancel=function(){f.unsubscribe(d)},w},a(function(d,w,C){f.reason||(f.reason=new Ln(d,w,C),l(f.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const l=this._listeners.indexOf(a);l!==-1&&this._listeners.splice(l,1)}toAbortSignal(){const a=new AbortController,l=f=>{a.abort(f)};return this.subscribe(l),a.signal.unsubscribe=()=>this.unsubscribe(l),a.signal}static source(){let a;return{token:new hs(function(g){a=g}),cancel:a}}}function Mc(i){return function(l){return i.apply(null,l)}}function vc(i){return v.isObject(i)&&i.isAxiosError===!0}const Xi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xi).forEach(([i,a])=>{Xi[a]=i});function fa(i){const a=new gn(i),l=Wo(gn.prototype.request,a);return v.extend(l,gn.prototype,a,{allOwnKeys:!0}),v.extend(l,a,null,{allOwnKeys:!0}),l.create=function(g){return fa(En(i,g))},l}const He=fa(hr);He.Axios=gn;He.CanceledError=Ln;He.CancelToken=hs;He.isCancel=ra;He.VERSION=ua;He.toFormData=Jr;He.AxiosError=le;He.Cancel=He.CanceledError;He.all=function(a){return Promise.all(a)};He.spread=Mc;He.isAxiosError=vc;He.mergeConfig=En;He.AxiosHeaders=wt;He.formToJSON=i=>na(v.isHTMLForm(i)?new FormData(i):i);He.getAdapter=ca.getAdapter;He.HttpStatusCode=Xi;He.default=He;window.axios=He;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var zi=!1,ji=!1,xn=[],Yi=-1;function Bc(i){Pc(i)}function Pc(i){xn.includes(i)||xn.push(i),Fc()}function Lc(i){let a=xn.indexOf(i);a!==-1&&a>Yi&&xn.splice(a,1)}function Fc(){!ji&&!zi&&(zi=!0,queueMicrotask(kc))}function kc(){zi=!1,ji=!0;for(let i=0;i<xn.length;i++)xn[i](),Yi=i;xn.length=0,Yi=-1,ji=!1}var Fn,Cn,kn,ha,Zi=!0;function Uc(i){Zi=!1,i(),Zi=!0}function Vc(i){Fn=i.reactive,kn=i.release,Cn=a=>i.effect(a,{scheduler:l=>{Zi?Bc(l):l()}}),ha=i.raw}function po(i){Cn=i}function Hc(i){let a=()=>{};return[f=>{let g=Cn(f);return i._x_effects||(i._x_effects=new Set,i._x_runEffects=()=>{i._x_effects.forEach(d=>d())}),i._x_effects.add(g),a=()=>{g!==void 0&&(i._x_effects.delete(g),kn(g))},g},()=>{a()}]}function da(i,a){let l=!0,f,g=Cn(()=>{let d=i();JSON.stringify(d),l?f=d:queueMicrotask(()=>{a(d,f),f=d}),l=!1});return()=>kn(g)}var ga=[],xa=[],wa=[];function Wc(i){wa.push(i)}function ds(i,a){typeof a=="function"?(i._x_cleanups||(i._x_cleanups=[]),i._x_cleanups.push(a)):(a=i,xa.push(a))}function pa(i){ga.push(i)}function Aa(i,a,l){i._x_attributeCleanups||(i._x_attributeCleanups={}),i._x_attributeCleanups[a]||(i._x_attributeCleanups[a]=[]),i._x_attributeCleanups[a].push(l)}function Ea(i,a){i._x_attributeCleanups&&Object.entries(i._x_attributeCleanups).forEach(([l,f])=>{(a===void 0||a.includes(l))&&(f.forEach(g=>g()),delete i._x_attributeCleanups[l])})}function Gc(i){var a,l;for((a=i._x_effects)==null||a.forEach(Lc);(l=i._x_cleanups)!=null&&l.length;)i._x_cleanups.pop()()}var gs=new MutationObserver(As),xs=!1;function ws(){gs.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),xs=!0}function ma(){Xc(),gs.disconnect(),xs=!1}var nr=[];function Xc(){let i=gs.takeRecords();nr.push(()=>i.length>0&&As(i));let a=nr.length;queueMicrotask(()=>{if(nr.length===a)for(;nr.length>0;)nr.shift()()})}function Be(i){if(!xs)return i();ma();let a=i();return ws(),a}var ps=!1,Wr=[];function zc(){ps=!0}function jc(){ps=!1,As(Wr),Wr=[]}function As(i){if(ps){Wr=Wr.concat(i);return}let a=[],l=new Set,f=new Map,g=new Map;for(let d=0;d<i.length;d++)if(!i[d].target._x_ignoreMutationObserver&&(i[d].type==="childList"&&(i[d].removedNodes.forEach(w=>{w.nodeType===1&&w._x_marker&&l.add(w)}),i[d].addedNodes.forEach(w=>{if(w.nodeType===1){if(l.has(w)){l.delete(w);return}w._x_marker||a.push(w)}})),i[d].type==="attributes")){let w=i[d].target,C=i[d].attributeName,_=i[d].oldValue,E=()=>{f.has(w)||f.set(w,[]),f.get(w).push({name:C,value:w.getAttribute(C)})},I=()=>{g.has(w)||g.set(w,[]),g.get(w).push(C)};w.hasAttribute(C)&&_===null?E():w.hasAttribute(C)?(I(),E()):I()}g.forEach((d,w)=>{Ea(w,d)}),f.forEach((d,w)=>{ga.forEach(C=>C(w,d))});for(let d of l)a.some(w=>w.contains(d))||xa.forEach(w=>w(d));for(let d of a)d.isConnected&&wa.forEach(w=>w(d));a=null,l=null,f=null,g=null}function Ca(i){return gr(vn(i))}function dr(i,a,l){return i._x_dataStack=[a,...vn(l||i)],()=>{i._x_dataStack=i._x_dataStack.filter(f=>f!==a)}}function vn(i){return i._x_dataStack?i._x_dataStack:typeof ShadowRoot=="function"&&i instanceof ShadowRoot?vn(i.host):i.parentNode?vn(i.parentNode):[]}function gr(i){return new Proxy({objects:i},Yc)}var Yc={ownKeys({objects:i}){return Array.from(new Set(i.flatMap(a=>Object.keys(a))))},has({objects:i},a){return a==Symbol.unscopables?!1:i.some(l=>Object.prototype.hasOwnProperty.call(l,a)||Reflect.has(l,a))},get({objects:i},a,l){return a=="toJSON"?Zc:Reflect.get(i.find(f=>Reflect.has(f,a))||{},a,l)},set({objects:i},a,l,f){const g=i.find(w=>Object.prototype.hasOwnProperty.call(w,a))||i[i.length-1],d=Object.getOwnPropertyDescriptor(g,a);return d!=null&&d.set&&(d!=null&&d.get)?d.set.call(f,l)||!0:Reflect.set(g,a,l)}};function Zc(){return Reflect.ownKeys(this).reduce((a,l)=>(a[l]=Reflect.get(this,l),a),{})}function ba(i){let a=f=>typeof f=="object"&&!Array.isArray(f)&&f!==null,l=(f,g="")=>{Object.entries(Object.getOwnPropertyDescriptors(f)).forEach(([d,{value:w,enumerable:C}])=>{if(C===!1||w===void 0||typeof w=="object"&&w!==null&&w.__v_skip)return;let _=g===""?d:`${g}.${d}`;typeof w=="object"&&w!==null&&w._x_interceptor?f[d]=w.initialize(i,_,d):a(w)&&w!==f&&!(w instanceof Element)&&l(w,_)})};return l(i)}function ya(i,a=()=>{}){let l={initialValue:void 0,_x_interceptor:!0,initialize(f,g,d){return i(this.initialValue,()=>Kc(f,g),w=>Ki(f,g,w),g,d)}};return a(l),f=>{if(typeof f=="object"&&f!==null&&f._x_interceptor){let g=l.initialize.bind(l);l.initialize=(d,w,C)=>{let _=f.initialize(d,w,C);return l.initialValue=_,g(d,w,C)}}else l.initialValue=f;return l}}function Kc(i,a){return a.split(".").reduce((l,f)=>l[f],i)}function Ki(i,a,l){if(typeof a=="string"&&(a=a.split(".")),a.length===1)i[a[0]]=l;else{if(a.length===0)throw error;return i[a[0]]||(i[a[0]]={}),Ki(i[a[0]],a.slice(1),l)}}var _a={};function Rt(i,a){_a[i]=a}function qi(i,a){let l=qc(a);return Object.entries(_a).forEach(([f,g])=>{Object.defineProperty(i,`$${f}`,{get(){return g(a,l)},enumerable:!1})}),i}function qc(i){let[a,l]=Ra(i),f={interceptor:ya,...a};return ds(i,l),f}function Qc(i,a,l,...f){try{return l(...f)}catch(g){ur(g,i,a)}}function ur(i,a,l=void 0){i=Object.assign(i??{message:"No error message given."},{el:a,expression:l}),console.warn(`Alpine Expression Error: ${i.message}

${l?'Expression: "'+l+`"

`:""}`,a),setTimeout(()=>{throw i},0)}var kr=!0;function Ia(i){let a=kr;kr=!1;let l=i();return kr=a,l}function wn(i,a,l={}){let f;return lt(i,a)(g=>f=g,l),f}function lt(...i){return Sa(...i)}var Sa=Ta;function Jc(i){Sa=i}function Ta(i,a){let l={};qi(l,i);let f=[l,...vn(i)],g=typeof a=="function"?$c(f,a):t0(f,a,i);return Qc.bind(null,i,a,g)}function $c(i,a){return(l=()=>{},{scope:f={},params:g=[]}={})=>{let d=a.apply(gr([f,...i]),g);Gr(l,d)}}var Bi={};function e0(i,a){if(Bi[i])return Bi[i];let l=Object.getPrototypeOf(async function(){}).constructor,f=/^[\n\s]*if.*\(.*\)/.test(i.trim())||/^(let|const)\s/.test(i.trim())?`(async()=>{ ${i} })()`:i,d=(()=>{try{let w=new l(["__self","scope"],`with (scope) { __self.result = ${f} }; __self.finished = true; return __self.result;`);return Object.defineProperty(w,"name",{value:`[Alpine] ${i}`}),w}catch(w){return ur(w,a,i),Promise.resolve()}})();return Bi[i]=d,d}function t0(i,a,l){let f=e0(a,l);return(g=()=>{},{scope:d={},params:w=[]}={})=>{f.result=void 0,f.finished=!1;let C=gr([d,...i]);if(typeof f=="function"){let _=f(f,C).catch(E=>ur(E,l,a));f.finished?(Gr(g,f.result,C,w,l),f.result=void 0):_.then(E=>{Gr(g,E,C,w,l)}).catch(E=>ur(E,l,a)).finally(()=>f.result=void 0)}}}function Gr(i,a,l,f,g){if(kr&&typeof a=="function"){let d=a.apply(l,f);d instanceof Promise?d.then(w=>Gr(i,w,l,f)).catch(w=>ur(w,g,a)):i(d)}else typeof a=="object"&&a instanceof Promise?a.then(d=>i(d)):i(a)}var Es="x-";function Un(i=""){return Es+i}function n0(i){Es=i}var Xr={};function We(i,a){return Xr[i]=a,{before(l){if(!Xr[l]){console.warn(String.raw`Cannot find directive \`${l}\`. \`${i}\` will use the default order of execution`);return}const f=dn.indexOf(l);dn.splice(f>=0?f:dn.indexOf("DEFAULT"),0,i)}}}function r0(i){return Object.keys(Xr).includes(i)}function ms(i,a,l){if(a=Array.from(a),i._x_virtualDirectives){let d=Object.entries(i._x_virtualDirectives).map(([C,_])=>({name:C,value:_})),w=Oa(d);d=d.map(C=>w.find(_=>_.name===C.name)?{name:`x-bind:${C.name}`,value:`"${C.value}"`}:C),a=a.concat(d)}let f={};return a.map(va((d,w)=>f[d]=w)).filter(Pa).map(o0(f,l)).sort(a0).map(d=>s0(i,d))}function Oa(i){return Array.from(i).map(va()).filter(a=>!Pa(a))}var Qi=!1,sr=new Map,Na=Symbol();function i0(i){Qi=!0;let a=Symbol();Na=a,sr.set(a,[]);let l=()=>{for(;sr.get(a).length;)sr.get(a).shift()();sr.delete(a)},f=()=>{Qi=!1,l()};i(l),f()}function Ra(i){let a=[],l=C=>a.push(C),[f,g]=Hc(i);return a.push(g),[{Alpine:xr,effect:f,cleanup:l,evaluateLater:lt.bind(lt,i),evaluate:wn.bind(wn,i)},()=>a.forEach(C=>C())]}function s0(i,a){let l=()=>{},f=Xr[a.type]||l,[g,d]=Ra(i);Aa(i,a.original,d);let w=()=>{i._x_ignore||i._x_ignoreSelf||(f.inline&&f.inline(i,a,g),f=f.bind(f,i,a,g),Qi?sr.get(Na).push(f):f())};return w.runCleanups=d,w}var Da=(i,a)=>({name:l,value:f})=>(l.startsWith(i)&&(l=l.replace(i,a)),{name:l,value:f}),Ma=i=>i;function va(i=()=>{}){return({name:a,value:l})=>{let{name:f,value:g}=Ba.reduce((d,w)=>w(d),{name:a,value:l});return f!==a&&i(f,a),{name:f,value:g}}}var Ba=[];function Cs(i){Ba.push(i)}function Pa({name:i}){return La().test(i)}var La=()=>new RegExp(`^${Es}([^:^.]+)\\b`);function o0(i,a){return({name:l,value:f})=>{let g=l.match(La()),d=l.match(/:([a-zA-Z0-9\-_:]+)/),w=l.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],C=a||i[l]||l;return{type:g?g[1]:null,value:d?d[1]:null,modifiers:w.map(_=>_.replace(".","")),expression:f,original:C}}}var Ji="DEFAULT",dn=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Ji,"teleport"];function a0(i,a){let l=dn.indexOf(i.type)===-1?Ji:i.type,f=dn.indexOf(a.type)===-1?Ji:a.type;return dn.indexOf(l)-dn.indexOf(f)}function ar(i,a,l={}){i.dispatchEvent(new CustomEvent(a,{detail:l,bubbles:!0,composed:!0,cancelable:!0}))}function mn(i,a){if(typeof ShadowRoot=="function"&&i instanceof ShadowRoot){Array.from(i.children).forEach(g=>mn(g,a));return}let l=!1;if(a(i,()=>l=!0),l)return;let f=i.firstElementChild;for(;f;)mn(f,a),f=f.nextElementSibling}function _t(i,...a){console.warn(`Alpine Warning: ${i}`,...a)}var Ao=!1;function l0(){Ao&&_t("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Ao=!0,document.body||_t("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),ar(document,"alpine:init"),ar(document,"alpine:initializing"),ws(),Wc(a=>Wt(a,mn)),ds(a=>Hn(a)),pa((a,l)=>{ms(a,l).forEach(f=>f())});let i=a=>!ti(a.parentElement,!0);Array.from(document.querySelectorAll(Ua().join(","))).filter(i).forEach(a=>{Wt(a)}),ar(document,"alpine:initialized"),setTimeout(()=>{h0()})}var bs=[],Fa=[];function ka(){return bs.map(i=>i())}function Ua(){return bs.concat(Fa).map(i=>i())}function Va(i){bs.push(i)}function Ha(i){Fa.push(i)}function ti(i,a=!1){return Vn(i,l=>{if((a?Ua():ka()).some(g=>l.matches(g)))return!0})}function Vn(i,a){if(i){if(a(i))return i;if(i._x_teleportBack&&(i=i._x_teleportBack),!!i.parentElement)return Vn(i.parentElement,a)}}function c0(i){return ka().some(a=>i.matches(a))}var Wa=[];function u0(i){Wa.push(i)}var f0=1;function Wt(i,a=mn,l=()=>{}){Vn(i,f=>f._x_ignore)||i0(()=>{a(i,(f,g)=>{f._x_marker||(l(f,g),Wa.forEach(d=>d(f,g)),ms(f,f.attributes).forEach(d=>d()),f._x_ignore||(f._x_marker=f0++),f._x_ignore&&g())})})}function Hn(i,a=mn){a(i,l=>{Gc(l),Ea(l),delete l._x_marker})}function h0(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([a,l,f])=>{r0(l)||f.some(g=>{if(document.querySelector(g))return _t(`found "${g}", but missing ${a} plugin`),!0})})}var $i=[],ys=!1;function _s(i=()=>{}){return queueMicrotask(()=>{ys||setTimeout(()=>{es()})}),new Promise(a=>{$i.push(()=>{i(),a()})})}function es(){for(ys=!1;$i.length;)$i.shift()()}function d0(){ys=!0}function Is(i,a){return Array.isArray(a)?Eo(i,a.join(" ")):typeof a=="object"&&a!==null?g0(i,a):typeof a=="function"?Is(i,a()):Eo(i,a)}function Eo(i,a){let l=g=>g.split(" ").filter(d=>!i.classList.contains(d)).filter(Boolean),f=g=>(i.classList.add(...g),()=>{i.classList.remove(...g)});return a=a===!0?a="":a||"",f(l(a))}function g0(i,a){let l=C=>C.split(" ").filter(Boolean),f=Object.entries(a).flatMap(([C,_])=>_?l(C):!1).filter(Boolean),g=Object.entries(a).flatMap(([C,_])=>_?!1:l(C)).filter(Boolean),d=[],w=[];return g.forEach(C=>{i.classList.contains(C)&&(i.classList.remove(C),w.push(C))}),f.forEach(C=>{i.classList.contains(C)||(i.classList.add(C),d.push(C))}),()=>{w.forEach(C=>i.classList.add(C)),d.forEach(C=>i.classList.remove(C))}}function ni(i,a){return typeof a=="object"&&a!==null?x0(i,a):w0(i,a)}function x0(i,a){let l={};return Object.entries(a).forEach(([f,g])=>{l[f]=i.style[f],f.startsWith("--")||(f=p0(f)),i.style.setProperty(f,g)}),setTimeout(()=>{i.style.length===0&&i.removeAttribute("style")}),()=>{ni(i,l)}}function w0(i,a){let l=i.getAttribute("style",a);return i.setAttribute("style",a),()=>{i.setAttribute("style",l||"")}}function p0(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ts(i,a=()=>{}){let l=!1;return function(){l?a.apply(this,arguments):(l=!0,i.apply(this,arguments))}}We("transition",(i,{value:a,modifiers:l,expression:f},{evaluate:g})=>{typeof f=="function"&&(f=g(f)),f!==!1&&(!f||typeof f=="boolean"?E0(i,l,a):A0(i,f,a))});function A0(i,a,l){Ga(i,Is,""),{enter:g=>{i._x_transition.enter.during=g},"enter-start":g=>{i._x_transition.enter.start=g},"enter-end":g=>{i._x_transition.enter.end=g},leave:g=>{i._x_transition.leave.during=g},"leave-start":g=>{i._x_transition.leave.start=g},"leave-end":g=>{i._x_transition.leave.end=g}}[l](a)}function E0(i,a,l){Ga(i,ni);let f=!a.includes("in")&&!a.includes("out")&&!l,g=f||a.includes("in")||["enter"].includes(l),d=f||a.includes("out")||["leave"].includes(l);a.includes("in")&&!f&&(a=a.filter(($,Z)=>Z<a.indexOf("out"))),a.includes("out")&&!f&&(a=a.filter(($,Z)=>Z>a.indexOf("out")));let w=!a.includes("opacity")&&!a.includes("scale"),C=w||a.includes("opacity"),_=w||a.includes("scale"),E=C?0:1,I=_?rr(a,"scale",95)/100:1,O=rr(a,"delay",0)/1e3,W=rr(a,"origin","center"),Y="opacity, transform",j=rr(a,"duration",150)/1e3,X=rr(a,"duration",75)/1e3,P="cubic-bezier(0.4, 0.0, 0.2, 1)";g&&(i._x_transition.enter.during={transformOrigin:W,transitionDelay:`${O}s`,transitionProperty:Y,transitionDuration:`${j}s`,transitionTimingFunction:P},i._x_transition.enter.start={opacity:E,transform:`scale(${I})`},i._x_transition.enter.end={opacity:1,transform:"scale(1)"}),d&&(i._x_transition.leave.during={transformOrigin:W,transitionDelay:`${O}s`,transitionProperty:Y,transitionDuration:`${X}s`,transitionTimingFunction:P},i._x_transition.leave.start={opacity:1,transform:"scale(1)"},i._x_transition.leave.end={opacity:E,transform:`scale(${I})`})}function Ga(i,a,l={}){i._x_transition||(i._x_transition={enter:{during:l,start:l,end:l},leave:{during:l,start:l,end:l},in(f=()=>{},g=()=>{}){ns(i,a,{during:this.enter.during,start:this.enter.start,end:this.enter.end},f,g)},out(f=()=>{},g=()=>{}){ns(i,a,{during:this.leave.during,start:this.leave.start,end:this.leave.end},f,g)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(i,a,l,f){const g=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let d=()=>g(l);if(a){i._x_transition&&(i._x_transition.enter||i._x_transition.leave)?i._x_transition.enter&&(Object.entries(i._x_transition.enter.during).length||Object.entries(i._x_transition.enter.start).length||Object.entries(i._x_transition.enter.end).length)?i._x_transition.in(l):d():i._x_transition?i._x_transition.in(l):d();return}i._x_hidePromise=i._x_transition?new Promise((w,C)=>{i._x_transition.out(()=>{},()=>w(f)),i._x_transitioning&&i._x_transitioning.beforeCancel(()=>C({isFromCancelledTransition:!0}))}):Promise.resolve(f),queueMicrotask(()=>{let w=Xa(i);w?(w._x_hideChildren||(w._x_hideChildren=[]),w._x_hideChildren.push(i)):g(()=>{let C=_=>{let E=Promise.all([_._x_hidePromise,...(_._x_hideChildren||[]).map(C)]).then(([I])=>I==null?void 0:I());return delete _._x_hidePromise,delete _._x_hideChildren,E};C(i).catch(_=>{if(!_.isFromCancelledTransition)throw _})})})};function Xa(i){let a=i.parentNode;if(a)return a._x_hidePromise?a:Xa(a)}function ns(i,a,{during:l,start:f,end:g}={},d=()=>{},w=()=>{}){if(i._x_transitioning&&i._x_transitioning.cancel(),Object.keys(l).length===0&&Object.keys(f).length===0&&Object.keys(g).length===0){d(),w();return}let C,_,E;m0(i,{start(){C=a(i,f)},during(){_=a(i,l)},before:d,end(){C(),E=a(i,g)},after:w,cleanup(){_(),E()}})}function m0(i,a){let l,f,g,d=ts(()=>{Be(()=>{l=!0,f||a.before(),g||(a.end(),es()),a.after(),i.isConnected&&a.cleanup(),delete i._x_transitioning})});i._x_transitioning={beforeCancels:[],beforeCancel(w){this.beforeCancels.push(w)},cancel:ts(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();d()}),finish:d},Be(()=>{a.start(),a.during()}),d0(),requestAnimationFrame(()=>{if(l)return;let w=Number(getComputedStyle(i).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,C=Number(getComputedStyle(i).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;w===0&&(w=Number(getComputedStyle(i).animationDuration.replace("s",""))*1e3),Be(()=>{a.before()}),f=!0,requestAnimationFrame(()=>{l||(Be(()=>{a.end()}),es(),setTimeout(i._x_transitioning.finish,w+C),g=!0)})})}function rr(i,a,l){if(i.indexOf(a)===-1)return l;const f=i[i.indexOf(a)+1];if(!f||a==="scale"&&isNaN(f))return l;if(a==="duration"||a==="delay"){let g=f.match(/([0-9]+)ms/);if(g)return g[1]}return a==="origin"&&["top","right","left","center","bottom"].includes(i[i.indexOf(a)+2])?[f,i[i.indexOf(a)+2]].join(" "):f}var en=!1;function nn(i,a=()=>{}){return(...l)=>en?a(...l):i(...l)}function C0(i){return(...a)=>en&&i(...a)}var za=[];function ri(i){za.push(i)}function b0(i,a){za.forEach(l=>l(i,a)),en=!0,ja(()=>{Wt(a,(l,f)=>{f(l,()=>{})})}),en=!1}var rs=!1;function y0(i,a){a._x_dataStack||(a._x_dataStack=i._x_dataStack),en=!0,rs=!0,ja(()=>{_0(a)}),en=!1,rs=!1}function _0(i){let a=!1;Wt(i,(f,g)=>{mn(f,(d,w)=>{if(a&&c0(d))return w();a=!0,g(d,w)})})}function ja(i){let a=Cn;po((l,f)=>{let g=a(l);return kn(g),()=>{}}),i(),po(a)}function Ya(i,a,l,f=[]){switch(i._x_bindings||(i._x_bindings=Fn({})),i._x_bindings[a]=l,a=f.includes("camel")?M0(a):a,a){case"value":I0(i,l);break;case"style":T0(i,l);break;case"class":S0(i,l);break;case"selected":case"checked":O0(i,a,l);break;default:Za(i,a,l);break}}function I0(i,a){if(Qa(i))i.attributes.value===void 0&&(i.value=a),window.fromModel&&(typeof a=="boolean"?i.checked=Ur(i.value)===a:i.checked=mo(i.value,a));else if(Ss(i))Number.isInteger(a)?i.value=a:!Array.isArray(a)&&typeof a!="boolean"&&![null,void 0].includes(a)?i.value=String(a):Array.isArray(a)?i.checked=a.some(l=>mo(l,i.value)):i.checked=!!a;else if(i.tagName==="SELECT")D0(i,a);else{if(i.value===a)return;i.value=a===void 0?"":a}}function S0(i,a){i._x_undoAddedClasses&&i._x_undoAddedClasses(),i._x_undoAddedClasses=Is(i,a)}function T0(i,a){i._x_undoAddedStyles&&i._x_undoAddedStyles(),i._x_undoAddedStyles=ni(i,a)}function O0(i,a,l){Za(i,a,l),R0(i,a,l)}function Za(i,a,l){[null,void 0,!1].includes(l)&&B0(a)?i.removeAttribute(a):(Ka(a)&&(l=a),N0(i,a,l))}function N0(i,a,l){i.getAttribute(a)!=l&&i.setAttribute(a,l)}function R0(i,a,l){i[a]!==l&&(i[a]=l)}function D0(i,a){const l=[].concat(a).map(f=>f+"");Array.from(i.options).forEach(f=>{f.selected=l.includes(f.value)})}function M0(i){return i.toLowerCase().replace(/-(\w)/g,(a,l)=>l.toUpperCase())}function mo(i,a){return i==a}function Ur(i){return[1,"1","true","on","yes",!0].includes(i)?!0:[0,"0","false","off","no",!1].includes(i)?!1:i?!!i:null}var v0=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function Ka(i){return v0.has(i)}function B0(i){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(i)}function P0(i,a,l){return i._x_bindings&&i._x_bindings[a]!==void 0?i._x_bindings[a]:qa(i,a,l)}function L0(i,a,l,f=!0){if(i._x_bindings&&i._x_bindings[a]!==void 0)return i._x_bindings[a];if(i._x_inlineBindings&&i._x_inlineBindings[a]!==void 0){let g=i._x_inlineBindings[a];return g.extract=f,Ia(()=>wn(i,g.expression))}return qa(i,a,l)}function qa(i,a,l){let f=i.getAttribute(a);return f===null?typeof l=="function"?l():l:f===""?!0:Ka(a)?!![a,"true"].includes(f):f}function Ss(i){return i.type==="checkbox"||i.localName==="ui-checkbox"||i.localName==="ui-switch"}function Qa(i){return i.type==="radio"||i.localName==="ui-radio"}function Ja(i,a){var l;return function(){var f=this,g=arguments,d=function(){l=null,i.apply(f,g)};clearTimeout(l),l=setTimeout(d,a)}}function $a(i,a){let l;return function(){let f=this,g=arguments;l||(i.apply(f,g),l=!0,setTimeout(()=>l=!1,a))}}function e1({get:i,set:a},{get:l,set:f}){let g=!0,d,w=Cn(()=>{let C=i(),_=l();if(g)f(Pi(C)),g=!1;else{let E=JSON.stringify(C),I=JSON.stringify(_);E!==d?f(Pi(C)):E!==I&&a(Pi(_))}d=JSON.stringify(i()),JSON.stringify(l())});return()=>{kn(w)}}function Pi(i){return typeof i=="object"?JSON.parse(JSON.stringify(i)):i}function F0(i){(Array.isArray(i)?i:[i]).forEach(l=>l(xr))}var fn={},Co=!1;function k0(i,a){if(Co||(fn=Fn(fn),Co=!0),a===void 0)return fn[i];fn[i]=a,ba(fn[i]),typeof a=="object"&&a!==null&&a.hasOwnProperty("init")&&typeof a.init=="function"&&fn[i].init()}function U0(){return fn}var t1={};function V0(i,a){let l=typeof a!="function"?()=>a:a;return i instanceof Element?n1(i,l()):(t1[i]=l,()=>{})}function H0(i){return Object.entries(t1).forEach(([a,l])=>{Object.defineProperty(i,a,{get(){return(...f)=>l(...f)}})}),i}function n1(i,a,l){let f=[];for(;f.length;)f.pop()();let g=Object.entries(a).map(([w,C])=>({name:w,value:C})),d=Oa(g);return g=g.map(w=>d.find(C=>C.name===w.name)?{name:`x-bind:${w.name}`,value:`"${w.value}"`}:w),ms(i,g,l).map(w=>{f.push(w.runCleanups),w()}),()=>{for(;f.length;)f.pop()()}}var r1={};function W0(i,a){r1[i]=a}function G0(i,a){return Object.entries(r1).forEach(([l,f])=>{Object.defineProperty(i,l,{get(){return(...g)=>f.bind(a)(...g)},enumerable:!1})}),i}var X0={get reactive(){return Fn},get release(){return kn},get effect(){return Cn},get raw(){return ha},version:"3.14.8",flushAndStopDeferringMutations:jc,dontAutoEvaluateFunctions:Ia,disableEffectScheduling:Uc,startObservingMutations:ws,stopObservingMutations:ma,setReactivityEngine:Vc,onAttributeRemoved:Aa,onAttributesAdded:pa,closestDataStack:vn,skipDuringClone:nn,onlyDuringClone:C0,addRootSelector:Va,addInitSelector:Ha,interceptClone:ri,addScopeToNode:dr,deferMutations:zc,mapAttributes:Cs,evaluateLater:lt,interceptInit:u0,setEvaluator:Jc,mergeProxies:gr,extractProp:L0,findClosest:Vn,onElRemoved:ds,closestRoot:ti,destroyTree:Hn,interceptor:ya,transition:ns,setStyles:ni,mutateDom:Be,directive:We,entangle:e1,throttle:$a,debounce:Ja,evaluate:wn,initTree:Wt,nextTick:_s,prefixed:Un,prefix:n0,plugin:F0,magic:Rt,store:k0,start:l0,clone:y0,cloneNode:b0,bound:P0,$data:Ca,watch:da,walk:mn,data:W0,bind:V0},xr=X0;function z0(i,a){const l=Object.create(null),f=i.split(",");for(let g=0;g<f.length;g++)l[f[g]]=!0;return g=>!!l[g]}var j0=Object.freeze({}),Y0=Object.prototype.hasOwnProperty,ii=(i,a)=>Y0.call(i,a),pn=Array.isArray,lr=i=>i1(i)==="[object Map]",Z0=i=>typeof i=="string",Ts=i=>typeof i=="symbol",si=i=>i!==null&&typeof i=="object",K0=Object.prototype.toString,i1=i=>K0.call(i),s1=i=>i1(i).slice(8,-1),Os=i=>Z0(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,q0=i=>{const a=Object.create(null);return l=>a[l]||(a[l]=i(l))},Q0=q0(i=>i.charAt(0).toUpperCase()+i.slice(1)),o1=(i,a)=>i!==a&&(i===i||a===a),is=new WeakMap,ir=[],Ut,An=Symbol("iterate"),ss=Symbol("Map key iterate");function J0(i){return i&&i._isEffect===!0}function $0(i,a=j0){J0(i)&&(i=i.raw);const l=nu(i,a);return a.lazy||l(),l}function eu(i){i.active&&(a1(i),i.options.onStop&&i.options.onStop(),i.active=!1)}var tu=0;function nu(i,a){const l=function(){if(!l.active)return i();if(!ir.includes(l)){a1(l);try{return iu(),ir.push(l),Ut=l,i()}finally{ir.pop(),l1(),Ut=ir[ir.length-1]}}};return l.id=tu++,l.allowRecurse=!!a.allowRecurse,l._isEffect=!0,l.active=!0,l.raw=i,l.deps=[],l.options=a,l}function a1(i){const{deps:a}=i;if(a.length){for(let l=0;l<a.length;l++)a[l].delete(i);a.length=0}}var Bn=!0,Ns=[];function ru(){Ns.push(Bn),Bn=!1}function iu(){Ns.push(Bn),Bn=!0}function l1(){const i=Ns.pop();Bn=i===void 0?!0:i}function Ot(i,a,l){if(!Bn||Ut===void 0)return;let f=is.get(i);f||is.set(i,f=new Map);let g=f.get(l);g||f.set(l,g=new Set),g.has(Ut)||(g.add(Ut),Ut.deps.push(g),Ut.options.onTrack&&Ut.options.onTrack({effect:Ut,target:i,type:a,key:l}))}function tn(i,a,l,f,g,d){const w=is.get(i);if(!w)return;const C=new Set,_=I=>{I&&I.forEach(O=>{(O!==Ut||O.allowRecurse)&&C.add(O)})};if(a==="clear")w.forEach(_);else if(l==="length"&&pn(i))w.forEach((I,O)=>{(O==="length"||O>=f)&&_(I)});else switch(l!==void 0&&_(w.get(l)),a){case"add":pn(i)?Os(l)&&_(w.get("length")):(_(w.get(An)),lr(i)&&_(w.get(ss)));break;case"delete":pn(i)||(_(w.get(An)),lr(i)&&_(w.get(ss)));break;case"set":lr(i)&&_(w.get(An));break}const E=I=>{I.options.onTrigger&&I.options.onTrigger({effect:I,target:i,key:l,type:a,newValue:f,oldValue:g,oldTarget:d}),I.options.scheduler?I.options.scheduler(I):I()};C.forEach(E)}var su=z0("__proto__,__v_isRef,__isVue"),c1=new Set(Object.getOwnPropertyNames(Symbol).map(i=>Symbol[i]).filter(Ts)),ou=u1(),au=u1(!0),bo=lu();function lu(){const i={};return["includes","indexOf","lastIndexOf"].forEach(a=>{i[a]=function(...l){const f=De(this);for(let d=0,w=this.length;d<w;d++)Ot(f,"get",d+"");const g=f[a](...l);return g===-1||g===!1?f[a](...l.map(De)):g}}),["push","pop","shift","unshift","splice"].forEach(a=>{i[a]=function(...l){ru();const f=De(this)[a].apply(this,l);return l1(),f}}),i}function u1(i=!1,a=!1){return function(f,g,d){if(g==="__v_isReactive")return!i;if(g==="__v_isReadonly")return i;if(g==="__v_raw"&&d===(i?a?bu:g1:a?Cu:d1).get(f))return f;const w=pn(f);if(!i&&w&&ii(bo,g))return Reflect.get(bo,g,d);const C=Reflect.get(f,g,d);return(Ts(g)?c1.has(g):su(g))||(i||Ot(f,"get",g),a)?C:os(C)?!w||!Os(g)?C.value:C:si(C)?i?x1(C):vs(C):C}}var cu=uu();function uu(i=!1){return function(l,f,g,d){let w=l[f];if(!i&&(g=De(g),w=De(w),!pn(l)&&os(w)&&!os(g)))return w.value=g,!0;const C=pn(l)&&Os(f)?Number(f)<l.length:ii(l,f),_=Reflect.set(l,f,g,d);return l===De(d)&&(C?o1(g,w)&&tn(l,"set",f,g,w):tn(l,"add",f,g)),_}}function fu(i,a){const l=ii(i,a),f=i[a],g=Reflect.deleteProperty(i,a);return g&&l&&tn(i,"delete",a,void 0,f),g}function hu(i,a){const l=Reflect.has(i,a);return(!Ts(a)||!c1.has(a))&&Ot(i,"has",a),l}function du(i){return Ot(i,"iterate",pn(i)?"length":An),Reflect.ownKeys(i)}var gu={get:ou,set:cu,deleteProperty:fu,has:hu,ownKeys:du},xu={get:au,set(i,a){return console.warn(`Set operation on key "${String(a)}" failed: target is readonly.`,i),!0},deleteProperty(i,a){return console.warn(`Delete operation on key "${String(a)}" failed: target is readonly.`,i),!0}},Rs=i=>si(i)?vs(i):i,Ds=i=>si(i)?x1(i):i,Ms=i=>i,oi=i=>Reflect.getPrototypeOf(i);function Nr(i,a,l=!1,f=!1){i=i.__v_raw;const g=De(i),d=De(a);a!==d&&!l&&Ot(g,"get",a),!l&&Ot(g,"get",d);const{has:w}=oi(g),C=f?Ms:l?Ds:Rs;if(w.call(g,a))return C(i.get(a));if(w.call(g,d))return C(i.get(d));i!==g&&i.get(a)}function Rr(i,a=!1){const l=this.__v_raw,f=De(l),g=De(i);return i!==g&&!a&&Ot(f,"has",i),!a&&Ot(f,"has",g),i===g?l.has(i):l.has(i)||l.has(g)}function Dr(i,a=!1){return i=i.__v_raw,!a&&Ot(De(i),"iterate",An),Reflect.get(i,"size",i)}function yo(i){i=De(i);const a=De(this);return oi(a).has.call(a,i)||(a.add(i),tn(a,"add",i,i)),this}function _o(i,a){a=De(a);const l=De(this),{has:f,get:g}=oi(l);let d=f.call(l,i);d?h1(l,f,i):(i=De(i),d=f.call(l,i));const w=g.call(l,i);return l.set(i,a),d?o1(a,w)&&tn(l,"set",i,a,w):tn(l,"add",i,a),this}function Io(i){const a=De(this),{has:l,get:f}=oi(a);let g=l.call(a,i);g?h1(a,l,i):(i=De(i),g=l.call(a,i));const d=f?f.call(a,i):void 0,w=a.delete(i);return g&&tn(a,"delete",i,void 0,d),w}function So(){const i=De(this),a=i.size!==0,l=lr(i)?new Map(i):new Set(i),f=i.clear();return a&&tn(i,"clear",void 0,void 0,l),f}function Mr(i,a){return function(f,g){const d=this,w=d.__v_raw,C=De(w),_=a?Ms:i?Ds:Rs;return!i&&Ot(C,"iterate",An),w.forEach((E,I)=>f.call(g,_(E),_(I),d))}}function vr(i,a,l){return function(...f){const g=this.__v_raw,d=De(g),w=lr(d),C=i==="entries"||i===Symbol.iterator&&w,_=i==="keys"&&w,E=g[i](...f),I=l?Ms:a?Ds:Rs;return!a&&Ot(d,"iterate",_?ss:An),{next(){const{value:O,done:W}=E.next();return W?{value:O,done:W}:{value:C?[I(O[0]),I(O[1])]:I(O),done:W}},[Symbol.iterator](){return this}}}}function $t(i){return function(...a){{const l=a[0]?`on key "${a[0]}" `:"";console.warn(`${Q0(i)} operation ${l}failed: target is readonly.`,De(this))}return i==="delete"?!1:this}}function wu(){const i={get(d){return Nr(this,d)},get size(){return Dr(this)},has:Rr,add:yo,set:_o,delete:Io,clear:So,forEach:Mr(!1,!1)},a={get(d){return Nr(this,d,!1,!0)},get size(){return Dr(this)},has:Rr,add:yo,set:_o,delete:Io,clear:So,forEach:Mr(!1,!0)},l={get(d){return Nr(this,d,!0)},get size(){return Dr(this,!0)},has(d){return Rr.call(this,d,!0)},add:$t("add"),set:$t("set"),delete:$t("delete"),clear:$t("clear"),forEach:Mr(!0,!1)},f={get(d){return Nr(this,d,!0,!0)},get size(){return Dr(this,!0)},has(d){return Rr.call(this,d,!0)},add:$t("add"),set:$t("set"),delete:$t("delete"),clear:$t("clear"),forEach:Mr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{i[d]=vr(d,!1,!1),l[d]=vr(d,!0,!1),a[d]=vr(d,!1,!0),f[d]=vr(d,!0,!0)}),[i,l,a,f]}var[pu,Au,Af,Ef]=wu();function f1(i,a){const l=i?Au:pu;return(f,g,d)=>g==="__v_isReactive"?!i:g==="__v_isReadonly"?i:g==="__v_raw"?f:Reflect.get(ii(l,g)&&g in f?l:f,g,d)}var Eu={get:f1(!1)},mu={get:f1(!0)};function h1(i,a,l){const f=De(l);if(f!==l&&a.call(i,f)){const g=s1(i);console.warn(`Reactive ${g} contains both the raw and reactive versions of the same object${g==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var d1=new WeakMap,Cu=new WeakMap,g1=new WeakMap,bu=new WeakMap;function yu(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _u(i){return i.__v_skip||!Object.isExtensible(i)?0:yu(s1(i))}function vs(i){return i&&i.__v_isReadonly?i:w1(i,!1,gu,Eu,d1)}function x1(i){return w1(i,!0,xu,mu,g1)}function w1(i,a,l,f,g){if(!si(i))return console.warn(`value cannot be made reactive: ${String(i)}`),i;if(i.__v_raw&&!(a&&i.__v_isReactive))return i;const d=g.get(i);if(d)return d;const w=_u(i);if(w===0)return i;const C=new Proxy(i,w===2?f:l);return g.set(i,C),C}function De(i){return i&&De(i.__v_raw)||i}function os(i){return!!(i&&i.__v_isRef===!0)}Rt("nextTick",()=>_s);Rt("dispatch",i=>ar.bind(ar,i));Rt("watch",(i,{evaluateLater:a,cleanup:l})=>(f,g)=>{let d=a(f),C=da(()=>{let _;return d(E=>_=E),_},g);l(C)});Rt("store",U0);Rt("data",i=>Ca(i));Rt("root",i=>ti(i));Rt("refs",i=>(i._x_refs_proxy||(i._x_refs_proxy=gr(Iu(i))),i._x_refs_proxy));function Iu(i){let a=[];return Vn(i,l=>{l._x_refs&&a.push(l._x_refs)}),a}var Li={};function p1(i){return Li[i]||(Li[i]=0),++Li[i]}function Su(i,a){return Vn(i,l=>{if(l._x_ids&&l._x_ids[a])return!0})}function Tu(i,a){i._x_ids||(i._x_ids={}),i._x_ids[a]||(i._x_ids[a]=p1(a))}Rt("id",(i,{cleanup:a})=>(l,f=null)=>{let g=`${l}${f?`-${f}`:""}`;return Ou(i,g,a,()=>{let d=Su(i,l),w=d?d._x_ids[l]:p1(l);return f?`${l}-${w}-${f}`:`${l}-${w}`})});ri((i,a)=>{i._x_id&&(a._x_id=i._x_id)});function Ou(i,a,l,f){if(i._x_id||(i._x_id={}),i._x_id[a])return i._x_id[a];let g=f();return i._x_id[a]=g,l(()=>{delete i._x_id[a]}),g}Rt("el",i=>i);A1("Focus","focus","focus");A1("Persist","persist","persist");function A1(i,a,l){Rt(a,f=>_t(`You can't use [$${a}] without first installing the "${i}" plugin here: https://alpinejs.dev/plugins/${l}`,f))}We("modelable",(i,{expression:a},{effect:l,evaluateLater:f,cleanup:g})=>{let d=f(a),w=()=>{let I;return d(O=>I=O),I},C=f(`${a} = __placeholder`),_=I=>C(()=>{},{scope:{__placeholder:I}}),E=w();_(E),queueMicrotask(()=>{if(!i._x_model)return;i._x_removeModelListeners.default();let I=i._x_model.get,O=i._x_model.set,W=e1({get(){return I()},set(Y){O(Y)}},{get(){return w()},set(Y){_(Y)}});g(W)})});We("teleport",(i,{modifiers:a,expression:l},{cleanup:f})=>{i.tagName.toLowerCase()!=="template"&&_t("x-teleport can only be used on a <template> tag",i);let g=To(l),d=i.content.cloneNode(!0).firstElementChild;i._x_teleport=d,d._x_teleportBack=i,i.setAttribute("data-teleport-template",!0),d.setAttribute("data-teleport-target",!0),i._x_forwardEvents&&i._x_forwardEvents.forEach(C=>{d.addEventListener(C,_=>{_.stopPropagation(),i.dispatchEvent(new _.constructor(_.type,_))})}),dr(d,{},i);let w=(C,_,E)=>{E.includes("prepend")?_.parentNode.insertBefore(C,_):E.includes("append")?_.parentNode.insertBefore(C,_.nextSibling):_.appendChild(C)};Be(()=>{w(d,g,a),nn(()=>{Wt(d)})()}),i._x_teleportPutBack=()=>{let C=To(l);Be(()=>{w(i._x_teleport,C,a)})},f(()=>Be(()=>{d.remove(),Hn(d)}))});var Nu=document.createElement("div");function To(i){let a=nn(()=>document.querySelector(i),()=>Nu)();return a||_t(`Cannot find x-teleport element for selector: "${i}"`),a}var E1=()=>{};E1.inline=(i,{modifiers:a},{cleanup:l})=>{a.includes("self")?i._x_ignoreSelf=!0:i._x_ignore=!0,l(()=>{a.includes("self")?delete i._x_ignoreSelf:delete i._x_ignore})};We("ignore",E1);We("effect",nn((i,{expression:a},{effect:l})=>{l(lt(i,a))}));function as(i,a,l,f){let g=i,d=_=>f(_),w={},C=(_,E)=>I=>E(_,I);if(l.includes("dot")&&(a=Ru(a)),l.includes("camel")&&(a=Du(a)),l.includes("passive")&&(w.passive=!0),l.includes("capture")&&(w.capture=!0),l.includes("window")&&(g=window),l.includes("document")&&(g=document),l.includes("debounce")){let _=l[l.indexOf("debounce")+1]||"invalid-wait",E=zr(_.split("ms")[0])?Number(_.split("ms")[0]):250;d=Ja(d,E)}if(l.includes("throttle")){let _=l[l.indexOf("throttle")+1]||"invalid-wait",E=zr(_.split("ms")[0])?Number(_.split("ms")[0]):250;d=$a(d,E)}return l.includes("prevent")&&(d=C(d,(_,E)=>{E.preventDefault(),_(E)})),l.includes("stop")&&(d=C(d,(_,E)=>{E.stopPropagation(),_(E)})),l.includes("once")&&(d=C(d,(_,E)=>{_(E),g.removeEventListener(a,d,w)})),(l.includes("away")||l.includes("outside"))&&(g=document,d=C(d,(_,E)=>{i.contains(E.target)||E.target.isConnected!==!1&&(i.offsetWidth<1&&i.offsetHeight<1||i._x_isShown!==!1&&_(E))})),l.includes("self")&&(d=C(d,(_,E)=>{E.target===i&&_(E)})),(vu(a)||m1(a))&&(d=C(d,(_,E)=>{Bu(E,l)||_(E)})),g.addEventListener(a,d,w),()=>{g.removeEventListener(a,d,w)}}function Ru(i){return i.replace(/-/g,".")}function Du(i){return i.toLowerCase().replace(/-(\w)/g,(a,l)=>l.toUpperCase())}function zr(i){return!Array.isArray(i)&&!isNaN(i)}function Mu(i){return[" ","_"].includes(i)?i:i.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function vu(i){return["keydown","keyup"].includes(i)}function m1(i){return["contextmenu","click","mouse"].some(a=>i.includes(a))}function Bu(i,a){let l=a.filter(d=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(d));if(l.includes("debounce")){let d=l.indexOf("debounce");l.splice(d,zr((l[d+1]||"invalid-wait").split("ms")[0])?2:1)}if(l.includes("throttle")){let d=l.indexOf("throttle");l.splice(d,zr((l[d+1]||"invalid-wait").split("ms")[0])?2:1)}if(l.length===0||l.length===1&&Oo(i.key).includes(l[0]))return!1;const g=["ctrl","shift","alt","meta","cmd","super"].filter(d=>l.includes(d));return l=l.filter(d=>!g.includes(d)),!(g.length>0&&g.filter(w=>((w==="cmd"||w==="super")&&(w="meta"),i[`${w}Key`])).length===g.length&&(m1(i.type)||Oo(i.key).includes(l[0])))}function Oo(i){if(!i)return[];i=Mu(i);let a={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return a[i]=i,Object.keys(a).map(l=>{if(a[l]===i)return l}).filter(l=>l)}We("model",(i,{modifiers:a,expression:l},{effect:f,cleanup:g})=>{let d=i;a.includes("parent")&&(d=i.parentNode);let w=lt(d,l),C;typeof l=="string"?C=lt(d,`${l} = __placeholder`):typeof l=="function"&&typeof l()=="string"?C=lt(d,`${l()} = __placeholder`):C=()=>{};let _=()=>{let W;return w(Y=>W=Y),No(W)?W.get():W},E=W=>{let Y;w(j=>Y=j),No(Y)?Y.set(W):C(()=>{},{scope:{__placeholder:W}})};typeof l=="string"&&i.type==="radio"&&Be(()=>{i.hasAttribute("name")||i.setAttribute("name",l)});var I=i.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(i.type)||a.includes("lazy")?"change":"input";let O=en?()=>{}:as(i,I,a,W=>{E(Fi(i,a,W,_()))});if(a.includes("fill")&&([void 0,null,""].includes(_())||Ss(i)&&Array.isArray(_())||i.tagName.toLowerCase()==="select"&&i.multiple)&&E(Fi(i,a,{target:i},_())),i._x_removeModelListeners||(i._x_removeModelListeners={}),i._x_removeModelListeners.default=O,g(()=>i._x_removeModelListeners.default()),i.form){let W=as(i.form,"reset",[],Y=>{_s(()=>i._x_model&&i._x_model.set(Fi(i,a,{target:i},_())))});g(()=>W())}i._x_model={get(){return _()},set(W){E(W)}},i._x_forceModelUpdate=W=>{W===void 0&&typeof l=="string"&&l.match(/\./)&&(W=""),window.fromModel=!0,Be(()=>Ya(i,"value",W)),delete window.fromModel},f(()=>{let W=_();a.includes("unintrusive")&&document.activeElement.isSameNode(i)||i._x_forceModelUpdate(W)})});function Fi(i,a,l,f){return Be(()=>{if(l instanceof CustomEvent&&l.detail!==void 0)return l.detail!==null&&l.detail!==void 0?l.detail:l.target.value;if(Ss(i))if(Array.isArray(f)){let g=null;return a.includes("number")?g=ki(l.target.value):a.includes("boolean")?g=Ur(l.target.value):g=l.target.value,l.target.checked?f.includes(g)?f:f.concat([g]):f.filter(d=>!Pu(d,g))}else return l.target.checked;else{if(i.tagName.toLowerCase()==="select"&&i.multiple)return a.includes("number")?Array.from(l.target.selectedOptions).map(g=>{let d=g.value||g.text;return ki(d)}):a.includes("boolean")?Array.from(l.target.selectedOptions).map(g=>{let d=g.value||g.text;return Ur(d)}):Array.from(l.target.selectedOptions).map(g=>g.value||g.text);{let g;return Qa(i)?l.target.checked?g=l.target.value:g=f:g=l.target.value,a.includes("number")?ki(g):a.includes("boolean")?Ur(g):a.includes("trim")?g.trim():g}}})}function ki(i){let a=i?parseFloat(i):null;return Lu(a)?a:i}function Pu(i,a){return i==a}function Lu(i){return!Array.isArray(i)&&!isNaN(i)}function No(i){return i!==null&&typeof i=="object"&&typeof i.get=="function"&&typeof i.set=="function"}We("cloak",i=>queueMicrotask(()=>Be(()=>i.removeAttribute(Un("cloak")))));Ha(()=>`[${Un("init")}]`);We("init",nn((i,{expression:a},{evaluate:l})=>typeof a=="string"?!!a.trim()&&l(a,{},!1):l(a,{},!1)));We("text",(i,{expression:a},{effect:l,evaluateLater:f})=>{let g=f(a);l(()=>{g(d=>{Be(()=>{i.textContent=d})})})});We("html",(i,{expression:a},{effect:l,evaluateLater:f})=>{let g=f(a);l(()=>{g(d=>{Be(()=>{i.innerHTML=d,i._x_ignoreSelf=!0,Wt(i),delete i._x_ignoreSelf})})})});Cs(Da(":",Ma(Un("bind:"))));var C1=(i,{value:a,modifiers:l,expression:f,original:g},{effect:d,cleanup:w})=>{if(!a){let _={};H0(_),lt(i,f)(I=>{n1(i,I,g)},{scope:_});return}if(a==="key")return Fu(i,f);if(i._x_inlineBindings&&i._x_inlineBindings[a]&&i._x_inlineBindings[a].extract)return;let C=lt(i,f);d(()=>C(_=>{_===void 0&&typeof f=="string"&&f.match(/\./)&&(_=""),Be(()=>Ya(i,a,_,l))})),w(()=>{i._x_undoAddedClasses&&i._x_undoAddedClasses(),i._x_undoAddedStyles&&i._x_undoAddedStyles()})};C1.inline=(i,{value:a,modifiers:l,expression:f})=>{a&&(i._x_inlineBindings||(i._x_inlineBindings={}),i._x_inlineBindings[a]={expression:f,extract:!1})};We("bind",C1);function Fu(i,a){i._x_keyExpression=a}Va(()=>`[${Un("data")}]`);We("data",(i,{expression:a},{cleanup:l})=>{if(ku(i))return;a=a===""?"{}":a;let f={};qi(f,i);let g={};G0(g,f);let d=wn(i,a,{scope:g});(d===void 0||d===!0)&&(d={}),qi(d,i);let w=Fn(d);ba(w);let C=dr(i,w);w.init&&wn(i,w.init),l(()=>{w.destroy&&wn(i,w.destroy),C()})});ri((i,a)=>{i._x_dataStack&&(a._x_dataStack=i._x_dataStack,a.setAttribute("data-has-alpine-state",!0))});function ku(i){return en?rs?!0:i.hasAttribute("data-has-alpine-state"):!1}We("show",(i,{modifiers:a,expression:l},{effect:f})=>{let g=lt(i,l);i._x_doHide||(i._x_doHide=()=>{Be(()=>{i.style.setProperty("display","none",a.includes("important")?"important":void 0)})}),i._x_doShow||(i._x_doShow=()=>{Be(()=>{i.style.length===1&&i.style.display==="none"?i.removeAttribute("style"):i.style.removeProperty("display")})});let d=()=>{i._x_doHide(),i._x_isShown=!1},w=()=>{i._x_doShow(),i._x_isShown=!0},C=()=>setTimeout(w),_=ts(O=>O?w():d(),O=>{typeof i._x_toggleAndCascadeWithTransitions=="function"?i._x_toggleAndCascadeWithTransitions(i,O,w,d):O?C():d()}),E,I=!0;f(()=>g(O=>{!I&&O===E||(a.includes("immediate")&&(O?C():d()),_(O),E=O,I=!1)}))});We("for",(i,{expression:a},{effect:l,cleanup:f})=>{let g=Vu(a),d=lt(i,g.items),w=lt(i,i._x_keyExpression||"index");i._x_prevKeys=[],i._x_lookup={},l(()=>Uu(i,g,d,w)),f(()=>{Object.values(i._x_lookup).forEach(C=>Be(()=>{Hn(C),C.remove()})),delete i._x_prevKeys,delete i._x_lookup})});function Uu(i,a,l,f){let g=w=>typeof w=="object"&&!Array.isArray(w),d=i;l(w=>{Hu(w)&&w>=0&&(w=Array.from(Array(w).keys(),P=>P+1)),w===void 0&&(w=[]);let C=i._x_lookup,_=i._x_prevKeys,E=[],I=[];if(g(w))w=Object.entries(w).map(([P,$])=>{let Z=Ro(a,$,P,w);f(G=>{I.includes(G)&&_t("Duplicate key on x-for",i),I.push(G)},{scope:{index:P,...Z}}),E.push(Z)});else for(let P=0;P<w.length;P++){let $=Ro(a,w[P],P,w);f(Z=>{I.includes(Z)&&_t("Duplicate key on x-for",i),I.push(Z)},{scope:{index:P,...$}}),E.push($)}let O=[],W=[],Y=[],j=[];for(let P=0;P<_.length;P++){let $=_[P];I.indexOf($)===-1&&Y.push($)}_=_.filter(P=>!Y.includes(P));let X="template";for(let P=0;P<I.length;P++){let $=I[P],Z=_.indexOf($);if(Z===-1)_.splice(P,0,$),O.push([X,P]);else if(Z!==P){let G=_.splice(P,1)[0],ee=_.splice(Z-1,1)[0];_.splice(P,0,ee),_.splice(Z,0,G),W.push([G,ee])}else j.push($);X=$}for(let P=0;P<Y.length;P++){let $=Y[P];$ in C&&(Be(()=>{Hn(C[$]),C[$].remove()}),delete C[$])}for(let P=0;P<W.length;P++){let[$,Z]=W[P],G=C[$],ee=C[Z],me=document.createElement("div");Be(()=>{ee||_t('x-for ":key" is undefined or invalid',d,Z,C),ee.after(me),G.after(ee),ee._x_currentIfEl&&ee.after(ee._x_currentIfEl),me.before(G),G._x_currentIfEl&&G.after(G._x_currentIfEl),me.remove()}),ee._x_refreshXForScope(E[I.indexOf(Z)])}for(let P=0;P<O.length;P++){let[$,Z]=O[P],G=$==="template"?d:C[$];G._x_currentIfEl&&(G=G._x_currentIfEl);let ee=E[Z],me=I[Z],oe=document.importNode(d.content,!0).firstElementChild,k=Fn(ee);dr(oe,k,d),oe._x_refreshXForScope=he=>{Object.entries(he).forEach(([V,Gt])=>{k[V]=Gt})},Be(()=>{G.after(oe),nn(()=>Wt(oe))()}),typeof me=="object"&&_t("x-for key cannot be an object, it must be a string or an integer",d),C[me]=oe}for(let P=0;P<j.length;P++)C[j[P]]._x_refreshXForScope(E[I.indexOf(j[P])]);d._x_prevKeys=I})}function Vu(i){let a=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,l=/^\s*\(|\)\s*$/g,f=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,g=i.match(f);if(!g)return;let d={};d.items=g[2].trim();let w=g[1].replace(l,"").trim(),C=w.match(a);return C?(d.item=w.replace(a,"").trim(),d.index=C[1].trim(),C[2]&&(d.collection=C[2].trim())):d.item=w,d}function Ro(i,a,l,f){let g={};return/^\[.*\]$/.test(i.item)&&Array.isArray(a)?i.item.replace("[","").replace("]","").split(",").map(w=>w.trim()).forEach((w,C)=>{g[w]=a[C]}):/^\{.*\}$/.test(i.item)&&!Array.isArray(a)&&typeof a=="object"?i.item.replace("{","").replace("}","").split(",").map(w=>w.trim()).forEach(w=>{g[w]=a[w]}):g[i.item]=a,i.index&&(g[i.index]=l),i.collection&&(g[i.collection]=f),g}function Hu(i){return!Array.isArray(i)&&!isNaN(i)}function b1(){}b1.inline=(i,{expression:a},{cleanup:l})=>{let f=ti(i);f._x_refs||(f._x_refs={}),f._x_refs[a]=i,l(()=>delete f._x_refs[a])};We("ref",b1);We("if",(i,{expression:a},{effect:l,cleanup:f})=>{i.tagName.toLowerCase()!=="template"&&_t("x-if can only be used on a <template> tag",i);let g=lt(i,a),d=()=>{if(i._x_currentIfEl)return i._x_currentIfEl;let C=i.content.cloneNode(!0).firstElementChild;return dr(C,{},i),Be(()=>{i.after(C),nn(()=>Wt(C))()}),i._x_currentIfEl=C,i._x_undoIf=()=>{Be(()=>{Hn(C),C.remove()}),delete i._x_currentIfEl},C},w=()=>{i._x_undoIf&&(i._x_undoIf(),delete i._x_undoIf)};l(()=>g(C=>{C?d():w()})),f(()=>i._x_undoIf&&i._x_undoIf())});We("id",(i,{expression:a},{evaluate:l})=>{l(a).forEach(g=>Tu(i,g))});ri((i,a)=>{i._x_ids&&(a._x_ids=i._x_ids)});Cs(Da("@",Ma(Un("on:"))));We("on",nn((i,{value:a,modifiers:l,expression:f},{cleanup:g})=>{let d=f?lt(i,f):()=>{};i.tagName.toLowerCase()==="template"&&(i._x_forwardEvents||(i._x_forwardEvents=[]),i._x_forwardEvents.includes(a)||i._x_forwardEvents.push(a));let w=as(i,a,l,C=>{d(()=>{},{scope:{$event:C},params:[C]})});g(()=>w())}));ai("Collapse","collapse","collapse");ai("Intersect","intersect","intersect");ai("Focus","trap","focus");ai("Mask","mask","mask");function ai(i,a,l){We(a,f=>_t(`You can't use [x-${a}] without first installing the "${i}" plugin here: https://alpinejs.dev/plugins/${l}`,f))}xr.setEvaluator(Ta);xr.setReactivityEngine({reactive:vs,effect:$0,release:eu,raw:De});var Wu=xr,y1=Wu,q;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(q||(q={}));var Do=new Map([[q.QR_CODE,"QR_CODE"],[q.AZTEC,"AZTEC"],[q.CODABAR,"CODABAR"],[q.CODE_39,"CODE_39"],[q.CODE_93,"CODE_93"],[q.CODE_128,"CODE_128"],[q.DATA_MATRIX,"DATA_MATRIX"],[q.MAXICODE,"MAXICODE"],[q.ITF,"ITF"],[q.EAN_13,"EAN_13"],[q.EAN_8,"EAN_8"],[q.PDF_417,"PDF_417"],[q.RSS_14,"RSS_14"],[q.RSS_EXPANDED,"RSS_EXPANDED"],[q.UPC_A,"UPC_A"],[q.UPC_E,"UPC_E"],[q.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Mo;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(Mo||(Mo={}));function Gu(i){return Object.values(q).includes(i)}var jr;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(jr||(jr={}));var Xu=function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[jr.SCAN_TYPE_CAMERA,jr.SCAN_TYPE_FILE],i}(),_1=function(){function i(a,l){this.format=a,this.formatName=l}return i.prototype.toString=function(){return this.formatName},i.create=function(a){if(!Do.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new i(a,Do.get(a))},i}(),vo=function(){function i(){}return i.createFromText=function(a){var l={text:a};return{decodedText:a,result:l}},i.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},i}(),ls;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(ls||(ls={}));var zu=function(){function i(){}return i.createFrom=function(a){return{errorMessage:a,type:ls.UNKWOWN_ERROR}},i}(),ju=function(){function i(a){this.verbose=a}return i.prototype.log=function(a){this.verbose&&console.log(a)},i.prototype.warn=function(a){this.verbose&&console.warn(a)},i.prototype.logError=function(a,l){(this.verbose||l===!0)&&console.error(a)},i.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},i}();function Ht(i){return typeof i>"u"||i===null}var Mn=function(){function i(){}return i.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},i.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i}(),I1=function(){function i(){}return i.isMediaStreamConstraintsValid=function(a,l){if(typeof a!="object"){var f=typeof a;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(f,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(g),w=Object.keys(a),C=0,_=w;C<_.length;C++){var E=_[C];if(d.has(E))return l.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},i}(),Br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var or={exports:{}},Zu=or.exports,Bo;function Ku(){return Bo||(Bo=1,function(i,a){(function(l,f){f(a)})(Zu,function(l){function f(p){return p==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,e){p.__proto__=e}||function(p,e){for(var t in e)e.hasOwnProperty(t)&&(p[t]=e[t])};function d(p,e){g(p,e);function t(){this.constructor=p}p.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function w(p,e){var t=Object.setPrototypeOf;t?t(p,e):p.__proto__=e}function C(p,e){e===void 0&&(e=p.constructor);var t=Error.captureStackTrace;t&&t(p,e)}var _=function(p){d(e,p);function e(t){var n=this.constructor,r=p.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),w(r,n.prototype),C(r),r}return e}(Error);class E extends _{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class I extends E{}I.kind="ArgumentException";class O extends E{}O.kind="IllegalArgumentException";class W{constructor(e){if(this.binarizer=e,e===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const s=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new W(this.binarizer.createBinarizer(s))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new W(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new W(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class Y extends E{static getChecksumInstance(){return new Y}}Y.kind="ChecksumException";class j{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class X{static arraycopy(e,t,n,r,s){for(;s--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class P extends E{}P.kind="IndexOutOfBoundsException";class $ extends P{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}$.kind="ArrayIndexOutOfBoundsException";class Z{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){Z.rangeCheck(e.length,t,n);for(let s=t;s<n;s++)e[s]=r}static rangeCheck(e,t,n){if(t>n)throw new O("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new $(t);if(n>e)throw new $(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(s=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(s=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,s=new Int32Array(r);return X.arraycopy(e,t,s,0,r),s}static binarySearch(e,t,n){n===void 0&&(n=Z.numberComparator);let r=0,s=e.length-1;for(;r<=s;){const o=s+r>>1,c=n(t,e[o]);if(c>0)r=o+1;else if(c<0)s=o-1;else return o}return-r-1}static numberComparator(e,t){return e-t}}class G{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}G.MIN_VALUE_32_BITS=-2147483648,G.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ee{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=ee.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=ee.makeArray(e);X.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),s=n[r];s&=~((1<<(e&31))-1);const o=n.length;for(;s===0;){if(++r===o)return t;s=n[r]}const c=r*32+G.numberOfTrailingZeros(s);return c>t?t:c}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),s=~n[r];s&=~((1<<(e&31))-1);const o=n.length;for(;s===0;){if(++r===o)return t;s=~n[r]}const c=r*32+G.numberOfTrailingZeros(s);return c>t?t:c}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new O;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),s=this.bits;for(let o=n;o<=r;o++){const c=o>n?0:e&31,h=(2<<(o<r?31:t&31))-(1<<c);s[o]|=h}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new O;if(t===e)return!0;t--;const r=Math.floor(e/32),s=Math.floor(t/32),o=this.bits;for(let c=r;c<=s;c++){const u=c>r?0:e&31,x=(2<<(c<s?31:t&31))-(1<<u)&4294967295;if((o[c]&x)!==(n?x:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new O("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let s=0;s<r;s++){let o=0;for(let c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;t[n+s]=o}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let s=0;s<n;s++){let o=r[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-s]=o}if(this.size!==n*32){const s=n*32-this.size;let o=e[0]>>>s;for(let c=1;c<n;c++){const u=e[c];o|=u<<32-s,e[c-1]=o,o=u>>>s}e[n-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ee))return!1;const t=e;return this.size===t.size&&Z.equals(this.bits,t.bits)}hashCode(){return 31*this.size+Z.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new ee(this.size,this.bits.slice())}}var me;(function(p){p[p.OTHER=0]="OTHER",p[p.PURE_BARCODE=1]="PURE_BARCODE",p[p.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",p[p.TRY_HARDER=3]="TRY_HARDER",p[p.CHARACTER_SET=4]="CHARACTER_SET",p[p.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",p[p.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",p[p.ASSUME_GS1=7]="ASSUME_GS1",p[p.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",p[p.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",p[p.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(me||(me={}));var oe=me;class k extends E{static getFormatInstance(){return new k}}k.kind="FormatException";var he;(function(p){p[p.Cp437=0]="Cp437",p[p.ISO8859_1=1]="ISO8859_1",p[p.ISO8859_2=2]="ISO8859_2",p[p.ISO8859_3=3]="ISO8859_3",p[p.ISO8859_4=4]="ISO8859_4",p[p.ISO8859_5=5]="ISO8859_5",p[p.ISO8859_6=6]="ISO8859_6",p[p.ISO8859_7=7]="ISO8859_7",p[p.ISO8859_8=8]="ISO8859_8",p[p.ISO8859_9=9]="ISO8859_9",p[p.ISO8859_10=10]="ISO8859_10",p[p.ISO8859_11=11]="ISO8859_11",p[p.ISO8859_13=12]="ISO8859_13",p[p.ISO8859_14=13]="ISO8859_14",p[p.ISO8859_15=14]="ISO8859_15",p[p.ISO8859_16=15]="ISO8859_16",p[p.SJIS=16]="SJIS",p[p.Cp1250=17]="Cp1250",p[p.Cp1251=18]="Cp1251",p[p.Cp1252=19]="Cp1252",p[p.Cp1256=20]="Cp1256",p[p.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",p[p.UTF8=22]="UTF8",p[p.ASCII=23]="ASCII",p[p.Big5=24]="Big5",p[p.GB18030=25]="GB18030",p[p.EUC_KR=26]="EUC_KR"})(he||(he={}));class V{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,V.VALUE_IDENTIFIER_TO_ECI.set(e,this),V.NAME_TO_ECI.set(n,this);const s=this.values;for(let o=0,c=s.length;o!==c;o++){const u=s[o];V.VALUES_TO_ECI.set(u,this)}for(const o of r)V.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new k("incorect value");const t=V.VALUES_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}static getCharacterSetECIByName(e){const t=V.NAME_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}equals(e){if(!(e instanceof V))return!1;const t=e;return this.getName()===t.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(he.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(he.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(he.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(he.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(he.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(he.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(he.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(he.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(he.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(he.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(he.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(he.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(he.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(he.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(he.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(he.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(he.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(he.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(he.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(he.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(he.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(he.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(he.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(he.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(he.Big5,28,"Big5"),V.GB18030=new V(he.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(he.EUC_KR,30,"EUC_KR","EUC-KR");class Gt extends E{}Gt.kind="UnsupportedOperationException";class ct{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!ct.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof V?e:V.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(ct.isDecodeFallbackSupported(n)){let r="";for(let s=0,o=e.length;s<o;s++){let c=e[s].toString(16);c.length<2&&(c="0"+c),r+="%"+c}return decodeURIComponent(r)}if(n.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Gt(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(V.UTF8)||e.equals(V.ISO8859_1)||e.equals(V.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let s=0;s<n.length;s++)r.push(n[s].charCodeAt(0));return new Uint8Array(r)}}class se{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return ct.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(oe.CHARACTER_SET)!==void 0)return t.get(oe.CHARACTER_SET).toString();const n=e.length;let r=!0,s=!0,o=!0,c=0,u=0,h=0,x=0,A=0,m=0,y=0,S=0,T=0,N=0,M=0;const U=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let H=0;H<n&&(r||s||o);H++){const F=e[H]&255;o&&(c>0?F&128?c--:o=!1:F&128&&(F&64?(c++,F&32?(c++,F&16?(c++,F&8?o=!1:x++):h++):u++):o=!1)),r&&(F>127&&F<160?r=!1:F>159&&(F<192||F===215||F===247)&&M++),s&&(A>0?F<64||F===127||F>252?s=!1:A--:F===128||F===160||F>239?s=!1:F>160&&F<224?(m++,S=0,y++,y>T&&(T=y)):F>127?(A++,y=0,S++,S>N&&(N=S)):(y=0,S=0))}return o&&c>0&&(o=!1),s&&A>0&&(s=!1),o&&(U||u+h+x>0)?se.UTF8:s&&(se.ASSUME_SHIFT_JIS||T>=3||N>=3)?se.SHIFT_JIS:r&&s?T===2&&m===2||M*10>=n?se.SHIFT_JIS:se.ISO88591:r?se.ISO88591:s?se.SHIFT_JIS:o?se.UTF8:se.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(o,c,u,h,x,A){if(o==="%%")return"%";if(t[++n]===void 0)return;o=h?parseInt(h.substr(1)):void 0;let m=x?parseInt(x.substr(1)):void 0,y;switch(A){case"s":y=t[n];break;case"c":y=t[n][0];break;case"f":y=parseFloat(t[n]).toFixed(o);break;case"p":y=parseFloat(t[n]).toPrecision(o);break;case"e":y=parseFloat(t[n]).toExponential(o);break;case"x":y=parseInt(t[n]).toString(m||16);break;case"d":y=parseFloat(parseInt(t[n],m||10).toPrecision(o)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(m);let S=parseInt(u),T=u&&u[0]+""=="0"?"0":" ";for(;y.length<S;)y=c!==void 0?y+T:T+y;return y}let s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,r)}static getBytes(e,t){return ct.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}se.SHIFT_JIS=V.SJIS.getName(),se.GB2312="GB2312",se.ISO88591=V.ISO8859_1.getName(),se.EUC_JP="EUC_JP",se.UTF8=V.UTF8.getName(),se.PLATFORM_DEFAULT_ENCODING=se.UTF8,se.ASSUME_SHIFT_JIS=!1;class be{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=se.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class je{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new O("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new je(n,t);for(let s=0;s<t;s++){const o=e[s];for(let c=0;c<n;c++)o[c]&&r.set(c,s)}return r}static parseFromString(e,t,n){if(e===null)throw new O("stringRepresentation cannot be null");const r=new Array(e.length);let s=0,o=0,c=-1,u=0,h=0;for(;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(s>o){if(c===-1)c=s-o;else if(s-o!==c)throw new O("row lengths do not match");o=s,u++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,r[s]=!0,s++;else if(e.substring(h,h+n.length)===n)h+=n.length,r[s]=!1,s++;else throw new O("illegal character encountered: "+e.substring(h));if(s>o){if(c===-1)c=s-o;else if(s-o!==c)throw new O("row lengths do not match");u++}const x=new je(c,u);for(let A=0;A<s;A++)r[A]&&x.set(Math.floor(A%c),Math.floor(A/c));return x}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new O("input matrix dimensions do not match");const t=new ee(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let s=0,o=this.height;s<o;s++){const c=s*n,u=e.getRow(s,t).getBitArray();for(let h=0;h<n;h++)r[c+h]^=u[h]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new O("Left and top must be nonnegative");if(r<1||n<1)throw new O("Height and width must be at least 1");const s=e+n,o=t+r;if(o>this.height||s>this.width)throw new O("The region must fit inside the matrix");const c=this.rowSize,u=this.bits;for(let h=t;h<o;h++){const x=h*c;for(let A=e;A<s;A++)u[x+Math.floor(A/32)]|=1<<(A&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new ee(this.width):t.clear();const n=this.rowSize,r=this.bits,s=e*n;for(let o=0;o<n;o++)t.setBulk(o*32,r[s+o]);return t}setRow(e,t){X.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new ee(e),r=new ee(e);for(let s=0,o=Math.floor((t+1)/2);s<o;s++)n=this.getRow(s,n),r=this.getRow(t-1-s,r),n.reverse(),r.reverse(),this.setRow(s,r),this.setRow(t-1-s,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let s=e,o=t,c=-1,u=-1;for(let h=0;h<t;h++)for(let x=0;x<n;x++){const A=r[h*n+x];if(A!==0){if(h<o&&(o=h),h>u&&(u=h),x*32<s){let m=0;for(;!(A<<31-m&4294967295);)m++;x*32+m<s&&(s=x*32+m)}if(x*32+31>c){let m=31;for(;!(A>>>m);)m--;x*32+m>c&&(c=x*32+m)}}}return c<s||u<o?null:Int32Array.from([s,o,c-s+1,u-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const r=n/e;let s=n%e*32;const o=t[n];let c=0;for(;!(o<<31-c&4294967295);)c++;return s+=c,Int32Array.from([s,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const r=Math.floor(n/e);let s=Math.floor(n%e)*32;const o=t[n];let c=31;for(;!(o>>>c);)c--;return s+=c,Int32Array.from([s,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof je))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Z.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Z.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new be;for(let s=0,o=this.height;s<o;s++){for(let c=0,u=this.width;c<u;c++)r.append(this.get(c,s)?e:t);r.append(n)}return r.toString()}clone(){return new je(this.width,this.height,this.rowSize,this.bits.slice())}}class B extends E{static getNotFoundInstance(){return new B}}B.kind="NotFoundException";class Ye extends j{constructor(e){super(e),this.luminances=Ye.EMPTY,this.buckets=new Int32Array(Ye.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new ee(r):t.clear(),this.initArrays(r);const s=n.getRow(e,this.luminances),o=this.buckets;for(let u=0;u<r;u++)o[(s[u]&255)>>Ye.LUMINANCE_SHIFT]++;const c=Ye.estimateBlackPoint(o);if(r<3)for(let u=0;u<r;u++)(s[u]&255)<c&&t.set(u);else{let u=s[0]&255,h=s[1]&255;for(let x=1;x<r-1;x++){const A=s[x+1]&255;(h*4-u-A)/2<c&&t.set(x),u=h,h=A}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new je(t,n);this.initArrays(t);const s=this.buckets;for(let u=1;u<5;u++){const h=Math.floor(n*u/5),x=e.getRow(h,this.luminances),A=Math.floor(t*4/5);for(let m=Math.floor(t/5);m<A;m++){const y=x[m]&255;s[y>>Ye.LUMINANCE_SHIFT]++}}const o=Ye.estimateBlackPoint(s),c=e.getMatrix();for(let u=0;u<n;u++){const h=u*t;for(let x=0;x<t;x++)(c[h+x]&255)<o&&r.set(x,u)}return r}createBinarizer(e){return new Ye(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<Ye.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,s=0;for(let x=0;x<t;x++)e[x]>s&&(r=x,s=e[x]),e[x]>n&&(n=e[x]);let o=0,c=0;for(let x=0;x<t;x++){const A=x-r,m=e[x]*A*A;m>c&&(o=x,c=m)}if(r>o){const x=r;r=o,o=x}if(o-r<=t/16)throw new B;let u=o-1,h=-1;for(let x=o-1;x>r;x--){const A=x-r,m=A*A*(o-x)*(n-e[x]);m>h&&(u=x,h=m)}return u<<Ye.LUMINANCE_SHIFT}}Ye.LUMINANCE_BITS=5,Ye.LUMINANCE_SHIFT=8-Ye.LUMINANCE_BITS,Ye.LUMINANCE_BUCKETS=1<<Ye.LUMINANCE_BITS,Ye.EMPTY=Uint8ClampedArray.from([0]);class ce extends Ye{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=ce.MINIMUM_DIMENSION&&n>=ce.MINIMUM_DIMENSION){const r=e.getMatrix();let s=t>>ce.BLOCK_SIZE_POWER;t&ce.BLOCK_SIZE_MASK&&s++;let o=n>>ce.BLOCK_SIZE_POWER;n&ce.BLOCK_SIZE_MASK&&o++;const c=ce.calculateBlackPoints(r,s,o,t,n),u=new je(t,n);ce.calculateThresholdForBlock(r,s,o,t,n,c,u),this.matrix=u}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ce(e)}static calculateThresholdForBlock(e,t,n,r,s,o,c){const u=s-ce.BLOCK_SIZE,h=r-ce.BLOCK_SIZE;for(let x=0;x<n;x++){let A=x<<ce.BLOCK_SIZE_POWER;A>u&&(A=u);const m=ce.cap(x,2,n-3);for(let y=0;y<t;y++){let S=y<<ce.BLOCK_SIZE_POWER;S>h&&(S=h);const T=ce.cap(y,2,t-3);let N=0;for(let U=-2;U<=2;U++){const H=o[m+U];N+=H[T-2]+H[T-1]+H[T]+H[T+1]+H[T+2]}const M=N/25;ce.thresholdBlock(e,S,A,M,r,c)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,s,o){for(let c=0,u=n*s+t;c<ce.BLOCK_SIZE;c++,u+=s)for(let h=0;h<ce.BLOCK_SIZE;h++)(e[u+h]&255)<=r&&o.set(t+h,n+c)}static calculateBlackPoints(e,t,n,r,s){const o=s-ce.BLOCK_SIZE,c=r-ce.BLOCK_SIZE,u=new Array(n);for(let h=0;h<n;h++){u[h]=new Int32Array(t);let x=h<<ce.BLOCK_SIZE_POWER;x>o&&(x=o);for(let A=0;A<t;A++){let m=A<<ce.BLOCK_SIZE_POWER;m>c&&(m=c);let y=0,S=255,T=0;for(let M=0,U=x*r+m;M<ce.BLOCK_SIZE;M++,U+=r){for(let H=0;H<ce.BLOCK_SIZE;H++){const F=e[U+H]&255;y+=F,F<S&&(S=F),F>T&&(T=F)}if(T-S>ce.MIN_DYNAMIC_RANGE)for(M++,U+=r;M<ce.BLOCK_SIZE;M++,U+=r)for(let H=0;H<ce.BLOCK_SIZE;H++)y+=e[U+H]&255}let N=y>>ce.BLOCK_SIZE_POWER*2;if(T-S<=ce.MIN_DYNAMIC_RANGE&&(N=S/2,h>0&&A>0)){const M=(u[h-1][A]+2*u[h][A-1]+u[h-1][A-1])/4;S<M&&(N=M)}u[h][A]=N}}return u}}ce.BLOCK_SIZE_POWER=3,ce.BLOCK_SIZE=1<<ce.BLOCK_SIZE_POWER,ce.BLOCK_SIZE_MASK=ce.BLOCK_SIZE-1,ce.MINIMUM_DIMENSION=ce.BLOCK_SIZE*5,ce.MIN_DYNAMIC_RANGE=24;class Wn{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new Gt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Gt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Gt("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new be;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let s=0;s<this.width;s++){const o=r[s]&255;let c;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()}}class Xt extends Wn{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let s=0;s<r;s++)n[s]=255-(n[s]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new Xt(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Xt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Xt(this.delegate.rotateCounterClockwise45())}}class zt extends Wn{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=zt.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return zt.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let s=0,o=0,c=e.length;s<c;s+=4,o++){let u;if(e[s+3]===0)u=255;else{const x=e[s],A=e[s+1],m=e[s+2];u=306*x+601*A+117*m+512>>10}r[o]=u}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*zt.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(r))*s+Math.abs(Math.sin(r))*o),u=Math.ceil(Math.abs(Math.sin(r))*s+Math.abs(Math.cos(r))*o);return t.width=c,t.height=u,n.translate(c/2,u/2),n.rotate(r),n.drawImage(this.canvas,s/-2,o/-2),this.buffer=zt.makeBufferFromCanvasImageData(t),this}invert(){return new Xt(this)}}zt.DEGREE_TO_RADIANS=Math.PI/180;class Ps{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var it=(globalThis||Br||self||window||void 0)&&(globalThis||Br||self||window||void 0).__awaiter||function(p,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(x){try{h(n.next(x))}catch(A){o(A)}}function u(x){try{h(n.throw(x))}catch(A){o(A)}}function h(x){x.done?s(x.value):r(x.value).then(c,u)}h((n=n.apply(p,e||[])).next())})};class rn{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return it(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;const s=n.deviceId||n.id,o=n.label||`Video device ${t.length+1}`,c=n.groupId,u={deviceId:s,label:o,kind:r,groupId:c};t.push(u)}return t})}getVideoInputDevices(){return it(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new Ps(t.deviceId,t.label))})}findDeviceById(e){return it(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return it(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return it(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return it(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return it(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return it(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return it(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const s={video:r};return yield this.decodeFromConstraints(s,t,n)})}decodeFromConstraints(e,t,n){return it(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return it(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return it(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return it(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new I(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new I(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new I("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new I("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new I("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new I("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new I("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new I("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new I("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new I("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return it(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return it(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(s,o)=>{if(this._stopAsyncDecode){o(new B("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const c=this.decode(e);s(c)}catch(c){const u=t&&c instanceof B,x=(c instanceof Y||c instanceof k)&&n;if(u||x)return setTimeout(r,this._timeBetweenDecodingAttempts,s,o);o(c)}};return new Promise((s,o)=>r(s,o))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);const s=r instanceof Y||r instanceof k,o=r instanceof B;(s||o)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new zt(t),r=new ce(n);return new W(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class st{constructor(e,t,n=t==null?0:8*t.length,r,s,o=X.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=s,this.resultMetadata=null,o==null?this.timestamp=X.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);X.arraycopy(t,0,n,0,t.length),X.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var li;(function(p){p[p.AZTEC=0]="AZTEC",p[p.CODABAR=1]="CODABAR",p[p.CODE_39=2]="CODE_39",p[p.CODE_93=3]="CODE_93",p[p.CODE_128=4]="CODE_128",p[p.DATA_MATRIX=5]="DATA_MATRIX",p[p.EAN_8=6]="EAN_8",p[p.EAN_13=7]="EAN_13",p[p.ITF=8]="ITF",p[p.MAXICODE=9]="MAXICODE",p[p.PDF_417=10]="PDF_417",p[p.QR_CODE=11]="QR_CODE",p[p.RSS_14=12]="RSS_14",p[p.RSS_EXPANDED=13]="RSS_EXPANDED",p[p.UPC_A=14]="UPC_A",p[p.UPC_E=15]="UPC_E",p[p.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(li||(li={}));var ne=li,ci;(function(p){p[p.OTHER=0]="OTHER",p[p.ORIENTATION=1]="ORIENTATION",p[p.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",p[p.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",p[p.ISSUE_NUMBER=4]="ISSUE_NUMBER",p[p.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",p[p.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",p[p.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",p[p.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",p[p.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",p[p.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ci||(ci={}));var Ze=ci;class Gn{constructor(e,t,n,r,s=-1,o=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Xn{exp(e){return this.expTable[e]}log(e){if(e===0)throw new O;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class ut{constructor(e,t){if(t.length===0)throw new O;this.field=e;const n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),X.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let o=0,c=t.length;o!==c;o++){const u=t[o];n=Xn.addOrSubtract(n,u)}return n}n=t[0];const r=t.length,s=this.field;for(let o=1;o<r;o++)n=Xn.addOrSubtract(s.multiply(e,n),t[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const o=t;t=n,n=o}let r=new Int32Array(n.length);const s=n.length-t.length;X.arraycopy(n,0,r,0,s);for(let o=s;o<n.length;o++)r[o]=Xn.addOrSubtract(t[o-s],n[o]);return new ut(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,s=r.length,o=new Int32Array(n+s-1),c=this.field;for(let u=0;u<n;u++){const h=t[u];for(let x=0;x<s;x++)o[u+x]=Xn.addOrSubtract(o[u+x],c.multiply(h,r[x]))}return new ut(c,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),s=this.coefficients;for(let o=0;o<t;o++)r[o]=n.multiply(s[o],e);return new ut(n,r)}multiplyByMonomial(e,t){if(e<0)throw new O;if(t===0)return this.field.getZero();const n=this.coefficients,r=n.length,s=new Int32Array(r+e),o=this.field;for(let c=0;c<r;c++)s[c]=o.multiply(n[c],t);return new ut(o,s)}divide(e){if(!this.field.equals(e.field))throw new O("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new O("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const s=e.getCoefficient(e.getDegree()),o=t.inverse(s);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const c=r.getDegree()-e.getDegree(),u=t.multiply(r.getCoefficient(r.getDegree()),o),h=e.multiplyByMonomial(c,u),x=t.buildMonomial(c,u);n=n.addOrSubtract(x),r=r.addOrSubtract(h)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class wr extends E{}wr.kind="ArithmeticException";class pe extends Xn{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let s=1;for(let c=0;c<t;c++)r[c]=s,s*=2,s>=t&&(s^=e,s&=t-1);this.expTable=r;const o=new Int32Array(t);for(let c=0;c<t-1;c++)o[r[c]]=c;this.logTable=o,this.zero=new ut(this,Int32Array.from([0])),this.one=new ut(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new O;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new ut(this,n)}inverse(e){if(e===0)throw new wr;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+G.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}pe.AZTEC_DATA_12=new pe(4201,4096,1),pe.AZTEC_DATA_10=new pe(1033,1024,1),pe.AZTEC_DATA_6=new pe(67,64,1),pe.AZTEC_PARAM=new pe(19,16,1),pe.QR_CODE_FIELD_256=new pe(285,256,0),pe.DATA_MATRIX_FIELD_256=new pe(301,256,1),pe.AZTEC_DATA_8=pe.DATA_MATRIX_FIELD_256,pe.MAXICODE_FIELD_64=pe.AZTEC_DATA_6;class bn extends E{}bn.kind="ReedSolomonException";class Dt extends E{}Dt.kind="IllegalStateException";class zn{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new ut(n,e),s=new Int32Array(t);let o=!0;for(let y=0;y<t;y++){const S=r.evaluateAt(n.exp(y+n.getGeneratorBase()));s[s.length-1-y]=S,S!==0&&(o=!1)}if(o)return;const c=new ut(n,s),u=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),h=u[0],x=u[1],A=this.findErrorLocations(h),m=this.findErrorMagnitudes(x,A);for(let y=0;y<A.length;y++){const S=e.length-1-n.log(A[y]);if(S<0)throw new bn("Bad error location");e[S]=pe.addOrSubtract(e[S],m[y])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const y=e;e=t,t=y}const r=this.field;let s=e,o=t,c=r.getZero(),u=r.getOne();for(;o.getDegree()>=(n/2|0);){let y=s,S=c;if(s=o,c=u,s.isZero())throw new bn("r_{i-1} was zero");o=y;let T=r.getZero();const N=s.getCoefficient(s.getDegree()),M=r.inverse(N);for(;o.getDegree()>=s.getDegree()&&!o.isZero();){const U=o.getDegree()-s.getDegree(),H=r.multiply(o.getCoefficient(o.getDegree()),M);T=T.addOrSubtract(r.buildMonomial(U,H)),o=o.addOrSubtract(s.multiplyByMonomial(U,H))}if(u=T.multiply(c).addOrSubtract(S),o.getDegree()>=s.getDegree())throw new Dt("Division algorithm failed to reduce polynomial?")}const h=u.getCoefficient(0);if(h===0)throw new bn("sigmaTilde(0) was zero");const x=r.inverse(h),A=u.multiplyScalar(x),m=o.multiplyScalar(x);return[A,m]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const s=this.field;for(let o=1;o<s.getSize()&&r<t;o++)e.evaluateAt(o)===0&&(n[r]=s.inverse(o),r++);if(r!==t)throw new bn("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),s=this.field;for(let o=0;o<n;o++){const c=s.inverse(t[o]);let u=1;for(let h=0;h<n;h++)if(o!==h){const x=s.multiply(t[h],c),A=x&1?x&-2:x|1;u=s.multiply(u,A)}r[o]=s.multiply(e.evaluateAt(c),s.inverse(u)),s.getGeneratorBase()!==0&&(r[o]=s.multiply(r[o],c))}return r}}var Qe;(function(p){p[p.UPPER=0]="UPPER",p[p.LOWER=1]="LOWER",p[p.MIXED=2]="MIXED",p[p.DIGIT=3]="DIGIT",p[p.PUNCT=4]="PUNCT",p[p.BINARY=5]="BINARY"})(Qe||(Qe={}));class Te{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),s=Te.convertBoolArrayToByteArray(r),o=Te.getEncodedData(r),c=new Gn(s,o,null,null);return c.setNumBits(r.length),c}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=Qe.UPPER,r=Qe.UPPER,s="",o=0;for(;o<t;)if(r===Qe.BINARY){if(t-o<5)break;let c=Te.readCode(e,o,5);if(o+=5,c===0){if(t-o<11)break;c=Te.readCode(e,o,11)+31,o+=11}for(let u=0;u<c;u++){if(t-o<8){o=t;break}const h=Te.readCode(e,o,8);s+=se.castAsNonUtf8Char(h),o+=8}r=n}else{let c=r===Qe.DIGIT?4:5;if(t-o<c)break;let u=Te.readCode(e,o,c);o+=c;let h=Te.getCharacter(r,u);h.startsWith("CTRL_")?(n=r,r=Te.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=r)):(s+=h,r=n)}return s}static getTable(e){switch(e){case"L":return Qe.LOWER;case"P":return Qe.PUNCT;case"M":return Qe.MIXED;case"D":return Qe.DIGIT;case"B":return Qe.BINARY;case"U":default:return Qe.UPPER}}static getCharacter(e,t){switch(e){case Qe.UPPER:return Te.UPPER_TABLE[t];case Qe.LOWER:return Te.LOWER_TABLE[t];case Qe.MIXED:return Te.MIXED_TABLE[t];case Qe.PUNCT:return Te.PUNCT_TABLE[t];case Qe.DIGIT:return Te.DIGIT_TABLE[t];default:throw new Dt("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=pe.AZTEC_DATA_10):(n=12,t=pe.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),s=e.length/n;if(s<r)throw new k;let o=e.length%n,c=new Int32Array(s);for(let m=0;m<s;m++,o+=n)c[m]=Te.readCode(e,o,n);try{new zn(t).decode(c,s-r)}catch(m){throw new k(m)}let u=(1<<n)-1,h=0;for(let m=0;m<r;m++){let y=c[m];if(y===0||y===u)throw new k;(y===1||y===u-1)&&h++}let x=new Array(r*n-h),A=0;for(let m=0;m<r;m++){let y=c[m];if(y===1||y===u-1)x.fill(y>1,A,A+n-1),A+=n-1;else for(let S=n-1;S>=0;--S)x[A++]=(y&1<<S)!==0}return x}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+n*4,s=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(let c=0;c<s.length;c++)s[c]=c;else{let c=r+1+2*G.truncDivision(G.truncDivision(r,2)-1,15),u=r/2,h=G.truncDivision(c,2);for(let x=0;x<u;x++){let A=x+G.truncDivision(x,15);s[u-x-1]=h-A-1,s[u+x]=h+A+1}}for(let c=0,u=0;c<n;c++){let h=(n-c)*4+(t?9:12),x=c*2,A=r-1-x;for(let m=0;m<h;m++){let y=m*2;for(let S=0;S<2;S++)o[u+y+S]=e.get(s[x+S],s[x+m]),o[u+2*h+y+S]=e.get(s[x+m],s[A-S]),o[u+4*h+y+S]=e.get(s[A-S],s[A-m]),o[u+6*h+y+S]=e.get(s[A-m],s[x+S])}u+=h*8}return o}static readCode(e,t,n){let r=0;for(let s=t;s<t+n;s++)r<<=1,e[s]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?Te.readCode(e,t,8):Te.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=Te.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Te.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Te.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Te.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Te.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Te.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class xe{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const s=e-n,o=t-r;return Math.sqrt(s*s+o*o)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){const s=e[n];t+=s}return t}}class pr{static floatToIntBits(e){return e}}pr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Q){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*pr.floatToIntBits(this.x)+pr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let s,o,c;if(n>=t&&n>=r?(o=e[0],s=e[1],c=e[2]):r>=n&&r>=t?(o=e[1],s=e[0],c=e[2]):(o=e[2],s=e[0],c=e[1]),this.crossProductZ(s,o,c)<0){const u=s;s=c,c=u}e[0]=s,e[1]=o,e[2]=c}static distance(e,t){return xe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,s=t.y;return(n.x-r)*(e.y-s)-(n.y-s)*(e.x-r)}}class Ar{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ls extends Ar{constructor(e,t,n,r,s){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=s}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Vt{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=Vt.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),r==null&&(r=e.getHeight()/2|0);const s=t/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=r-s,this.downInit=r+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new B}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,s=!1,o=!0,c=!1,u=!1,h=!1,x=!1,A=!1;const m=this.width,y=this.height;for(;o;){o=!1;let S=!0;for(;(S||!u)&&t<m;)S=this.containsBlackPoint(n,r,t,!1),S?(t++,o=!0,u=!0):u||t++;if(t>=m){s=!0;break}let T=!0;for(;(T||!h)&&r<y;)T=this.containsBlackPoint(e,t,r,!0),T?(r++,o=!0,h=!0):h||r++;if(r>=y){s=!0;break}let N=!0;for(;(N||!x)&&e>=0;)N=this.containsBlackPoint(n,r,e,!1),N?(e--,o=!0,x=!0):x||e--;if(e<0){s=!0;break}let M=!0;for(;(M||!A)&&n>=0;)M=this.containsBlackPoint(e,t,n,!0),M?(n--,o=!0,A=!0):A||n--;if(n<0){s=!0;break}o&&(c=!0)}if(!s&&c){const S=t-e;let T=null;for(let H=1;T===null&&H<S;H++)T=this.getBlackPointOnSegment(e,r-H,e+H,r);if(T==null)throw new B;let N=null;for(let H=1;N===null&&H<S;H++)N=this.getBlackPointOnSegment(e,n+H,e+H,n);if(N==null)throw new B;let M=null;for(let H=1;M===null&&H<S;H++)M=this.getBlackPointOnSegment(t,n+H,t-H,n);if(M==null)throw new B;let U=null;for(let H=1;U===null&&H<S;H++)U=this.getBlackPointOnSegment(t,r-H,t-H,r);if(U==null)throw new B;return this.centerEdges(U,T,M,N)}else throw new B}getBlackPointOnSegment(e,t,n,r){const s=xe.round(xe.distance(e,t,n,r)),o=(n-e)/s,c=(r-t)/s,u=this.image;for(let h=0;h<s;h++){const x=xe.round(e+h*o),A=xe.round(t+h*c);if(u.get(x,A))return new Q(x,A)}return null}centerEdges(e,t,n,r){const s=e.getX(),o=e.getY(),c=t.getX(),u=t.getY(),h=n.getX(),x=n.getY(),A=r.getX(),m=r.getY(),y=Vt.CORR;return s<this.width/2?[new Q(A-y,m+y),new Q(c+y,u+y),new Q(h-y,x-y),new Q(s+y,o-y)]:[new Q(A+y,m+y),new Q(c+y,u-y),new Q(h-y,x+y),new Q(s-y,o-y)]}containsBlackPoint(e,t,n,r){const s=this.image;if(r){for(let o=e;o<=t;o++)if(s.get(o,n))return!0}else for(let o=e;o<=t;o++)if(s.get(n,o))return!0;return!1}}Vt.INIT_SIZE=10,Vt.CORR=1;class ui{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let s=!0;for(let o=0;o<t.length&&s;o+=2){const c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>n||u<-1||u>r)throw new B;s=!1,c===-1?(t[o]=0,s=!0):c===n&&(t[o]=n-1,s=!0),u===-1?(t[o+1]=0,s=!0):u===r&&(t[o+1]=r-1,s=!0)}s=!0;for(let o=t.length-2;o>=0&&s;o-=2){const c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>n||u<-1||u>r)throw new B;s=!1,c===-1?(t[o]=0,s=!0):c===n&&(t[o]=n-1,s=!0),u===-1?(t[o+1]=0,s=!0):u===r&&(t[o+1]=r-1,s=!0)}}}class It{constructor(e,t,n,r,s,o,c,u,h){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=s,this.a32=o,this.a13=c,this.a23=u,this.a33=h}static quadrilateralToQuadrilateral(e,t,n,r,s,o,c,u,h,x,A,m,y,S,T,N){const M=It.quadrilateralToSquare(e,t,n,r,s,o,c,u);return It.squareToQuadrilateral(h,x,A,m,y,S,T,N).times(M)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,s=this.a13,o=this.a21,c=this.a22,u=this.a23,h=this.a31,x=this.a32,A=this.a33;for(let m=0;m<t;m+=2){const y=e[m],S=e[m+1],T=s*y+u*S+A;e[m]=(n*y+o*S+h)/T,e[m+1]=(r*y+c*S+x)/T}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,s=this.a13,o=this.a21,c=this.a22,u=this.a23,h=this.a31,x=this.a32,A=this.a33,m=e.length;for(let y=0;y<m;y++){const S=e[y],T=t[y],N=s*S+u*T+A;e[y]=(n*S+o*T+h)/N,t[y]=(r*S+c*T+x)/N}}static squareToQuadrilateral(e,t,n,r,s,o,c,u){const h=e-n+s-c,x=t-r+o-u;if(h===0&&x===0)return new It(n-e,s-n,e,r-t,o-r,t,0,0,1);{const A=n-s,m=c-s,y=r-o,S=u-o,T=A*S-m*y,N=(h*S-m*x)/T,M=(A*x-h*y)/T;return new It(n-e+N*n,c-e+M*c,e,r-t+N*r,u-t+M*u,t,N,M,1)}}static quadrilateralToSquare(e,t,n,r,s,o,c,u){return It.squareToQuadrilateral(e,t,n,r,s,o,c,u).buildAdjoint()}buildAdjoint(){return new It(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new It(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Fs extends ui{sampleGrid(e,t,n,r,s,o,c,u,h,x,A,m,y,S,T,N,M,U,H){const F=It.quadrilateralToQuadrilateral(r,s,o,c,u,h,x,A,m,y,S,T,N,M,U,H);return this.sampleGridWithTransform(e,t,n,F)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new B;const s=new je(t,n),o=new Float32Array(2*t);for(let c=0;c<n;c++){const u=o.length,h=c+.5;for(let x=0;x<u;x+=2)o[x]=x/2+.5,o[x+1]=h;r.transformPoints(o),ui.checkAndNudgePoints(e,o);try{for(let x=0;x<u;x+=2)e.get(Math.floor(o[x]),Math.floor(o[x+1]))&&s.set(x/2,c)}catch{throw new B}}return s}}class jt{static setGridSampler(e){jt.gridSampler=e}static getInstance(){return jt.gridSampler}}jt.gridSampler=new Fs;class ot{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new Q(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ks{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let o=n[0];n[0]=n[2],n[2]=o}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new Ls(r,s,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new B;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let o=0;o<4;o++){let c=n[(this.shift+o)%4];this.compact?(r<<=7,r+=c>>1&127):(r<<=10,r+=(c>>2&992)+(c>>1&31))}let s=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,s,o)=>{let c=(r>>t-2<<1)+(r&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(G.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new B}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let s=n-r,o=new Int32Array(n);for(let u=n-1;u>=0;--u)o[u]=e&15,e>>=4;try{new zn(pe.AZTEC_PARAM).decode(o,s)}catch{throw new B}let c=0;for(let u=0;u<r;u++)c=(c<<4)+o[u];return c}getBullsEyeCorners(e){let t=e,n=e,r=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let A=this.getFirstDifferent(t,o,1,-1),m=this.getFirstDifferent(n,o,1,1),y=this.getFirstDifferent(r,o,-1,1),S=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){let T=this.distancePoint(S,A)*this.nbCenterLayers/(this.distancePoint(s,t)*(this.nbCenterLayers+2));if(T<.75||T>1.25||!this.isWhiteOrBlackRectangle(A,m,y,S))break}t=A,n=m,r=y,s=S,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new B;this.compact=this.nbCenterLayers===5;let c=new Q(t.getX()+.5,t.getY()-.5),u=new Q(n.getX()+.5,n.getY()+.5),h=new Q(r.getX()-.5,r.getY()+.5),x=new Q(s.getX()-.5,s.getY()-.5);return this.expandSquare([c,u,h,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let c=new Vt(this.image).detect();e=c[0],t=c[1],n=c[2],r=c[3]}catch{let u=this.image.getWidth()/2,h=this.image.getHeight()/2;e=this.getFirstDifferent(new ot(u+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ot(u+7,h+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ot(u-7,h+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ot(u-7,h-7),!1,-1,-1).toResultPoint()}let s=xe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=xe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let c=new Vt(this.image,15,s,o).detect();e=c[0],t=c[1],n=c[2],r=c[3]}catch{e=this.getFirstDifferent(new ot(s+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ot(s+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ot(s-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ot(s-7,o-7),!1,-1,-1).toResultPoint()}return s=xe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=xe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new ot(s,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,s){let o=jt.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,h=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,u,u,h,u,h,h,u,h,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),s.getX(),s.getY())}sampleLine(e,t,n){let r=0,s=this.distanceResultPoint(e,t),o=s/n,c=e.getX(),u=e.getY(),h=o*(t.getX()-e.getX())/s,x=o*(t.getY()-e.getY())/s;for(let A=0;A<n;A++)this.image.get(xe.round(c+A*h),xe.round(u+A*x))&&(r|=1<<n-A-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let s=3;e=new ot(e.getX()-s,e.getY()+s),t=new ot(t.getX()-s,t.getY()-s),n=new ot(n.getX()+s,n.getY()-s),r=new ot(r.getX()+s,r.getY()+s);let o=this.getColor(r,e);if(o===0)return!1;let c=this.getColor(e,t);return c!==o||(c=this.getColor(t,n),c!==o)?!1:(c=this.getColor(n,r),c===o)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,s=(t.getY()-e.getY())/n,o=0,c=e.getX(),u=e.getY(),h=this.image.get(e.getX(),e.getY()),x=Math.ceil(n);for(let m=0;m<x;m++)c+=r,u+=s,this.image.get(xe.round(c),xe.round(u))!==h&&o++;let A=o/n;return A>.1&&A<.9?0:A<=.1===h?1:-1}getFirstDifferent(e,t,n,r){let s=e.getX()+n,o=e.getY()+r;for(;this.isValid(s,o)&&this.image.get(s,o)===t;)s+=n,o+=r;for(s-=n,o-=r;this.isValid(s,o)&&this.image.get(s,o)===t;)s+=n;for(s-=n;this.isValid(s,o)&&this.image.get(s,o)===t;)o+=r;return o-=r,new ot(s,o)}expandSquare(e,t,n){let r=n/(2*t),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,h=new Q(c+r*s,u+r*o),x=new Q(c-r*s,u-r*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;let A=new Q(c+r*s,u+r*o),m=new Q(c-r*s,u-r*o);return[h,A,x,m]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=xe.round(e.getX()),n=xe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return xe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return xe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(G.truncDivision(this.nbLayers-4,8)+1)+15}}class Er{decode(e,t=null){let n=null,r=new ks(e.getBlackMatrix()),s=null,o=null;try{let x=r.detectMirror(!1);s=x.getPoints(),this.reportFoundResultPoints(t,s),o=new Te().decode(x)}catch(x){n=x}if(o==null)try{let x=r.detectMirror(!0);s=x.getPoints(),this.reportFoundResultPoints(t,s),o=new Te().decode(x)}catch(x){throw n??x}let c=new st(o.getText(),o.getRawBytes(),o.getNumBits(),s,ne.AZTEC,X.currentTimeMillis()),u=o.getByteSegments();u!=null&&c.putMetadata(Ze.BYTE_SEGMENTS,u);let h=o.getECLevel();return h!=null&&c.putMetadata(Ze.ERROR_CORRECTION_LEVEL,h),c}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(oe.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,s,o)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class T1 extends rn{constructor(e=500){super(new Er,e)}}class Ve{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(oe.TRY_HARDER)===!0&&e.isRotateSupported()){const s=e.rotateCounterClockwise(),o=this.doDecode(s,t),c=o.getResultMetadata();let u=270;c!==null&&c.get(Ze.ORIENTATION)===!0&&(u=u+c.get(Ze.ORIENTATION)%360),o.putMetadata(Ze.ORIENTATION,u);const h=o.getResultPoints();if(h!==null){const x=s.getHeight();for(let A=0;A<h.length;A++)h[A]=new Q(x-h[A].getY()-1,h[A].getX())}return o}else throw new B}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let s=new ee(n);const o=t&&t.get(oe.TRY_HARDER)===!0,c=Math.max(1,r>>(o?8:5));let u;o?u=r:u=15;const h=Math.trunc(r/2);for(let x=0;x<u;x++){const A=Math.trunc((x+1)/2),m=(x&1)===0,y=h+c*(m?A:-A);if(y<0||y>=r)break;try{s=e.getBlackRow(y,s)}catch{continue}for(let S=0;S<2;S++){if(S===1&&(s.reverse(),t&&t.get(oe.NEED_RESULT_POINT_CALLBACK)===!0)){const T=new Map;t.forEach((N,M)=>T.set(M,N)),T.delete(oe.NEED_RESULT_POINT_CALLBACK),t=T}try{const T=this.decodeRow(y,s,t);if(S===1){T.putMetadata(Ze.ORIENTATION,180);const N=T.getResultPoints();N!==null&&(N[0]=new Q(n-N[0].getX()-1,N[0].getY()),N[1]=new Q(n-N[1].getX()-1,N[1].getY()))}return T}catch{}}}throw new B}static recordPattern(e,t,n){const r=n.length;for(let h=0;h<r;h++)n[h]=0;const s=e.getSize();if(t>=s)throw new B;let o=!e.get(t),c=0,u=t;for(;u<s;){if(e.get(u)!==o)n[c]++;else{if(++c===r)break;n[c]=1,o=!o}u++}if(!(c===r||c===r-1&&u===s))throw new B}static recordPatternInReverse(e,t,n){let r=n.length,s=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==s&&(r--,s=!s);if(r>=0)throw new B;Ve.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let s=0,o=0;for(let h=0;h<r;h++)s+=e[h],o+=t[h];if(s<o)return Number.POSITIVE_INFINITY;const c=s/o;n*=c;let u=0;for(let h=0;h<r;h++){const x=e[h],A=t[h]*c,m=x>A?x-A:A-x;if(m>n)return Number.POSITIVE_INFINITY;u+=m}return u/s}}class z extends Ve{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,s=Int32Array.from([0,0,0,0,0,0]),o=n,c=!1;const u=6;for(let h=n;h<t;h++)if(e.get(h)!==c)s[r]++;else{if(r===u-1){let x=z.MAX_AVG_VARIANCE,A=-1;for(let m=z.CODE_START_A;m<=z.CODE_START_C;m++){const y=Ve.patternMatchVariance(s,z.CODE_PATTERNS[m],z.MAX_INDIVIDUAL_VARIANCE);y<x&&(x=y,A=m)}if(A>=0&&e.isRange(Math.max(0,o-(h-o)/2),o,!1))return Int32Array.from([o,h,A]);o+=s[0]+s[1],s=s.slice(2,s.length-1),s[r-1]=0,s[r]=0,r--}else r++;s[r]=1,c=!c}throw new B}static decodeCode(e,t,n){Ve.recordPattern(e,n,t);let r=z.MAX_AVG_VARIANCE,s=-1;for(let o=0;o<z.CODE_PATTERNS.length;o++){const c=z.CODE_PATTERNS[o],u=this.patternMatchVariance(t,c,z.MAX_INDIVIDUAL_VARIANCE);u<r&&(r=u,s=o)}if(s>=0)return s;throw new B}decodeRow(e,t,n){const r=n&&n.get(oe.ASSUME_GS1)===!0,s=z.findStartPattern(t),o=s[2];let c=0;const u=new Uint8Array(20);u[c++]=o;let h;switch(o){case z.CODE_START_A:h=z.CODE_CODE_A;break;case z.CODE_START_B:h=z.CODE_CODE_B;break;case z.CODE_START_C:h=z.CODE_CODE_C;break;default:throw new k}let x=!1,A=!1,m="",y=s[0],S=s[1];const T=Int32Array.from([0,0,0,0,0,0]);let N=0,M=0,U=o,H=0,F=!0,de=!1,ae=!1;for(;!x;){const Dn=A;switch(A=!1,N=M,M=z.decodeCode(t,T,S),u[c++]=M,M!==z.CODE_STOP&&(F=!0),M!==z.CODE_STOP&&(H++,U+=H*M),y=S,S+=T.reduce((nl,rl)=>nl+rl,0),M){case z.CODE_START_A:case z.CODE_START_B:case z.CODE_START_C:throw new k}switch(h){case z.CODE_CODE_A:if(M<64)ae===de?m+=String.fromCharCode(32+M):m+=String.fromCharCode(32+M+128),ae=!1;else if(M<96)ae===de?m+=String.fromCharCode(M-64):m+=String.fromCharCode(M+64),ae=!1;else switch(M!==z.CODE_STOP&&(F=!1),M){case z.CODE_FNC_1:r&&(m.length===0?m+="]C1":m+="");break;case z.CODE_FNC_2:case z.CODE_FNC_3:break;case z.CODE_FNC_4_A:!de&&ae?(de=!0,ae=!1):de&&ae?(de=!1,ae=!1):ae=!0;break;case z.CODE_SHIFT:A=!0,h=z.CODE_CODE_B;break;case z.CODE_CODE_B:h=z.CODE_CODE_B;break;case z.CODE_CODE_C:h=z.CODE_CODE_C;break;case z.CODE_STOP:x=!0;break}break;case z.CODE_CODE_B:if(M<96)ae===de?m+=String.fromCharCode(32+M):m+=String.fromCharCode(32+M+128),ae=!1;else switch(M!==z.CODE_STOP&&(F=!1),M){case z.CODE_FNC_1:r&&(m.length===0?m+="]C1":m+="");break;case z.CODE_FNC_2:case z.CODE_FNC_3:break;case z.CODE_FNC_4_B:!de&&ae?(de=!0,ae=!1):de&&ae?(de=!1,ae=!1):ae=!0;break;case z.CODE_SHIFT:A=!0,h=z.CODE_CODE_A;break;case z.CODE_CODE_A:h=z.CODE_CODE_A;break;case z.CODE_CODE_C:h=z.CODE_CODE_C;break;case z.CODE_STOP:x=!0;break}break;case z.CODE_CODE_C:if(M<100)M<10&&(m+="0"),m+=M;else switch(M!==z.CODE_STOP&&(F=!1),M){case z.CODE_FNC_1:r&&(m.length===0?m+="]C1":m+="");break;case z.CODE_CODE_A:h=z.CODE_CODE_A;break;case z.CODE_CODE_B:h=z.CODE_CODE_B;break;case z.CODE_STOP:x=!0;break}break}Dn&&(h=h===z.CODE_CODE_A?z.CODE_CODE_B:z.CODE_CODE_A)}const gt=S-y;if(S=t.getNextUnset(S),!t.isRange(S,Math.min(t.getSize(),S+(S-y)/2),!1))throw new B;if(U-=H*N,U%103!==N)throw new Y;const Tt=m.length;if(Tt===0)throw new B;Tt>0&&F&&(h===z.CODE_CODE_C?m=m.substring(0,Tt-2):m=m.substring(0,Tt-1));const xt=(s[1]+s[0])/2,Se=y+gt/2,et=u.length,pt=new Uint8Array(et);for(let Dn=0;Dn<et;Dn++)pt[Dn]=u[Dn];const Rn=[new Q(xt,e),new Q(Se,e)];return new st(m,pt,0,Rn,ne.CODE_128,new Date().getTime())}}z.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],z.MAX_AVG_VARIANCE=.25,z.MAX_INDIVIDUAL_VARIANCE=.7,z.CODE_SHIFT=98,z.CODE_CODE_C=99,z.CODE_CODE_B=100,z.CODE_CODE_A=101,z.CODE_FNC_1=102,z.CODE_FNC_2=97,z.CODE_FNC_3=96,z.CODE_FNC_4_A=101,z.CODE_FNC_4_B=100,z.CODE_START_A=103,z.CODE_START_B=104,z.CODE_START_C=105,z.CODE_STOP=106;class Ge extends Ve{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let s=Ge.findAsteriskPattern(t,r),o=t.getNextSet(s[1]),c=t.getSize(),u,h;do{Ge.recordPattern(t,o,r);let T=Ge.toNarrowWidePattern(r);if(T<0)throw new B;u=Ge.patternToChar(T),this.decodeRowResult+=u,h=o;for(let N of r)o+=N;o=t.getNextSet(o)}while(u!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let T of r)x+=T;let A=o-h-x;if(o!==c&&A*2<x)throw new B;if(this.usingCheckDigit){let T=this.decodeRowResult.length-1,N=0;for(let M=0;M<T;M++)N+=Ge.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M));if(this.decodeRowResult.charAt(T)!==Ge.ALPHABET_STRING.charAt(N%43))throw new Y;this.decodeRowResult=this.decodeRowResult.substring(0,T)}if(this.decodeRowResult.length===0)throw new B;let m;this.extendedMode?m=Ge.decodeExtended(this.decodeRowResult):m=this.decodeRowResult;let y=(s[1]+s[0])/2,S=h+x/2;return new st(m,null,0,[new Q(y,e),new Q(S,e)],ne.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),s=0,o=r,c=!1,u=t.length;for(let h=r;h<n;h++)if(e.get(h)!==c)t[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(t)===Ge.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((h-o)/2)),o,!1))return[o,h];o+=t[0]+t[1],t.copyWithin(0,2,2+s-1),t[s-1]=0,t[s]=0,s--}else s++;t[s]=1,c=!c}throw new B}static toNarrowWidePattern(e){let t=e.length,n=0,r;do{let s=2147483647;for(let u of e)u<s&&u>n&&(s=u);n=s,r=0;let o=0,c=0;for(let u=0;u<t;u++){let h=e[u];h>n&&(c|=1<<t-1-u,r++,o+=h)}if(r===3){for(let u=0;u<t&&r>0;u++){let h=e[u];if(h>n&&(r--,h*2>=o))return-1}return c}}while(r>3);return-1}static patternToChar(e){for(let t=0;t<Ge.CHARACTER_ENCODINGS.length;t++)if(Ge.CHARACTER_ENCODINGS[t]===e)return Ge.ALPHABET_STRING.charAt(t);if(e===Ge.ASTERISK_ENCODING)return"*";throw new B}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let s=e.charAt(r);if(s==="+"||s==="$"||s==="%"||s==="/"){let o=e.charAt(r+1),c="\0";switch(s){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new k;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new k;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new k;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new k;break}n+=c,r++}else n+=s}return n}}Ge.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ge.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ge.ASTERISK_ENCODING=148;class _e extends Ve{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),s=this.decodeEnd(t),o=new be;_e.decodeMiddle(t,r[1],s[0],o);let c=o.toString(),u=null;n!=null&&(u=n.get(oe.ALLOWED_LENGTHS)),u==null&&(u=_e.DEFAULT_ALLOWED_LENGTHS);let h=c.length,x=!1,A=0;for(let S of u){if(h===S){x=!0;break}S>A&&(A=S)}if(!x&&h>A&&(x=!0),!x)throw new k;const m=[new Q(r[1],e),new Q(s[0],e)];return new st(c,null,0,m,ne.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let s=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),o.fill(0),c.fill(0);t<n;){Ve.recordPattern(e,t,s);for(let h=0;h<5;h++){let x=2*h;o[h]=s[x],c[h]=s[x+1]}let u=_e.decodeDigit(o);r.append(u.toString()),u=this.decodeDigit(c),r.append(u.toString()),s.forEach(function(h){t+=h})}}decodeStart(e){let t=_e.skipWhiteSpace(e),n=_e.findGuardPattern(e,t,_e.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new B}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new B;return n}decodeEnd(e){e.reverse();try{let t=_e.skipWhiteSpace(e),n;try{n=_e.findGuardPattern(e,t,_e.END_PATTERN_REVERSED[0])}catch(s){s instanceof B&&(n=_e.findGuardPattern(e,t,_e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,s=new Int32Array(r),o=e.getSize(),c=!1,u=0,h=t;s.fill(0);for(let x=t;x<o;x++)if(e.get(x)!==c)s[u]++;else{if(u===r-1){if(Ve.patternMatchVariance(s,n,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE)return[h,x];h+=s[0]+s[1],X.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,c=!c}throw new B}static decodeDigit(e){let t=_e.MAX_AVG_VARIANCE,n=-1,r=_e.PATTERNS.length;for(let s=0;s<r;s++){let o=_e.PATTERNS[s],c=Ve.patternMatchVariance(e,o,_e.MAX_INDIVIDUAL_VARIANCE);c<t?(t=c,n=s):c===t&&(n=-1)}if(n>=0)return n%10;throw new B}}_e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],_e.MAX_AVG_VARIANCE=.38,_e.MAX_INDIVIDUAL_VARIANCE=.5,_e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],_e.START_PATTERN=Int32Array.from([1,1,1,1]),_e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pe extends Ve{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,s=Int32Array.from([0,0,0]);for(;!t;){s=Int32Array.from([0,0,0]),n=Pe.findGuardPattern(e,r,!1,this.START_END_PATTERN,s);let o=n[0];r=n[1];let c=o-(r-o);c>=0&&(t=e.isRange(c,o,!1))}return n}static checkChecksum(e){return Pe.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Pe.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let s=e.charAt(r).charCodeAt(0)-48;if(s<0||s>9)throw new k;n+=s}n*=3;for(let r=t-2;r>=0;r-=2){let s=e.charAt(r).charCodeAt(0)-48;if(s<0||s>9)throw new k;n+=s}return(1e3-n)%10}static decodeEnd(e,t){return Pe.findGuardPattern(e,t,!1,Pe.START_END_PATTERN,new Int32Array(Pe.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,s){let o=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let c=0,u=t,h=r.length,x=n;for(let A=t;A<o;A++)if(e.get(A)!==x)s[c]++;else{if(c===h-1){if(Ve.patternMatchVariance(s,r,Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE)return Int32Array.from([u,A]);u+=s[0]+s[1];let m=s.slice(2,s.length-1);for(let y=0;y<c-1;y++)s[y]=m[y];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,x=!x}throw new B}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let s=this.MAX_AVG_VARIANCE,o=-1,c=r.length;for(let u=0;u<c;u++){let h=r[u],x=Ve.patternMatchVariance(t,h,Pe.MAX_INDIVIDUAL_VARIANCE);x<s&&(s=x,o=u)}if(o>=0)return o;throw new B}}Pe.MAX_AVG_VARIANCE=.48,Pe.MAX_INDIVIDUAL_VARIANCE=.7,Pe.START_END_PATTERN=Int32Array.from([1,1,1]),Pe.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pe.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pe.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class jn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,s=this.decodeMiddle(t,n,r),o=r.toString(),c=jn.parseExtensionString(o),u=[new Q((n[0]+n[1])/2,e),new Q(s,e)],h=new st(o,null,0,u,ne.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&h.putAllMetadata(c),h}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=e.getSize(),o=t[1],c=0;for(let h=0;h<5&&o<s;h++){let x=Pe.decodeDigit(e,r,o,Pe.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let A of r)o+=A;x>=10&&(c|=1<<4-h),h!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==5)throw new B;let u=this.determineCheckDigit(c);if(jn.extensionChecksum(n.toString())!==u)throw new B;return o}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new B}static parseExtensionString(e){if(e.length!==5)return null;let t=jn.parseExtension5String(e);return t==null?null:new Map([[Ze.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),s=n%100,o=s<10?"0"+s:s.toString();return t+r+"."+o}}class fi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,s=this.decodeMiddle(t,n,r),o=r.toString(),c=fi.parseExtensionString(o),u=[new Q((n[0]+n[1])/2,e),new Q(s,e)],h=new st(o,null,0,u,ne.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&h.putAllMetadata(c),h}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=e.getSize(),o=t[1],c=0;for(let u=0;u<2&&o<s;u++){let h=Pe.decodeDigit(e,r,o,Pe.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);for(let x of r)o+=x;h>=10&&(c|=1<<1-u),u!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==2)throw new B;if(parseInt(n.toString())%4!==c)throw new B;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[Ze.ISSUE_NUMBER,parseInt(e)]])}}class Us{static decodeRow(e,t,n){let r=Pe.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new jn().decodeRow(e,t,r)}catch{return new fi().decodeRow(e,t,r)}}}Us.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ae extends Pe{constructor(){super(),this.decodeRowStringBuffer="",Ae.L_AND_G_PATTERNS=Ae.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ae.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];Ae.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ae.findStartGuardPattern(t),s=n==null?null:n.get(oe.NEED_RESULT_POINT_CALLBACK);if(s!=null){const F=new Q((r[0]+r[1])/2,e);s.foundPossibleResultPoint(F)}let o=this.decodeMiddle(t,r,this.decodeRowStringBuffer),c=o.rowOffset,u=o.resultString;if(s!=null){const F=new Q(c,e);s.foundPossibleResultPoint(F)}let h=this.decodeEnd(t,c);if(s!=null){const F=new Q((h[0]+h[1])/2,e);s.foundPossibleResultPoint(F)}let x=h[1],A=x+(x-h[0]);if(A>=t.getSize()||!t.isRange(x,A,!1))throw new B;let m=u.toString();if(m.length<8)throw new k;if(!Ae.checkChecksum(m))throw new Y;let y=(r[1]+r[0])/2,S=(h[1]+h[0])/2,T=this.getBarcodeFormat(),N=[new Q(y,e),new Q(S,e)],M=new st(m,null,0,N,T,new Date().getTime()),U=0;try{let F=Us.decodeRow(e,t,h[1]);M.putMetadata(Ze.UPC_EAN_EXTENSION,F.getText()),M.putAllMetadata(F.getResultMetadata()),M.addResultPoints(F.getResultPoints()),U=F.getText().length}catch{}let H=n==null?null:n.get(oe.ALLOWED_EAN_EXTENSIONS);if(H!=null){let F=!1;for(let de in H)if(U.toString()===de){F=!0;break}if(!F)throw new B}return M}decodeEnd(e,t){return Ae.findGuardPattern(e,t,!1,Ae.START_END_PATTERN,new Int32Array(Ae.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ae.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Ae.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let s=e.charAt(r).charCodeAt(0)-48;if(s<0||s>9)throw new k;n+=s}n*=3;for(let r=t-2;r>=0;r-=2){let s=e.charAt(r).charCodeAt(0)-48;if(s<0||s>9)throw new k;n+=s}return(1e3-n)%10}}class sn extends Ae{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=e.getSize(),o=t[1],c=0;for(let h=0;h<6&&o<s;h++){let x=Ae.decodeDigit(e,r,o,Ae.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let A of r)o+=A;x>=10&&(c|=1<<5-h)}n=sn.determineFirstDigit(n,c),o=Ae.findGuardPattern(e,o,!0,Ae.MIDDLE_PATTERN,new Int32Array(Ae.MIDDLE_PATTERN.length).fill(0))[1];for(let h=0;h<6&&o<s;h++){let x=Ae.decodeDigit(e,r,o,Ae.L_PATTERNS);n+=String.fromCharCode(48+x);for(let A of r)o+=A}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return ne.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new B}}sn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Vs extends Ae{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=e.getSize(),o=t[1];for(let u=0;u<4&&o<s;u++){let h=Ae.decodeDigit(e,r,o,Ae.L_PATTERNS);n+=String.fromCharCode(48+h);for(let x of r)o+=x}o=Ae.findGuardPattern(e,o,!0,Ae.MIDDLE_PATTERN,new Int32Array(Ae.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<4&&o<s;u++){let h=Ae.decodeDigit(e,r,o,Ae.L_PATTERNS);n+=String.fromCharCode(48+h);for(let x of r)o+=x}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return ne.EAN_8}}class Hs extends Ae{constructor(){super(...arguments),this.ean13Reader=new sn}getBarcodeFormat(){return ne.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new st(t.substring(1),null,null,e.getResultPoints(),ne.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new B}reset(){this.ean13Reader.reset()}}class St extends Ae{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(h=>h);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const s=e.getSize();let o=t[1],c=0;for(let h=0;h<6&&o<s;h++){const x=St.decodeDigit(e,r,o,St.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let A of r)o+=A;x>=10&&(c|=1<<5-h)}let u=St.determineNumSysAndCheckDigit(n,c);return{rowOffset:o,resultString:u}}decodeEnd(e,t){return St.findGuardPatternWithoutCounters(e,t,!0,St.MIDDLE_END_PATTERN)}checkChecksum(e){return Ae.checkChecksum(St.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let s=String.fromCharCode(48+n),o=String.fromCharCode(48+r);return s+e+o}throw B.getNotFoundInstance()}getBarcodeFormat(){return ne.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(s=>s.charCodeAt(0)),n=new be;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}St.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),St.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class hi extends Ve{constructor(e){super();let t=e==null?null:e.get(oe.POSSIBLE_FORMATS),n=[];f(t)?(n.push(new sn),n.push(new Hs),n.push(new Vs),n.push(new St)):(t.indexOf(ne.EAN_13)>-1&&n.push(new sn),t.indexOf(ne.UPC_A)>-1&&n.push(new Hs),t.indexOf(ne.EAN_8)>-1&&n.push(new Vs),t.indexOf(ne.UPC_E)>-1&&n.push(new St)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const s=r.decodeRow(e,t,n),o=s.getBarcodeFormat()===ne.EAN_13&&s.getText().charAt(0)==="0",c=n==null?null:n.get(oe.POSSIBLE_FORMATS),u=c==null||c.includes(ne.UPC_A);if(o&&u){const h=s.getRawBytes(),x=new st(s.getText().substring(1),h,h?h.length:null,s.getResultPoints(),ne.UPC_A);return x.putAllMetadata(s.getResultMetadata()),x}return s}catch{}throw new B}reset(){for(let e of this.readers)e.reset()}}class tt extends Ve{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(Ve.patternMatchVariance(e,t[n],tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return n;throw new B}static count(e){return xe.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let s=1;s<e.length;s++)t[s]>r&&(r=t[s],n=s);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let s=1;s<e.length;s++)t[s]<r&&(r=t[s],n=s);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=tt.MIN_FINDER_PATTERN_RATIO&&r<=tt.MAX_FINDER_PATTERN_RATIO){let s=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let c of e)c>o&&(o=c),c<s&&(s=c);return o<10*s}return!1}}tt.MAX_AVG_VARIANCE=.2,tt.MAX_INDIVIDUAL_VARIANCE=.45,tt.MIN_FINDER_PATTERN_RATIO=9.5/12,tt.MAX_FINDER_PATTERN_RATIO=12.5/14;class yn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof yn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class mr{constructor(e,t,n,r,s){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Q(n,s)),this.resultPoints.push(new Q(r,s))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof mr))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Mt{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let u of e)r+=u;let s=0,o=0,c=e.length;for(let u=0;u<c-1;u++){let h;for(h=1,o|=1<<u;h<e[u];h++,o&=~(1<<u)){let x=Mt.combins(r-h-1,c-u-2);if(n&&o===0&&r-h-(c-u-1)>=c-u-1&&(x-=Mt.combins(r-h-(c-u),c-u-2)),c-u-1>1){let A=0;for(let m=r-h-(c-u-2);m>t;m--)A+=Mt.combins(r-h-m-1,c-u-3);x-=A*(c-1-u)}else r-h>t&&x--;s+=x}r-=h}return s}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let s=1,o=1;for(let c=e;c>n;c--)s*=c,o<=r&&(s/=o,o++);for(;o<=r;)s/=o,o++;return s}}class O1{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new ee(n),s=0,c=e[0].getRightChar().getValue();for(let u=11;u>=0;--u)c&1<<u&&r.set(s),s++;for(let u=1;u<e.length;++u){let h=e[u],x=h.getLeftChar().getValue();for(let A=11;A>=0;--A)x&1<<A&&r.set(s),s++;if(h.getRightChar()!=null){let A=h.getRightChar().getValue();for(let m=11;m>=0;--m)A&1<<m&&r.set(s),s++}}return r}}class on{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class di{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class ft extends di{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===ft.FNC1}}ft.FNC1="$";class an extends di{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class mt extends di{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new k;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===mt.FNC1}isSecondDigitFNC1(){return this.secondDigit===mt.FNC1}isAnyFNC1(){return this.firstDigit===mt.FNC1||this.secondDigit===mt.FNC1}}mt.FNC1=10;class K{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new B;let t=e.substring(0,2);for(let s of K.TWO_DIGIT_DATA_LENGTH)if(s[0]===t)return s[1]===K.VARIABLE_LENGTH?K.processVariableAI(2,s[2],e):K.processFixedAI(2,s[1],e);if(e.length<3)throw new B;let n=e.substring(0,3);for(let s of K.THREE_DIGIT_DATA_LENGTH)if(s[0]===n)return s[1]===K.VARIABLE_LENGTH?K.processVariableAI(3,s[2],e):K.processFixedAI(3,s[1],e);for(let s of K.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(s[0]===n)return s[1]===K.VARIABLE_LENGTH?K.processVariableAI(4,s[2],e):K.processFixedAI(4,s[1],e);if(e.length<4)throw new B;let r=e.substring(0,4);for(let s of K.FOUR_DIGIT_DATA_LENGTH)if(s[0]===r)return s[1]===K.VARIABLE_LENGTH?K.processVariableAI(4,s[2],e):K.processFixedAI(4,s[1],e);throw new B}static processFixedAI(e,t,n){if(n.length<e)throw new B;let r=n.substring(0,e);if(n.length<e+t)throw new B;let s=n.substring(e,e+t),o=n.substring(e+t),c="("+r+")"+s,u=K.parseFieldsInGeneralPurpose(o);return u==null?c:c+u}static processVariableAI(e,t,n){let r=n.substring(0,e),s;n.length<e+t?s=n.length:s=e+t;let o=n.substring(e,s),c=n.substring(s),u="("+r+")"+o,h=K.parseFieldsInGeneralPurpose(c);return h==null?u:u+h}}K.VARIABLE_LENGTH=[],K.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",K.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",K.VARIABLE_LENGTH,20],["22",K.VARIABLE_LENGTH,29],["30",K.VARIABLE_LENGTH,8],["37",K.VARIABLE_LENGTH,8],["90",K.VARIABLE_LENGTH,30],["91",K.VARIABLE_LENGTH,30],["92",K.VARIABLE_LENGTH,30],["93",K.VARIABLE_LENGTH,30],["94",K.VARIABLE_LENGTH,30],["95",K.VARIABLE_LENGTH,30],["96",K.VARIABLE_LENGTH,30],["97",K.VARIABLE_LENGTH,3],["98",K.VARIABLE_LENGTH,30],["99",K.VARIABLE_LENGTH,30]],K.THREE_DIGIT_DATA_LENGTH=[["240",K.VARIABLE_LENGTH,30],["241",K.VARIABLE_LENGTH,30],["242",K.VARIABLE_LENGTH,6],["250",K.VARIABLE_LENGTH,30],["251",K.VARIABLE_LENGTH,30],["253",K.VARIABLE_LENGTH,17],["254",K.VARIABLE_LENGTH,20],["400",K.VARIABLE_LENGTH,30],["401",K.VARIABLE_LENGTH,30],["402",17],["403",K.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",K.VARIABLE_LENGTH,20],["421",K.VARIABLE_LENGTH,15],["422",3],["423",K.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],K.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",K.VARIABLE_LENGTH,15],["391",K.VARIABLE_LENGTH,18],["392",K.VARIABLE_LENGTH,15],["393",K.VARIABLE_LENGTH,18],["703",K.VARIABLE_LENGTH,30]],K.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",K.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",K.VARIABLE_LENGTH,20],["8003",K.VARIABLE_LENGTH,30],["8004",K.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",K.VARIABLE_LENGTH,30],["8008",K.VARIABLE_LENGTH,12],["8018",18],["8020",K.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",K.VARIABLE_LENGTH,70],["8200",K.VARIABLE_LENGTH,70]];class _n{constructor(e){this.buffer=new be,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let s=this.decodeGeneralPurposeField(n,r),o=K.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?r=""+s.getRemainingValue():r=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let s=this.extractNumericValueFromBitArray(e,4);return s===0?new mt(this.information.getSize(),mt.FNC1,mt.FNC1):new mt(this.information.getSize(),s-1,mt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new mt(e+7,n,r)}extractNumericValueFromBitArray(e,t){return _n.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let s=0;s<n;++s)e.get(t+s)&&(r|=1<<n-s-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new an(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new an(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new an(this.current.getPosition(),this.buffer.toString()):t=new an(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new on(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new an(this.current.getPosition(),this.buffer.toString());return new on(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new on(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new an(this.current.getPosition(),this.buffer.toString());return new on(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new on(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new an(this.current.getPosition(),this.buffer.toString());return new on(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new on(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ft(e+5,ft.FNC1);if(t>=5&&t<15)return new ft(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ft(e+7,""+(n+1));if(n>=90&&n<116)return new ft(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),s;switch(r){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new k}return new ft(e+8,s)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ft(e+5,ft.FNC1);if(t>=5&&t<15)return new ft(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ft(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new Dt("Decoding invalid alphanumeric value: "+n)}return new ft(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class gi{constructor(e){this.information=e,this.generalDecoder=new _n(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ht extends gi{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);s/100===0&&e.append("0"),s/10===0&&e.append("0"),e.append(s)}ht.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let s=e.charAt(r+t).charCodeAt(0)-48;n+=r&1?s:3*s}n=10-n%10,n===10&&(n=0),e.append(n)}}ht.GTIN_SIZE=40;class In extends ht{constructor(e){super(e)}parseInformation(){let e=new be;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(In.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,In.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,In.HEADER_SIZE+44)}}In.HEADER_SIZE=4;class Cr extends gi{constructor(e){super(e)}parseInformation(){let e=new be;return this.getGeneralDecoder().decodeAllCodes(e,Cr.HEADER_SIZE)}}Cr.HEADER_SIZE=5;class br extends ht{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let s=this.checkWeight(r),o=1e5;for(let c=0;c<5;++c)s/o===0&&e.append("0"),o/=10;e.append(s)}}class vt extends br{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=vt.HEADER_SIZE+br.GTIN_SIZE+vt.WEIGHT_SIZE)throw new B;let e=new be;return this.encodeCompressedGtin(e,vt.HEADER_SIZE),this.encodeCompressedWeight(e,vt.HEADER_SIZE+br.GTIN_SIZE,vt.WEIGHT_SIZE),e.toString()}}vt.HEADER_SIZE=5,vt.WEIGHT_SIZE=15;class N1 extends vt{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class R1 extends vt{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Bt extends ht{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Bt.HEADER_SIZE+ht.GTIN_SIZE)throw new B;let e=new be;this.encodeCompressedGtin(e,Bt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Bt.HEADER_SIZE+ht.GTIN_SIZE,Bt.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Bt.HEADER_SIZE+ht.GTIN_SIZE+Bt.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Bt.HEADER_SIZE=8,Bt.LAST_DIGIT_SIZE=2;class at extends ht{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<at.HEADER_SIZE+ht.GTIN_SIZE)throw new B;let e=new be;this.encodeCompressedGtin(e,at.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(at.HEADER_SIZE+ht.GTIN_SIZE,at.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(at.HEADER_SIZE+ht.GTIN_SIZE+at.LAST_DIGIT_SIZE,at.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(at.HEADER_SIZE+ht.GTIN_SIZE+at.LAST_DIGIT_SIZE+at.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}at.HEADER_SIZE=8,at.LAST_DIGIT_SIZE=2,at.FIRST_THREE_DIGITS_SIZE=10;class Me extends br{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=Me.HEADER_SIZE+Me.GTIN_SIZE+Me.WEIGHT_SIZE+Me.DATE_SIZE)throw new B;let e=new be;return this.encodeCompressedGtin(e,Me.HEADER_SIZE),this.encodeCompressedWeight(e,Me.HEADER_SIZE+Me.GTIN_SIZE,Me.WEIGHT_SIZE),this.encodeCompressedDate(e,Me.HEADER_SIZE+Me.GTIN_SIZE+Me.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,Me.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let s=n%12+1;n/=12;let o=n;o/10==0&&e.append("0"),e.append(o),s/10==0&&e.append("0"),e.append(s),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}Me.HEADER_SIZE=8,Me.WEIGHT_SIZE=20,Me.DATE_SIZE=16;function Ws(p){try{if(p.get(1))return new In(p);if(!p.get(2))return new Cr(p);switch(_n.extractNumericValueFromBitArray(p,1,4)){case 4:return new N1(p);case 5:return new R1(p)}switch(_n.extractNumericValueFromBitArray(p,1,5)){case 12:return new Bt(p);case 13:return new at(p)}switch(_n.extractNumericValueFromBitArray(p,1,7)){case 56:return new Me(p,"310","11");case 57:return new Me(p,"320","11");case 58:return new Me(p,"310","13");case 59:return new Me(p,"320","13");case 60:return new Me(p,"310","15");case 61:return new Me(p,"320","15");case 62:return new Me(p,"310","17");case 63:return new Me(p,"320","17")}}catch(e){throw console.log(e),new Dt("unknown decoder: "+p)}}class Yt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof Yt?Yt.equalsOrNull(e.leftchar,t.leftchar)&&Yt.equalsOrNull(e.rightchar,t.rightchar)&&Yt.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:Yt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class xi{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof xi?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,s)=>{t.forEach(o=>{r.getLeftChar().getValue()===o.getLeftChar().getValue()&&r.getRightChar().getValue()===o.getRightChar().getValue()&&r.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}}class L extends tt{constructor(e){super(...arguments),this.pairs=new Array(L.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return L.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,L.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(s){if(s instanceof B){if(!this.pairs.length)throw new B;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new B}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(r.getPairs()),!L.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let s=new Array(e);s.push(r);try{return this.checkRows(s,n+1)}catch(o){this.verbose&&console.log(o)}}throw new B}static isValidSequence(e){for(let t of L.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,s=!1;for(;n<this.rows.length;){let o=this.rows[n];if(o.getRowNumber()>e){s=o.isEquivalent(this.pairs);break}r=o.isEquivalent(this.pairs),n++}s||r||L.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new xi(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let s of e)if(Yt.equals(r,s))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let s of e){let o=!1;for(let c of n.getPairs())if(s.equals(c)){o=!0;break}if(!o){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=O1.buildBitArray(e),r=Ws(t).parseInformation(),s=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],o[0],o[1]];return new st(r,null,null,c,ne.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),s=2;for(let c=1;c<this.pairs.size();++c){let u=this.pairs.get(c);r+=u.getLeftChar().getChecksumPortion(),s++;let h=u.getRightChar();h!=null&&(r+=h.getChecksumPortion(),s++)}return r%=211,211*(s-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let s,o=!0,c=-1;do this.findNextPair(e,t,c),s=this.parseFoundFinderPattern(e,n,r),s==null?c=L.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let u=this.decodeDataCharacter(e,s,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new B;let h;try{h=this.decodeDataCharacter(e,s,r,!1)}catch(x){h=null,this.verbose&&console.log(x)}return new Yt(u,h,s,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=e.getSize(),o;n>=0?o=n:this.isEmptyPair(t)?o=0:o=t[t.length-1].getFinderPattern().getStartEnd()[1];let c=t.length%2!=0;this.startFromEven&&(c=!c);let u=!1;for(;o<s&&(u=!e.get(o),!!u);)o++;let h=0,x=o;for(let A=o;A<s;A++)if(e.get(A)!=u)r[h]++;else{if(h==3){if(c&&L.reverseCounters(r),L.isFinderPattern(r)){this.startEnd[0]=x,this.startEnd[1]=A;return}c&&L.reverseCounters(r),x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,h--}else h++;r[h]=1,u=!u}throw new B}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,s,o;if(n){let h=this.startEnd[0]-1;for(;h>=0&&!e.get(h);)h--;h++,r=this.startEnd[0]-h,s=h,o=this.startEnd[1]}else s=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let c=this.getDecodeFinderCounters();X.arraycopy(c,0,c,1,c.length-1),c[0]=r;let u;try{u=this.parseFinderValue(c,L.FINDER_PATTERNS)}catch{return null}return new mr(u,[s,o],s,o,t)}decodeDataCharacter(e,t,n,r){let s=this.getDataCharacterCounters();for(let Se=0;Se<s.length;Se++)s[Se]=0;if(r)L.recordPatternInReverse(e,t.getStartEnd()[0],s);else{L.recordPattern(e,t.getStartEnd()[1],s);for(let Se=0,et=s.length-1;Se<et;Se++,et--){let pt=s[Se];s[Se]=s[et],s[et]=pt}}let o=17,c=xe.sum(new Int32Array(s))/o,u=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(c-u)/u>.3)throw new B;let h=this.getOddCounts(),x=this.getEvenCounts(),A=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors();for(let Se=0;Se<s.length;Se++){let et=1*s[Se]/c,pt=et+.5;if(pt<1){if(et<.3)throw new B;pt=1}else if(pt>8){if(et>8.7)throw new B;pt=8}let Rn=Se/2;Se&1?(x[Rn]=pt,m[Rn]=et-pt):(h[Rn]=pt,A[Rn]=et-pt)}this.adjustOddEvenCounts(o);let y=4*t.getValue()+(n?0:2)+(r?0:1)-1,S=0,T=0;for(let Se=h.length-1;Se>=0;Se--){if(L.isNotA1left(t,n,r)){let et=L.WEIGHTS[y][2*Se];T+=h[Se]*et}S+=h[Se]}let N=0;for(let Se=x.length-1;Se>=0;Se--)if(L.isNotA1left(t,n,r)){let et=L.WEIGHTS[y][2*Se+1];N+=x[Se]*et}let M=T+N;if(S&1||S>13||S<4)throw new B;let U=(13-S)/2,H=L.SYMBOL_WIDEST[U],F=9-H,de=Mt.getRSSvalue(h,H,!0),ae=Mt.getRSSvalue(x,F,!1),gt=L.EVEN_TOTAL_SUBSET[U],Tt=L.GSUM[U],xt=de*gt+ae+Tt;return new yn(xt,M)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=xe.sum(new Int32Array(this.getOddCounts())),n=xe.sum(new Int32Array(this.getEvenCounts())),r=!1,s=!1;t>13?s=!0:t<4&&(r=!0);let o=!1,c=!1;n>13?c=!0:n<4&&(o=!0);let u=t+n-e,h=(t&1)==1,x=(n&1)==0;if(u==1)if(h){if(x)throw new B;s=!0}else{if(!x)throw new B;c=!0}else if(u==-1)if(h){if(x)throw new B;r=!0}else{if(!x)throw new B;o=!0}else if(u==0){if(h){if(!x)throw new B;t<n?(r=!0,c=!0):(s=!0,o=!0)}else if(x)throw new B}else throw new B;if(r){if(s)throw new B;L.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&L.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new B;L.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&L.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}L.SYMBOL_WIDEST=[7,5,4,3,1],L.EVEN_TOTAL_SUBSET=[4,20,52,104,204],L.GSUM=[0,348,1388,2948,3988],L.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],L.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],L.FINDER_PAT_A=0,L.FINDER_PAT_B=1,L.FINDER_PAT_C=2,L.FINDER_PAT_D=3,L.FINDER_PAT_E=4,L.FINDER_PAT_F=5,L.FINDER_PATTERN_SEQUENCES=[[L.FINDER_PAT_A,L.FINDER_PAT_A],[L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B],[L.FINDER_PAT_A,L.FINDER_PAT_C,L.FINDER_PAT_B,L.FINDER_PAT_D],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_C],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_D,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_D],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_E],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F]],L.MAX_PAIRS=11;class D1 extends yn{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Le extends tt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);Le.addOrTally(this.possibleLeftPairs,r),t.reverse();let s=this.decodePair(t,!0,e,n);Le.addOrTally(this.possibleRightPairs,s),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let c of this.possibleRightPairs)if(c.getCount()>1&&Le.checkChecksum(o,c))return Le.constructResult(o,c)}throw new B}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),s=new be;for(let h=13-r.length;h>0;h--)s.append("0");s.append(r);let o=0;for(let h=0;h<13;h++){let x=s.charAt(h).charCodeAt(0)-48;o+=h&1?x:3*x}o=10-o%10,o===10&&(o=0),s.append(o.toString());let c=e.getFinderPattern().getResultPoints(),u=t.getFinderPattern().getResultPoints();return new st(s.toString(),null,0,[c[0],c[1],u[0],u[1]],ne.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let s=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,s),c=r==null?null:r.get(oe.NEED_RESULT_POINT_CALLBACK);if(c!=null){let x=(s[0]+s[1])/2;t&&(x=e.getSize()-1-x),c.foundPossibleResultPoint(new Q(x,n))}let u=this.decodeDataCharacter(e,o,!0),h=this.decodeDataCharacter(e,o,!1);return new D1(1597*u.getValue()+h.getValue(),u.getChecksumPortion()+4*h.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let N=0;N<r.length;N++)r[N]=0;if(n)Ve.recordPatternInReverse(e,t.getStartEnd()[0],r);else{Ve.recordPattern(e,t.getStartEnd()[1]+1,r);for(let N=0,M=r.length-1;N<M;N++,M--){let U=r[N];r[N]=r[M],r[M]=U}}let s=n?16:15,o=xe.sum(new Int32Array(r))/s,c=this.getOddCounts(),u=this.getEvenCounts(),h=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let N=0;N<r.length;N++){let M=r[N]/o,U=Math.floor(M+.5);U<1?U=1:U>8&&(U=8);let H=Math.floor(N/2);N&1?(u[H]=U,x[H]=M-U):(c[H]=U,h[H]=M-U)}this.adjustOddEvenCounts(n,s);let A=0,m=0;for(let N=c.length-1;N>=0;N--)m*=9,m+=c[N],A+=c[N];let y=0,S=0;for(let N=u.length-1;N>=0;N--)y*=9,y+=u[N],S+=u[N];let T=m+3*y;if(n){if(A&1||A>12||A<4)throw new B;let N=(12-A)/2,M=Le.OUTSIDE_ODD_WIDEST[N],U=9-M,H=Mt.getRSSvalue(c,M,!1),F=Mt.getRSSvalue(u,U,!0),de=Le.OUTSIDE_EVEN_TOTAL_SUBSET[N],ae=Le.OUTSIDE_GSUM[N];return new yn(H*de+F+ae,T)}else{if(S&1||S>10||S<4)throw new B;let N=(10-S)/2,M=Le.INSIDE_ODD_WIDEST[N],U=9-M,H=Mt.getRSSvalue(c,M,!0),F=Mt.getRSSvalue(u,U,!1),de=Le.INSIDE_ODD_TOTAL_SUBSET[N],ae=Le.INSIDE_GSUM[N];return new yn(F*de+H+ae,T)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),s=!1,o=0;for(;o<r&&(s=!e.get(o),t!==s);)o++;let c=0,u=o;for(let h=o;h<r;h++)if(e.get(h)!==s)n[c]++;else{if(c===3){if(tt.isFinderPattern(n))return[u,h];u+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,c--}else c++;n[c]=1,s=!s}throw new B}parseFoundFinderPattern(e,t,n,r){let s=e.get(r[0]),o=r[0]-1;for(;o>=0&&s!==e.get(o);)o--;o++;const c=r[0]-o,u=this.getDecodeFinderCounters(),h=new Int32Array(u.length);X.arraycopy(u,0,h,1,u.length-1),h[0]=c;const x=this.parseFinderValue(h,Le.FINDER_PATTERNS);let A=o,m=r[1];return n&&(A=e.getSize()-1-A,m=e.getSize()-1-m),new mr(x,[o,r[1]],A,m,t)}adjustOddEvenCounts(e,t){let n=xe.sum(new Int32Array(this.getOddCounts())),r=xe.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1,c=!1,u=!1;e?(n>12?o=!0:n<4&&(s=!0),r>12?u=!0:r<4&&(c=!0)):(n>11?o=!0:n<5&&(s=!0),r>10?u=!0:r<4&&(c=!0));let h=n+r-t,x=(n&1)===(e?1:0),A=(r&1)===1;if(h===1)if(x){if(A)throw new B;o=!0}else{if(!A)throw new B;u=!0}else if(h===-1)if(x){if(A)throw new B;s=!0}else{if(!A)throw new B;c=!0}else if(h===0){if(x){if(!A)throw new B;n<r?(s=!0,u=!0):(o=!0,c=!0)}else if(A)throw new B}else throw new B;if(s){if(o)throw new B;tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new B;tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Le.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Le.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Le.OUTSIDE_GSUM=[0,161,961,2015,2715],Le.INSIDE_GSUM=[0,336,1036,1516],Le.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Le.INSIDE_ODD_WIDEST=[2,4,6,8],Le.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Sn extends Ve{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get(oe.POSSIBLE_FORMATS):null,r=e&&e.get(oe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(ne.EAN_13)||n.includes(ne.UPC_A)||n.includes(ne.EAN_8)||n.includes(ne.UPC_E))&&this.readers.push(new hi(e)),n.includes(ne.CODE_39)&&this.readers.push(new Ge(r)),n.includes(ne.CODE_128)&&this.readers.push(new z),n.includes(ne.ITF)&&this.readers.push(new _e),n.includes(ne.RSS_14)&&this.readers.push(new Le),n.includes(ne.RSS_EXPANDED)&&this.readers.push(new L(this.verbose))):(this.readers.push(new hi(e)),this.readers.push(new Ge),this.readers.push(new hi(e)),this.readers.push(new z),this.readers.push(new _e),this.readers.push(new Le),this.readers.push(new L(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new B}reset(){this.readers.forEach(e=>e.reset())}}class M1 extends rn{constructor(e=500,t){super(new Sn(t),e,t)}}class Ce{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ee{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ge{constructor(e,t,n,r,s,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=s,this.ecBlocks=o;let c=0;const u=o.getECCodewords(),h=o.getECBlocks();for(let x of h)c+=x.getCount()*(x.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(e&1||t&1)throw new k;for(let n of ge.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new ge(1,10,10,8,8,new Ce(5,new Ee(1,3))),new ge(2,12,12,10,10,new Ce(7,new Ee(1,5))),new ge(3,14,14,12,12,new Ce(10,new Ee(1,8))),new ge(4,16,16,14,14,new Ce(12,new Ee(1,12))),new ge(5,18,18,16,16,new Ce(14,new Ee(1,18))),new ge(6,20,20,18,18,new Ce(18,new Ee(1,22))),new ge(7,22,22,20,20,new Ce(20,new Ee(1,30))),new ge(8,24,24,22,22,new Ce(24,new Ee(1,36))),new ge(9,26,26,24,24,new Ce(28,new Ee(1,44))),new ge(10,32,32,14,14,new Ce(36,new Ee(1,62))),new ge(11,36,36,16,16,new Ce(42,new Ee(1,86))),new ge(12,40,40,18,18,new Ce(48,new Ee(1,114))),new ge(13,44,44,20,20,new Ce(56,new Ee(1,144))),new ge(14,48,48,22,22,new Ce(68,new Ee(1,174))),new ge(15,52,52,24,24,new Ce(42,new Ee(2,102))),new ge(16,64,64,14,14,new Ce(56,new Ee(2,140))),new ge(17,72,72,16,16,new Ce(36,new Ee(4,92))),new ge(18,80,80,18,18,new Ce(48,new Ee(4,114))),new ge(19,88,88,20,20,new Ce(56,new Ee(4,144))),new ge(20,96,96,22,22,new Ce(68,new Ee(4,174))),new ge(21,104,104,24,24,new Ce(56,new Ee(6,136))),new ge(22,120,120,18,18,new Ce(68,new Ee(6,175))),new ge(23,132,132,20,20,new Ce(62,new Ee(8,163))),new ge(24,144,144,22,22,new Ce(62,new Ee(8,156),new Ee(2,155))),new ge(25,8,18,6,16,new Ce(7,new Ee(1,5))),new ge(26,8,32,6,14,new Ce(11,new Ee(1,10))),new ge(27,12,26,10,24,new Ce(14,new Ee(1,16))),new ge(28,12,36,10,16,new Ce(18,new Ee(1,22))),new ge(29,16,36,14,16,new Ce(24,new Ee(1,32))),new ge(30,16,48,14,22,new Ce(28,new Ee(1,49)))]}}ge.VERSIONS=ge.buildVersions();class wi{constructor(e){const t=e.getHeight();if(t<8||t>144||t&1)throw new k;this.version=wi.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new je(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ge.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let c=!1,u=!1,h=!1,x=!1;do if(n===s&&r===0&&!c)e[t++]=this.readCorner1(s,o)&255,n-=2,r+=2,c=!0;else if(n===s-2&&r===0&&o&3&&!u)e[t++]=this.readCorner2(s,o)&255,n-=2,r+=2,u=!0;else if(n===s+4&&r===2&&!(o&7)&&!h)e[t++]=this.readCorner3(s,o)&255,n-=2,r+=2,h=!0;else if(n===s-2&&r===0&&(o&7)===4&&!x)e[t++]=this.readCorner4(s,o)&255,n-=2,r+=2,x=!0;else{do n<s&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,s,o)&255),n-=2,r+=2;while(n>=0&&r<o);n+=1,r+=3;do n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,s,o)&255),n+=2,r-=2;while(n<s&&r>=0);n+=3,r+=1}while(n<s||r<o);if(t!==this.version.getTotalCodewords())throw new k;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let s=0;return this.readModule(e-2,t-2,n,r)&&(s|=1),s<<=1,this.readModule(e-2,t-1,n,r)&&(s|=1),s<<=1,this.readModule(e-1,t-2,n,r)&&(s|=1),s<<=1,this.readModule(e-1,t-1,n,r)&&(s|=1),s<<=1,this.readModule(e-1,t,n,r)&&(s|=1),s<<=1,this.readModule(e,t-2,n,r)&&(s|=1),s<<=1,this.readModule(e,t-1,n,r)&&(s|=1),s<<=1,this.readModule(e,t,n,r)&&(s|=1),s}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new O("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=t/r|0,c=n/s|0,u=o*r,h=c*s,x=new je(h,u);for(let A=0;A<o;++A){const m=A*r;for(let y=0;y<c;++y){const S=y*s;for(let T=0;T<r;++T){const N=A*(r+2)+1+T,M=m+T;for(let U=0;U<s;++U){const H=y*(s+2)+1+U;if(e.get(H,N)){const F=S+U;x.set(F,M)}}}}}return x}}class pi{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const s=n.getECBlocks();for(let T of s)r+=T.getCount();const o=new Array(r);let c=0;for(let T of s)for(let N=0;N<T.getCount();N++){const M=T.getDataCodewords(),U=n.getECCodewords()+M;o[c++]=new pi(M,new Uint8Array(U))}const h=o[0].codewords.length-n.getECCodewords(),x=h-1;let A=0;for(let T=0;T<x;T++)for(let N=0;N<c;N++)o[N].codewords[T]=e[A++];const m=t.getVersionNumber()===24,y=m?8:c;for(let T=0;T<y;T++)o[T].codewords[h-1]=e[A++];const S=o[0].codewords.length;for(let T=h;T<S;T++)for(let N=0;N<c;N++){const M=m?(N+8)%c:N,U=m&&M>7?T-1:T;o[M].codewords[U]=e[A++]}if(A!==e.length)throw new O;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ai{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new O(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const s=this.bytes;if(n>0){const o=8-n,c=e<o?e:o,u=o-c,h=255>>8-c<<u;t=(s[r]&h)>>u,e-=c,n+=c,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|s[r]&255,r++,e-=8;if(e>0){const o=8-e,c=255>>o<<o;t=t<<e|(s[r]&c)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Xe;(function(p){p[p.PAD_ENCODE=0]="PAD_ENCODE",p[p.ASCII_ENCODE=1]="ASCII_ENCODE",p[p.C40_ENCODE=2]="C40_ENCODE",p[p.TEXT_ENCODE=3]="TEXT_ENCODE",p[p.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",p[p.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",p[p.BASE256_ENCODE=6]="BASE256_ENCODE"})(Xe||(Xe={}));class Zt{static decode(e){const t=new Ai(e),n=new be,r=new be,s=new Array;let o=Xe.ASCII_ENCODE;do if(o===Xe.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case Xe.C40_ENCODE:this.decodeC40Segment(t,n);break;case Xe.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Xe.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Xe.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Xe.BASE256_ENCODE:this.decodeBase256Segment(t,n,s);break;default:throw new k}o=Xe.ASCII_ENCODE}while(o!==Xe.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Gn(e,n.toString(),s.length===0?null:s,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let s=e.readBits(8);if(s===0)throw new k;if(s<=128)return r&&(s+=128),t.append(String.fromCharCode(s-1)),Xe.ASCII_ENCODE;if(s===129)return Xe.PAD_ENCODE;if(s<=229){const o=s-130;o<10&&t.append("0"),t.append(""+o)}else switch(s){case 230:return Xe.C40_ENCODE;case 231:return Xe.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return Xe.ANSIX12_ENCODE;case 239:return Xe.TEXT_ENCODE;case 240:return Xe.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new k;break}}while(e.available()>0);return Xe.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let s=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(let c=0;c<3;c++){const u=r[c];switch(s){case 0:if(u<3)s=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){const h=this.C40_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),s=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){const h=this.C40_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}s=0;break;case 3:n?(t.append(String.fromCharCode(u+224)),n=!1):t.append(String.fromCharCode(u+96)),s=0;break;default:throw new k}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],s=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(let c=0;c<3;c++){const u=r[c];switch(s){case 0:if(u<3)s=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){const h=this.TEXT_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),s=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){const h=this.TEXT_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}s=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){const h=this.TEXT_SHIFT3_SET_CHARS[u];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h),s=0}else throw new k;break;default:throw new k}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let s=0;s<3;s++){const o=n[s];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new k;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,s=Math.floor(r/1600);n[0]=s,r-=s*1600,s=Math.floor(r/40),n[1]=s,n[2]=r-s*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){const s=8-e.getBitOffset();s!==8&&e.readBits(s);return}r&32||(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const s=this.unrandomize255State(e.readBits(8),r++);let o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),r++),o<0)throw new k;const c=new Uint8Array(o);for(let u=0;u<o;u++){if(e.available()<8)throw new k;c[u]=this.unrandomize255State(e.readBits(8),r++)}n.push(c);try{t.append(ct.decode(c,se.ISO88591))}catch(u){throw new Dt("Platform does not support required encoding: "+u.message)}}static unrandomize255State(e,t){const n=149*t%255+1,r=e-n;return r>=0?r:r+256}}Zt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Zt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Zt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Zt.TEXT_SHIFT2_SET_CHARS=Zt.C40_SHIFT2_SET_CHARS,Zt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class v1{constructor(){this.rsDecoder=new zn(pe.DATA_MATRIX_FIELD_256)}decode(e){const t=new wi(e),n=t.getVersion(),r=t.readCodewords(),s=pi.getDataBlocks(r,n);let o=0;for(let h of s)o+=h.getNumDataCodewords();const c=new Uint8Array(o),u=s.length;for(let h=0;h<u;h++){const x=s[h],A=x.getCodewords(),m=x.getNumDataCodewords();this.correctErrors(A,m);for(let y=0;y<m;y++)c[y*u+h]=A[y]}return Zt.decode(c)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Y}for(let r=0;r<t;r++)e[r]=n[r]}}class Ue{constructor(e){this.image=e,this.rectangleDetector=new Vt(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new B;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],s=t[2],o=t[3];let c=this.transitionsBetween(n,o)+1,u=this.transitionsBetween(s,o)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));let h=Ue.sampleGrid(this.image,n,r,s,o,c,u);return new Ar(h,[n,r,s,o])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),s=(t.getY()-e.getY())/(n+1);return new Q(e.getX()+r,e.getY()+s)}static moveAway(e,t,n){let r=e.getX(),s=e.getY();return r<t?r-=1:r+=1,s<n?s-=1:s+=1,new Q(r,s)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],s=e[2],o=this.transitionsBetween(t,n),c=this.transitionsBetween(n,r),u=this.transitionsBetween(r,s),h=this.transitionsBetween(s,t),x=o,A=[s,t,n,r];return x>c&&(x=c,A[0]=t,A[1]=n,A[2]=r,A[3]=s),x>u&&(x=u,A[0]=n,A[1]=r,A[2]=s,A[3]=t),x>h&&(A[0]=r,A[1]=s,A[2]=t,A[3]=n),A}detectSolid2(e){let t=e[0],n=e[1],r=e[2],s=e[3],o=this.transitionsBetween(t,s),c=Ue.shiftPoint(n,r,(o+1)*4),u=Ue.shiftPoint(r,n,(o+1)*4),h=this.transitionsBetween(c,t),x=this.transitionsBetween(u,s);return h<x?(e[0]=t,e[1]=n,e[2]=r,e[3]=s):(e[0]=n,e[1]=r,e[2]=s,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],s=e[3],o=this.transitionsBetween(t,s),c=this.transitionsBetween(n,s),u=Ue.shiftPoint(t,n,(c+1)*4),h=Ue.shiftPoint(r,n,(o+1)*4);o=this.transitionsBetween(u,s),c=this.transitionsBetween(h,s);let x=new Q(s.getX()+(r.getX()-n.getX())/(o+1),s.getY()+(r.getY()-n.getY())/(o+1)),A=new Q(s.getX()+(t.getX()-n.getX())/(c+1),s.getY()+(t.getY()-n.getY())/(c+1));if(!this.isValid(x))return this.isValid(A)?A:null;if(!this.isValid(A))return x;let m=this.transitionsBetween(u,x)+this.transitionsBetween(h,x),y=this.transitionsBetween(u,A)+this.transitionsBetween(h,A);return m>y?x:A}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],s=e[3],o=this.transitionsBetween(t,s)+1,c=this.transitionsBetween(r,s)+1,u=Ue.shiftPoint(t,n,c*4),h=Ue.shiftPoint(r,n,o*4);o=this.transitionsBetween(u,s)+1,c=this.transitionsBetween(h,s)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);let x=(t.getX()+n.getX()+r.getX()+s.getX())/4,A=(t.getY()+n.getY()+r.getY()+s.getY())/4;t=Ue.moveAway(t,x,A),n=Ue.moveAway(n,x,A),r=Ue.moveAway(r,x,A),s=Ue.moveAway(s,x,A);let m,y;return u=Ue.shiftPoint(t,n,c*4),u=Ue.shiftPoint(u,s,o*4),m=Ue.shiftPoint(n,t,c*4),m=Ue.shiftPoint(m,r,o*4),h=Ue.shiftPoint(r,s,c*4),h=Ue.shiftPoint(h,n,o*4),y=Ue.shiftPoint(s,r,c*4),y=Ue.shiftPoint(y,t,o*4),[u,m,h,y]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,s,o,c){return jt.getInstance().sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,t.getX(),t.getY(),s.getX(),s.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),s=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.abs(o-r)>Math.abs(s-n);if(c){let T=n;n=r,r=T,T=s,s=o,o=T}let u=Math.abs(s-n),h=Math.abs(o-r),x=-u/2,A=r<o?1:-1,m=n<s?1:-1,y=0,S=this.image.get(c?r:n,c?n:r);for(let T=n,N=r;T!==s;T+=m){let M=this.image.get(c?N:T,c?T:N);if(M!==S&&(y++,S=M),x+=h,x>0){if(N===o)break;N+=A,x-=u}}return y}}class Kt{constructor(){this.decoder=new v1}decode(e,t=null){let n,r;if(t!=null&&t.has(oe.PURE_BARCODE)){const h=Kt.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(h),r=Kt.NO_POINTS}else{const h=new Ue(e.getBlackMatrix()).detect();n=this.decoder.decode(h.getBits()),r=h.getPoints()}const s=n.getRawBytes(),o=new st(n.getText(),s,8*s.length,r,ne.DATA_MATRIX,X.currentTimeMillis()),c=n.getByteSegments();c!=null&&o.putMetadata(Ze.BYTE_SEGMENTS,c);const u=n.getECLevel();return u!=null&&o.putMetadata(Ze.ERROR_CORRECTION_LEVEL,u),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new B;const r=this.moduleSize(t,e);let s=t[1];const o=n[1];let c=t[0];const h=(n[0]-c+1)/r,x=(o-s+1)/r;if(h<=0||x<=0)throw new B;const A=r/2;s+=A,c+=A;const m=new je(h,x);for(let y=0;y<x;y++){const S=s+y*r;for(let T=0;T<h;T++)e.get(c+T*r,S)&&m.set(T,y)}return m}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const s=e[1];for(;r<n&&t.get(r,s);)r++;if(r===n)throw new B;const o=r-e[0];if(o===0)throw new B;return o}}Kt.NO_POINTS=[];class B1 extends rn{constructor(e=500){super(new Kt,e)}}var Tn;(function(p){p[p.L=0]="L",p[p.M=1]="M",p[p.Q=2]="Q",p[p.H=3]="H"})(Tn||(Tn={}));class Oe{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Oe.FOR_BITS.set(n,this),Oe.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Oe.L;case"M":return Oe.M;case"Q":return Oe.Q;case"H":return Oe.H;default:throw new I(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Oe))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Oe.FOR_BITS.size)throw new O;return Oe.FOR_BITS.get(e)}}Oe.FOR_BITS=new Map,Oe.FOR_VALUE=new Map,Oe.L=new Oe(Tn.L,"L",1),Oe.M=new Oe(Tn.M,"M",0),Oe.Q=new Oe(Tn.Q,"Q",3),Oe.H=new Oe(Tn.H,"H",2);class nt{constructor(e){this.errorCorrectionLevel=Oe.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return G.bitCount(e^t)}static decodeFormatInformation(e,t){const n=nt.doDecodeFormatInformation(e,t);return n!==null?n:nt.doDecodeFormatInformation(e^nt.FORMAT_INFO_MASK_QR,t^nt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const s of nt.FORMAT_INFO_DECODE_LOOKUP){const o=s[0];if(o===e||o===t)return new nt(s[1]);let c=nt.numBitsDiffering(e,o);c<n&&(r=s[1],n=c),e!==t&&(c=nt.numBitsDiffering(t,o),c<n&&(r=s[1],n=c))}return n<=3?new nt(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof nt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}nt.FORMAT_INFO_MASK_QR=21522,nt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class R{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class b{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class J{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const s=n[0].getECCodewordsPerBlock(),o=n[0].getECBlocks();for(const c of o)r+=c.getCount()*(c.getDataCodewords()+s);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new k;try{return this.getVersionForNumber((e-17)/4)}catch{throw new k}}static getVersionForNumber(e){if(e<1||e>40)throw new O;return J.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<J.VERSION_DECODE_INFO.length;r++){const s=J.VERSION_DECODE_INFO[r];if(s===e)return J.getVersionForNumber(r+7);const o=nt.numBitsDiffering(e,s);o<t&&(n=r+7,t=o)}return t<=3?J.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new je(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const s=this.alignmentPatternCenters[r]-2;for(let o=0;o<n;o++)r===0&&(o===0||o===n-1)||r===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,s,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}J.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),J.VERSIONS=[new J(1,new Int32Array(0),new R(7,new b(1,19)),new R(10,new b(1,16)),new R(13,new b(1,13)),new R(17,new b(1,9))),new J(2,Int32Array.from([6,18]),new R(10,new b(1,34)),new R(16,new b(1,28)),new R(22,new b(1,22)),new R(28,new b(1,16))),new J(3,Int32Array.from([6,22]),new R(15,new b(1,55)),new R(26,new b(1,44)),new R(18,new b(2,17)),new R(22,new b(2,13))),new J(4,Int32Array.from([6,26]),new R(20,new b(1,80)),new R(18,new b(2,32)),new R(26,new b(2,24)),new R(16,new b(4,9))),new J(5,Int32Array.from([6,30]),new R(26,new b(1,108)),new R(24,new b(2,43)),new R(18,new b(2,15),new b(2,16)),new R(22,new b(2,11),new b(2,12))),new J(6,Int32Array.from([6,34]),new R(18,new b(2,68)),new R(16,new b(4,27)),new R(24,new b(4,19)),new R(28,new b(4,15))),new J(7,Int32Array.from([6,22,38]),new R(20,new b(2,78)),new R(18,new b(4,31)),new R(18,new b(2,14),new b(4,15)),new R(26,new b(4,13),new b(1,14))),new J(8,Int32Array.from([6,24,42]),new R(24,new b(2,97)),new R(22,new b(2,38),new b(2,39)),new R(22,new b(4,18),new b(2,19)),new R(26,new b(4,14),new b(2,15))),new J(9,Int32Array.from([6,26,46]),new R(30,new b(2,116)),new R(22,new b(3,36),new b(2,37)),new R(20,new b(4,16),new b(4,17)),new R(24,new b(4,12),new b(4,13))),new J(10,Int32Array.from([6,28,50]),new R(18,new b(2,68),new b(2,69)),new R(26,new b(4,43),new b(1,44)),new R(24,new b(6,19),new b(2,20)),new R(28,new b(6,15),new b(2,16))),new J(11,Int32Array.from([6,30,54]),new R(20,new b(4,81)),new R(30,new b(1,50),new b(4,51)),new R(28,new b(4,22),new b(4,23)),new R(24,new b(3,12),new b(8,13))),new J(12,Int32Array.from([6,32,58]),new R(24,new b(2,92),new b(2,93)),new R(22,new b(6,36),new b(2,37)),new R(26,new b(4,20),new b(6,21)),new R(28,new b(7,14),new b(4,15))),new J(13,Int32Array.from([6,34,62]),new R(26,new b(4,107)),new R(22,new b(8,37),new b(1,38)),new R(24,new b(8,20),new b(4,21)),new R(22,new b(12,11),new b(4,12))),new J(14,Int32Array.from([6,26,46,66]),new R(30,new b(3,115),new b(1,116)),new R(24,new b(4,40),new b(5,41)),new R(20,new b(11,16),new b(5,17)),new R(24,new b(11,12),new b(5,13))),new J(15,Int32Array.from([6,26,48,70]),new R(22,new b(5,87),new b(1,88)),new R(24,new b(5,41),new b(5,42)),new R(30,new b(5,24),new b(7,25)),new R(24,new b(11,12),new b(7,13))),new J(16,Int32Array.from([6,26,50,74]),new R(24,new b(5,98),new b(1,99)),new R(28,new b(7,45),new b(3,46)),new R(24,new b(15,19),new b(2,20)),new R(30,new b(3,15),new b(13,16))),new J(17,Int32Array.from([6,30,54,78]),new R(28,new b(1,107),new b(5,108)),new R(28,new b(10,46),new b(1,47)),new R(28,new b(1,22),new b(15,23)),new R(28,new b(2,14),new b(17,15))),new J(18,Int32Array.from([6,30,56,82]),new R(30,new b(5,120),new b(1,121)),new R(26,new b(9,43),new b(4,44)),new R(28,new b(17,22),new b(1,23)),new R(28,new b(2,14),new b(19,15))),new J(19,Int32Array.from([6,30,58,86]),new R(28,new b(3,113),new b(4,114)),new R(26,new b(3,44),new b(11,45)),new R(26,new b(17,21),new b(4,22)),new R(26,new b(9,13),new b(16,14))),new J(20,Int32Array.from([6,34,62,90]),new R(28,new b(3,107),new b(5,108)),new R(26,new b(3,41),new b(13,42)),new R(30,new b(15,24),new b(5,25)),new R(28,new b(15,15),new b(10,16))),new J(21,Int32Array.from([6,28,50,72,94]),new R(28,new b(4,116),new b(4,117)),new R(26,new b(17,42)),new R(28,new b(17,22),new b(6,23)),new R(30,new b(19,16),new b(6,17))),new J(22,Int32Array.from([6,26,50,74,98]),new R(28,new b(2,111),new b(7,112)),new R(28,new b(17,46)),new R(30,new b(7,24),new b(16,25)),new R(24,new b(34,13))),new J(23,Int32Array.from([6,30,54,78,102]),new R(30,new b(4,121),new b(5,122)),new R(28,new b(4,47),new b(14,48)),new R(30,new b(11,24),new b(14,25)),new R(30,new b(16,15),new b(14,16))),new J(24,Int32Array.from([6,28,54,80,106]),new R(30,new b(6,117),new b(4,118)),new R(28,new b(6,45),new b(14,46)),new R(30,new b(11,24),new b(16,25)),new R(30,new b(30,16),new b(2,17))),new J(25,Int32Array.from([6,32,58,84,110]),new R(26,new b(8,106),new b(4,107)),new R(28,new b(8,47),new b(13,48)),new R(30,new b(7,24),new b(22,25)),new R(30,new b(22,15),new b(13,16))),new J(26,Int32Array.from([6,30,58,86,114]),new R(28,new b(10,114),new b(2,115)),new R(28,new b(19,46),new b(4,47)),new R(28,new b(28,22),new b(6,23)),new R(30,new b(33,16),new b(4,17))),new J(27,Int32Array.from([6,34,62,90,118]),new R(30,new b(8,122),new b(4,123)),new R(28,new b(22,45),new b(3,46)),new R(30,new b(8,23),new b(26,24)),new R(30,new b(12,15),new b(28,16))),new J(28,Int32Array.from([6,26,50,74,98,122]),new R(30,new b(3,117),new b(10,118)),new R(28,new b(3,45),new b(23,46)),new R(30,new b(4,24),new b(31,25)),new R(30,new b(11,15),new b(31,16))),new J(29,Int32Array.from([6,30,54,78,102,126]),new R(30,new b(7,116),new b(7,117)),new R(28,new b(21,45),new b(7,46)),new R(30,new b(1,23),new b(37,24)),new R(30,new b(19,15),new b(26,16))),new J(30,Int32Array.from([6,26,52,78,104,130]),new R(30,new b(5,115),new b(10,116)),new R(28,new b(19,47),new b(10,48)),new R(30,new b(15,24),new b(25,25)),new R(30,new b(23,15),new b(25,16))),new J(31,Int32Array.from([6,30,56,82,108,134]),new R(30,new b(13,115),new b(3,116)),new R(28,new b(2,46),new b(29,47)),new R(30,new b(42,24),new b(1,25)),new R(30,new b(23,15),new b(28,16))),new J(32,Int32Array.from([6,34,60,86,112,138]),new R(30,new b(17,115)),new R(28,new b(10,46),new b(23,47)),new R(30,new b(10,24),new b(35,25)),new R(30,new b(19,15),new b(35,16))),new J(33,Int32Array.from([6,30,58,86,114,142]),new R(30,new b(17,115),new b(1,116)),new R(28,new b(14,46),new b(21,47)),new R(30,new b(29,24),new b(19,25)),new R(30,new b(11,15),new b(46,16))),new J(34,Int32Array.from([6,34,62,90,118,146]),new R(30,new b(13,115),new b(6,116)),new R(28,new b(14,46),new b(23,47)),new R(30,new b(44,24),new b(7,25)),new R(30,new b(59,16),new b(1,17))),new J(35,Int32Array.from([6,30,54,78,102,126,150]),new R(30,new b(12,121),new b(7,122)),new R(28,new b(12,47),new b(26,48)),new R(30,new b(39,24),new b(14,25)),new R(30,new b(22,15),new b(41,16))),new J(36,Int32Array.from([6,24,50,76,102,128,154]),new R(30,new b(6,121),new b(14,122)),new R(28,new b(6,47),new b(34,48)),new R(30,new b(46,24),new b(10,25)),new R(30,new b(2,15),new b(64,16))),new J(37,Int32Array.from([6,28,54,80,106,132,158]),new R(30,new b(17,122),new b(4,123)),new R(28,new b(29,46),new b(14,47)),new R(30,new b(49,24),new b(10,25)),new R(30,new b(24,15),new b(46,16))),new J(38,Int32Array.from([6,32,58,84,110,136,162]),new R(30,new b(4,122),new b(18,123)),new R(28,new b(13,46),new b(32,47)),new R(30,new b(48,24),new b(14,25)),new R(30,new b(42,15),new b(32,16))),new J(39,Int32Array.from([6,26,54,82,110,138,166]),new R(30,new b(20,117),new b(4,118)),new R(28,new b(40,47),new b(7,48)),new R(30,new b(43,24),new b(22,25)),new R(30,new b(10,15),new b(67,16))),new J(40,Int32Array.from([6,30,58,86,114,142,170]),new R(30,new b(19,118),new b(6,119)),new R(28,new b(18,47),new b(31,48)),new R(30,new b(34,24),new b(34,25)),new R(30,new b(20,15),new b(61,16)))];var Ke;(function(p){p[p.DATA_MASK_000=0]="DATA_MASK_000",p[p.DATA_MASK_001=1]="DATA_MASK_001",p[p.DATA_MASK_010=2]="DATA_MASK_010",p[p.DATA_MASK_011=3]="DATA_MASK_011",p[p.DATA_MASK_100=4]="DATA_MASK_100",p[p.DATA_MASK_101=5]="DATA_MASK_101",p[p.DATA_MASK_110=6]="DATA_MASK_110",p[p.DATA_MASK_111=7]="DATA_MASK_111"})(Ke||(Ke={}));class Ct{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Ct.values=new Map([[Ke.DATA_MASK_000,new Ct(Ke.DATA_MASK_000,(p,e)=>(p+e&1)===0)],[Ke.DATA_MASK_001,new Ct(Ke.DATA_MASK_001,(p,e)=>(p&1)===0)],[Ke.DATA_MASK_010,new Ct(Ke.DATA_MASK_010,(p,e)=>e%3===0)],[Ke.DATA_MASK_011,new Ct(Ke.DATA_MASK_011,(p,e)=>(p+e)%3===0)],[Ke.DATA_MASK_100,new Ct(Ke.DATA_MASK_100,(p,e)=>(Math.floor(p/2)+Math.floor(e/3)&1)===0)],[Ke.DATA_MASK_101,new Ct(Ke.DATA_MASK_101,(p,e)=>p*e%6===0)],[Ke.DATA_MASK_110,new Ct(Ke.DATA_MASK_110,(p,e)=>p*e%6<3)],[Ke.DATA_MASK_111,new Ct(Ke.DATA_MASK_111,(p,e)=>(p+e+p*e%3&1)===0)]]);class P1{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new k;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let s=0;s<6;s++)e=this.copyBit(s,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let s=5;s>=0;s--)e=this.copyBit(8,s,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let s=t-1;s>=r;s--)n=this.copyBit(8,s,n);for(let s=t-8;s<t;s++)n=this.copyBit(s,8,n);if(this.parsedFormatInfo=nt.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return J.getVersionForNumber(t);let n=0;const r=e-11;for(let o=5;o>=0;o--)for(let c=e-9;c>=r;c--)n=this.copyBit(c,o,n);let s=J.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(let o=5;o>=0;o--)for(let c=e-9;c>=r;c--)n=this.copyBit(o,c,n);if(s=J.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new k}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Ct.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const s=t.buildFunctionPattern();let o=!0;const c=new Uint8Array(t.getTotalCodewords());let u=0,h=0,x=0;for(let A=r-1;A>0;A-=2){A===6&&A--;for(let m=0;m<r;m++){const y=o?r-1-m:m;for(let S=0;S<2;S++)s.get(A-S,y)||(x++,h<<=1,this.bitMatrix.get(A-S,y)&&(h|=1),x===8&&(c[u++]=h,x=0,h=0))}o=!o}if(u!==t.getTotalCodewords())throw new k;return c}remask(){if(this.parsedFormatInfo===null)return;const e=Ct.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,s=e.getHeight();r<s;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Ei{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new O;const r=t.getECBlocksForLevel(n);let s=0;const o=r.getECBlocks();for(const S of o)s+=S.getCount();const c=new Array(s);let u=0;for(const S of o)for(let T=0;T<S.getCount();T++){const N=S.getDataCodewords(),M=r.getECCodewordsPerBlock()+N;c[u++]=new Ei(N,new Uint8Array(M))}const h=c[0].codewords.length;let x=c.length-1;for(;x>=0&&c[x].codewords.length!==h;)x--;x++;const A=h-r.getECCodewordsPerBlock();let m=0;for(let S=0;S<A;S++)for(let T=0;T<u;T++)c[T].codewords[S]=e[m++];for(let S=x;S<u;S++)c[S].codewords[A]=e[m++];const y=c[0].codewords.length;for(let S=A;S<y;S++)for(let T=0;T<u;T++){const N=T<x?S:S+1;c[T].codewords[N]=e[m++]}return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var bt;(function(p){p[p.TERMINATOR=0]="TERMINATOR",p[p.NUMERIC=1]="NUMERIC",p[p.ALPHANUMERIC=2]="ALPHANUMERIC",p[p.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",p[p.BYTE=4]="BYTE",p[p.ECI=5]="ECI",p[p.KANJI=6]="KANJI",p[p.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",p[p.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",p[p.HANZI=9]="HANZI"})(bt||(bt={}));class te{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,te.FOR_BITS.set(r,this),te.FOR_VALUE.set(e,this)}static forBits(e){const t=te.FOR_BITS.get(e);if(t===void 0)throw new O;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof te))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}te.FOR_BITS=new Map,te.FOR_VALUE=new Map,te.TERMINATOR=new te(bt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),te.NUMERIC=new te(bt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),te.ALPHANUMERIC=new te(bt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),te.STRUCTURED_APPEND=new te(bt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),te.BYTE=new te(bt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),te.ECI=new te(bt.ECI,"ECI",Int32Array.from([0,0,0]),7),te.KANJI=new te(bt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),te.FNC1_FIRST_POSITION=new te(bt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),te.FNC1_SECOND_POSITION=new te(bt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),te.HANZI=new te(bt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ve{static decode(e,t,n,r){const s=new Ai(e);let o=new be;const c=new Array;let u=-1,h=-1;try{let x=null,A=!1,m;do{if(s.available()<4)m=te.TERMINATOR;else{const y=s.readBits(4);m=te.forBits(y)}switch(m){case te.TERMINATOR:break;case te.FNC1_FIRST_POSITION:case te.FNC1_SECOND_POSITION:A=!0;break;case te.STRUCTURED_APPEND:if(s.available()<16)throw new k;u=s.readBits(8),h=s.readBits(8);break;case te.ECI:const y=ve.parseECIValue(s);if(x=V.getCharacterSetECIByValue(y),x===null)throw new k;break;case te.HANZI:const S=s.readBits(4),T=s.readBits(m.getCharacterCountBits(t));S===ve.GB2312_SUBSET&&ve.decodeHanziSegment(s,o,T);break;default:const N=s.readBits(m.getCharacterCountBits(t));switch(m){case te.NUMERIC:ve.decodeNumericSegment(s,o,N);break;case te.ALPHANUMERIC:ve.decodeAlphanumericSegment(s,o,N,A);break;case te.BYTE:ve.decodeByteSegment(s,o,N,x,c,r);break;case te.KANJI:ve.decodeKanjiSegment(s,o,N);break;default:throw new k}break}}while(m!==te.TERMINATOR)}catch{throw new k}return new Gn(e,o.toString(),c.length===0?null:c,n===null?null:n.toString(),u,h)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new k;const r=new Uint8Array(2*n);let s=0;for(;n>0;){const o=e.readBits(13);let c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,r[s]=c>>8&255,r[s+1]=c&255,s+=2,n--}try{t.append(ct.decode(r,se.GB2312))}catch(o){throw new k(o)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new k;const r=new Uint8Array(2*n);let s=0;for(;n>0;){const o=e.readBits(13);let c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,r[s]=c>>8,r[s+1]=c,s+=2,n--}try{t.append(ct.decode(r,se.SHIFT_JIS))}catch(o){throw new k(o)}}static decodeByteSegment(e,t,n,r,s,o){if(8*n>e.available())throw new k;const c=new Uint8Array(n);for(let h=0;h<n;h++)c[h]=e.readBits(8);let u;r===null?u=se.guessEncoding(c,o):u=r.getName();try{t.append(ct.decode(c,u))}catch(h){throw new k(h)}s.push(c)}static toAlphaNumericChar(e){if(e>=ve.ALPHANUMERIC_CHARS.length)throw new k;return ve.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const s=t.length();for(;n>1;){if(e.available()<11)throw new k;const o=e.readBits(11);t.append(ve.toAlphaNumericChar(Math.floor(o/45))),t.append(ve.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new k;t.append(ve.toAlphaNumericChar(e.readBits(6)))}if(r)for(let o=s;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new k;const r=e.readBits(10);if(r>=1e3)throw new k;t.append(ve.toAlphaNumericChar(Math.floor(r/100))),t.append(ve.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(ve.toAlphaNumericChar(r%10)),n-=3}if(n===2){if(e.available()<7)throw new k;const r=e.readBits(7);if(r>=100)throw new k;t.append(ve.toAlphaNumericChar(Math.floor(r/10))),t.append(ve.toAlphaNumericChar(r%10))}else if(n===1){if(e.available()<4)throw new k;const r=e.readBits(4);if(r>=10)throw new k;t.append(ve.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new k}}ve.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ve.GB2312_SUBSET=1;class Gs{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class L1{constructor(){this.rsDecoder=new zn(pe.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(je.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new P1(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(s){r=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const s=this.decodeBitMatrixParser(n,t);return s.setOther(new Gs(!0)),s}catch(s){throw r!==null?r:s}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),s=e.readCodewords(),o=Ei.getDataBlocks(s,n,r);let c=0;for(const x of o)c+=x.getNumDataCodewords();const u=new Uint8Array(c);let h=0;for(const x of o){const A=x.getCodewords(),m=x.getNumDataCodewords();this.correctErrors(A,m);for(let y=0;y<m;y++)u[h++]=A[y]}return ve.decode(u,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Y}for(let r=0;r<t;r++)e[r]=n[r]}}class mi extends Q{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,s=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new mi(r,s,o)}}class yr{constructor(e,t,n,r,s,o,c){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=s,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,r=e+n,s=this.startY+t/2,o=new Int32Array(3),c=this.image;for(let u=0;u<t;u++){const h=s+(u&1?-Math.floor((u+1)/2):Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;let x=e;for(;x<r&&!c.get(x,h);)x++;let A=0;for(;x<r;){if(c.get(x,h))if(A===1)o[1]++;else if(A===2){if(this.foundPatternCross(o)){const m=this.handlePossibleCenter(o,h,x);if(m!==null)return m}o[0]=o[2],o[1]=1,o[2]=0,A=1}else o[++A]++;else A===1&&A++,o[A]++;x++}if(this.foundPatternCross(o)){const m=this.handlePossibleCenter(o,h,r);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new B}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const s=this.image,o=s.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;let u=e;for(;u>=0&&s.get(t,u)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&!s.get(t,u)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<o&&s.get(t,u)&&c[1]<=n;)c[1]++,u++;if(u===o||c[1]>n)return NaN;for(;u<o&&!s.get(t,u)&&c[2]<=n;)c[2]++,u++;if(c[2]>n)return NaN;const h=c[0]+c[1]+c[2];return 5*Math.abs(h-r)>=2*r?NaN:this.foundPatternCross(c)?yr.centerFromEnd(c,u):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],s=yr.centerFromEnd(e,n),o=this.crossCheckVertical(t,s,2*e[1],r);if(!isNaN(o)){const c=(e[0]+e[1]+e[2])/3;for(const h of this.possibleCenters)if(h.aboutEquals(c,o,s))return h.combineEstimate(o,s,c);const u=new mi(s,o,c);this.possibleCenters.push(u),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(u)}return null}}class Ci extends Q{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,s=(this.count*this.getX()+t)/r,o=(this.count*this.getY()+e)/r,c=(this.count*this.estimatedModuleSize+n)/r;return new Ci(s,o,c,r)}}class F1{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class qe{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(oe.TRY_HARDER)!==void 0,n=e!=null&&e.get(oe.PURE_BARCODE)!==void 0,r=this.image,s=r.getHeight(),o=r.getWidth();let c=Math.floor(3*s/(4*qe.MAX_MODULES));(c<qe.MIN_SKIP||t)&&(c=qe.MIN_SKIP);let u=!1;const h=new Int32Array(5);for(let A=c-1;A<s&&!u;A+=c){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;let m=0;for(let y=0;y<o;y++)if(r.get(y,A))(m&1)===1&&m++,h[m]++;else if(m&1)h[m]++;else if(m===4)if(qe.foundPatternCross(h)){if(this.handlePossibleCenter(h,A,y,n)===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{const T=this.findRowSkip();T>h[2]&&(A+=T-h[2]-c,y=o-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,m=3;continue}m=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,m=3;else h[++m]++;qe.foundPatternCross(h)&&this.handlePossibleCenter(h,A,o,n)===!0&&(c=h[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}const x=this.selectBestPatterns();return Q.orderBestPatterns(x),new F1(x)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let s=0;s<5;s++){const o=e[s];if(o===0)return!1;t+=o}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const s=this.getCrossCheckStateCount();let o=0;const c=this.image;for(;e>=o&&t>=o&&c.get(t-o,e-o);)s[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!c.get(t-o,e-o)&&s[1]<=n;)s[1]++,o++;if(e<o||t<o||s[1]>n)return!1;for(;e>=o&&t>=o&&c.get(t-o,e-o)&&s[0]<=n;)s[0]++,o++;if(s[0]>n)return!1;const u=c.getHeight(),h=c.getWidth();for(o=1;e+o<u&&t+o<h&&c.get(t+o,e+o);)s[2]++,o++;if(e+o>=u||t+o>=h)return!1;for(;e+o<u&&t+o<h&&!c.get(t+o,e+o)&&s[3]<n;)s[3]++,o++;if(e+o>=u||t+o>=h||s[3]>=n)return!1;for(;e+o<u&&t+o<h&&c.get(t+o,e+o)&&s[4]<n;)s[4]++,o++;if(s[4]>=n)return!1;const x=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(x-r)<2*r&&qe.foundPatternCross(s)}crossCheckVertical(e,t,n,r){const s=this.image,o=s.getHeight(),c=this.getCrossCheckStateCount();let u=e;for(;u>=0&&s.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!s.get(t,u)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&s.get(t,u)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<o&&s.get(t,u);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!s.get(t,u)&&c[3]<n;)c[3]++,u++;if(u===o||c[3]>=n)return NaN;for(;u<o&&s.get(t,u)&&c[4]<n;)c[4]++,u++;if(c[4]>=n)return NaN;const h=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(h-r)>=2*r?NaN:qe.foundPatternCross(c)?qe.centerFromEnd(c,u):NaN}crossCheckHorizontal(e,t,n,r){const s=this.image,o=s.getWidth(),c=this.getCrossCheckStateCount();let u=e;for(;u>=0&&s.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!s.get(u,t)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&s.get(u,t)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<o&&s.get(u,t);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!s.get(u,t)&&c[3]<n;)c[3]++,u++;if(u===o||c[3]>=n)return NaN;for(;u<o&&s.get(u,t)&&c[4]<n;)c[4]++,u++;if(c[4]>=n)return NaN;const h=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(h-r)>=r?NaN:qe.foundPatternCross(c)?qe.centerFromEnd(c,u):NaN}handlePossibleCenter(e,t,n,r){const s=e[0]+e[1]+e[2]+e[3]+e[4];let o=qe.centerFromEnd(e,n),c=this.crossCheckVertical(t,Math.floor(o),e[2],s);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],s),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],s)))){const u=s/7;let h=!1;const x=this.possibleCenters;for(let A=0,m=x.length;A<m;A++){const y=x[A];if(y.aboutEquals(u,c,o)){x[A]=y.combineEstimate(c,o,u),h=!0;break}}if(!h){const A=new Ci(o,c,u);x.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=qe.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=qe.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let s=0;for(const o of this.possibleCenters)s+=Math.abs(o.getEstimatedModuleSize()-r);return s<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new B;const t=this.possibleCenters;let n;if(e>3){let r=0,s=0;for(const u of this.possibleCenters){const h=u.getEstimatedModuleSize();r+=h,s+=h*h}n=r/e;let o=Math.sqrt(s/e-n*n);t.sort((u,h)=>{const x=Math.abs(h.getEstimatedModuleSize()-n),A=Math.abs(u.getEstimatedModuleSize()-n);return x<A?-1:x>A?1:0});const c=Math.max(.2*n,o);for(let u=0;u<t.length&&t.length>3;u++){const h=t[u];Math.abs(h.getEstimatedModuleSize()-n)>c&&(t.splice(u,1),u--)}}if(t.length>3){let r=0;for(const s of t)r+=s.getEstimatedModuleSize();n=r/t.length,t.sort((s,o)=>{if(o.getCount()===s.getCount()){const c=Math.abs(o.getEstimatedModuleSize()-n),u=Math.abs(s.getEstimatedModuleSize()-n);return c<u?1:c>u?-1:0}else return o.getCount()-s.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}qe.CENTER_QUORUM=2,qe.MIN_SKIP=3,qe.MAX_MODULES=57;class Yn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(oe.NEED_RESULT_POINT_CALLBACK);const n=new qe(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),s=this.calculateModuleSize(t,n,r);if(s<1)throw new B("No pattern found in proccess finder.");const o=Yn.computeDimension(t,n,r,s),c=J.getProvisionalVersionForDimension(o),u=c.getDimensionForVersion()-7;let h=null;if(c.getAlignmentPatternCenters().length>0){const y=n.getX()-t.getX()+r.getX(),S=n.getY()-t.getY()+r.getY(),T=1-3/u,N=Math.floor(t.getX()+T*(y-t.getX())),M=Math.floor(t.getY()+T*(S-t.getY()));for(let U=4;U<=16;U<<=1)try{h=this.findAlignmentInRegion(s,N,M,U);break}catch(H){if(!(H instanceof B))throw H}}const x=Yn.createTransform(t,n,r,h,o),A=Yn.sampleGrid(this.image,x,o);let m;return h===null?m=[r,t,n]:m=[r,t,n,h],new Ar(A,m)}static createTransform(e,t,n,r,s){const o=s-3.5;let c,u,h,x;return r!==null?(c=r.getX(),u=r.getY(),h=o-3,x=h):(c=t.getX()-e.getX()+n.getX(),u=t.getY()-e.getY()+n.getY(),h=o,x=o),It.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,h,x,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),c,u,n.getX(),n.getY())}static sampleGrid(e,t,n){return jt.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const s=xe.round(Q.distance(e,t)/r),o=xe.round(Q.distance(e,n)/r);let c=Math.floor((s+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new B("Dimensions could be not found.")}return c}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let s=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,c=e-(n-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);let u=Math.floor(t-(r-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),s-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const s=Math.abs(r-t)>Math.abs(n-e);if(s){let y=e;e=t,t=y,y=n,n=r,r=y}const o=Math.abs(n-e),c=Math.abs(r-t);let u=-o/2;const h=e<n?1:-1,x=t<r?1:-1;let A=0;const m=n+h;for(let y=e,S=t;y!==m;y+=h){const T=s?S:y,N=s?y:S;if(A===1===this.image.get(T,N)){if(A===2)return xe.distance(y,S,e,t);A++}if(u+=c,u>0){if(S===r)break;S+=x,u-=o}}return A===2?xe.distance(n+h,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const s=Math.floor(r*e),o=Math.max(0,t-s),c=Math.min(this.image.getWidth()-1,t+s);if(c-o<e*3)throw new B("Alignment top exceeds estimated module size.");const u=Math.max(0,n-s),h=Math.min(this.image.getHeight()-1,n+s);if(h-u<e*3)throw new B("Alignment bottom exceeds estimated module size.");return new yr(this.image,o,u,c-o,h-u,e,this.resultPointCallback).find()}}class qt{constructor(){this.decoder=new L1}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(oe.PURE_BARCODE)!==void 0){const u=qt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(u,t),r=qt.NO_POINTS}else{const u=new Yn(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(u.getBits(),t),r=u.getPoints()}n.getOther()instanceof Gs&&n.getOther().applyMirroredCorrection(r);const s=new st(n.getText(),n.getRawBytes(),void 0,r,ne.QR_CODE,void 0),o=n.getByteSegments();o!==null&&s.putMetadata(Ze.BYTE_SEGMENTS,o);const c=n.getECLevel();return c!==null&&s.putMetadata(Ze.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(s.putMetadata(Ze.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Ze.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new B;const r=this.moduleSize(t,e);let s=t[1],o=n[1],c=t[0],u=n[0];if(c>=u||s>=o)throw new B;if(o-s!==u-c&&(u=c+(o-s),u>=e.getWidth()))throw new B;const h=Math.round((u-c+1)/r),x=Math.round((o-s+1)/r);if(h<=0||x<=0)throw new B;if(x!==h)throw new B;const A=Math.floor(r/2);s+=A,c+=A;const m=c+Math.floor((h-1)*r)-u;if(m>0){if(m>A)throw new B;c-=m}const y=s+Math.floor((x-1)*r)-o;if(y>0){if(y>A)throw new B;s-=y}const S=new je(h,x);for(let T=0;T<x;T++){const N=s+Math.floor(T*r);for(let M=0;M<h;M++)e.get(c+Math.floor(M*r),N)&&S.set(M,T)}return S}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let s=e[0],o=e[1],c=!0,u=0;for(;s<r&&o<n;){if(c!==t.get(s,o)){if(++u===5)break;c=!c}s++,o++}if(s===r||o===n)throw new B;return(s-e[0])/7}}qt.NO_POINTS=new Array;class ie{PDF417Common(){}static getBitCountSum(e){return xe.sum(e)}static toIntArray(e){if(e==null||!e.length)return ie.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=Z.binarySearch(ie.SYMBOL_TABLE,e&262143);return t<0?-1:(ie.CODEWORD_TABLE[t]-1)%ie.NUMBER_OF_CODEWORDS}}ie.NUMBER_OF_CODEWORDS=929,ie.MAX_CODEWORDS_IN_BARCODE=ie.NUMBER_OF_CODEWORDS-1,ie.MIN_ROWS_IN_BARCODE=3,ie.MAX_ROWS_IN_BARCODE=90,ie.MODULES_IN_CODEWORD=17,ie.MODULES_IN_STOP_PATTERN=18,ie.BARS_IN_MODULE=8,ie.EMPTY_INT_ARRAY=new Int32Array([]),ie.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ie.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class k1{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ue{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),s=ue.detect(n,r);return s.length||(r=r.clone(),r.rotate180(),s=ue.detect(n,r)),new k1(r,s)}static detect(e,t){const n=new Array;let r=0,s=0,o=!1;for(;r<t.getHeight();){const c=ue.findVertices(t,r,s);if(c[0]==null&&c[3]==null){if(!o)break;o=!1,s=0;for(const u of n)u[1]!=null&&(r=Math.trunc(Math.max(r,u[1].getY()))),u[3]!=null&&(r=Math.max(r,Math.trunc(u[3].getY())));r+=ue.ROW_STEP;continue}if(o=!0,n.push(c),!e)break;c[2]!=null?(s=Math.trunc(c[2].getX()),r=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),r=Math.trunc(c[4].getY()))}return n}static findVertices(e,t,n){const r=e.getHeight(),s=e.getWidth(),o=new Array(8);return ue.copyToResult(o,ue.findRowsWithPattern(e,r,s,t,n,ue.START_PATTERN),ue.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),ue.copyToResult(o,ue.findRowsWithPattern(e,r,s,t,n,ue.STOP_PATTERN),ue.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,s,o){const c=new Array(4);let u=!1;const h=new Int32Array(o.length);for(;r<t;r+=ue.ROW_STEP){let A=ue.findGuardPattern(e,s,r,n,!1,o,h);if(A!=null){for(;r>0;){const m=ue.findGuardPattern(e,s,--r,n,!1,o,h);if(m!=null)A=m;else{r++;break}}c[0]=new Q(A[0],r),c[1]=new Q(A[1],r),u=!0;break}}let x=r+1;if(u){let A=0,m=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);for(;x<t;x++){const y=ue.findGuardPattern(e,m[0],x,n,!1,o,h);if(y!=null&&Math.abs(m[0]-y[0])<ue.MAX_PATTERN_DRIFT&&Math.abs(m[1]-y[1])<ue.MAX_PATTERN_DRIFT)m=y,A=0;else{if(A>ue.SKIPPED_ROW_COUNT_MAX)break;A++}}x-=A+1,c[2]=new Q(m[0],x),c[3]=new Q(m[1],x)}return x-r<ue.BARCODE_MIN_HEIGHT&&Z.fill(c,null),c}static findGuardPattern(e,t,n,r,s,o,c){Z.fillWithin(c,0,c.length,0);let u=t,h=0;for(;e.get(u,n)&&u>0&&h++<ue.MAX_PIXEL_DRIFT;)u--;let x=u,A=0,m=o.length;for(let y=s;x<r;x++)if(e.get(x,n)!==y)c[A]++;else{if(A===m-1){if(ue.patternMatchVariance(c,o,ue.MAX_INDIVIDUAL_VARIANCE)<ue.MAX_AVG_VARIANCE)return new Int32Array([u,x]);u+=c[0]+c[1],X.arraycopy(c,2,c,0,A-1),c[A-1]=0,c[A]=0,A--}else A++;c[A]=1,y=!y}return A===m-1&&ue.patternMatchVariance(c,o,ue.MAX_INDIVIDUAL_VARIANCE)<ue.MAX_AVG_VARIANCE?new Int32Array([u,x-1]):null}static patternMatchVariance(e,t,n){let r=e.length,s=0,o=0;for(let h=0;h<r;h++)s+=e[h],o+=t[h];if(s<o)return 1/0;let c=s/o;n*=c;let u=0;for(let h=0;h<r;h++){let x=e[h],A=t[h]*c,m=x>A?x-A:A-x;if(m>n)return 1/0;u+=m}return u/s}}ue.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ue.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ue.MAX_AVG_VARIANCE=.42,ue.MAX_INDIVIDUAL_VARIANCE=.8,ue.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ue.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ue.MAX_PIXEL_DRIFT=3,ue.MAX_PATTERN_DRIFT=5,ue.SKIPPED_ROW_COUNT_MAX=25,ue.ROW_STEP=5,ue.BARCODE_MIN_HEIGHT=10;class Je{constructor(e,t){if(t.length===0)throw new O;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),X.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let s of this.coefficients)r=this.field.add(r,s);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let o=t;t=n,n=o}let r=new Int32Array(n.length),s=n.length-t.length;X.arraycopy(n,0,r,0,s);for(let o=s;o<n.length;o++)r[o]=this.field.add(t[o-s],n[o]);return new Je(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Je?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Je(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,s=r.length,o=new Int32Array(n+s-1);for(let c=0;c<n;c++){let u=t[c];for(let h=0;h<s;h++)o[c+h]=this.field.add(o[c+h],this.field.multiply(u,r[h]))}return new Je(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Je(this.field,t)}multiplyScalar(e){if(e===0)return new Je(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Je(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new O;if(t===0)return new Je(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let s=0;s<n;s++)r[s]=this.field.multiply(this.coefficients[s],t);return new Je(this.field,r)}toString(){let e=new be;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class U1{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new O;return this.logTable[e]}inverse(e){if(e===0)throw new wr;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class bi extends U1{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Je(this,new Int32Array([0])),this.one=new Je(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new O;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Je(this,n)}}bi.PDF417_GF=new bi(ie.NUMBER_OF_CODEWORDS,3);class Xs{constructor(){this.field=bi.PDF417_GF}decode(e,t,n){let r=new Je(this.field,e),s=new Int32Array(t),o=!1;for(let S=t;S>0;S--){let T=r.evaluateAt(this.field.exp(S));s[t-S]=T,T!==0&&(o=!0)}if(!o)return 0;let c=this.field.getOne();if(n!=null)for(const S of n){let T=this.field.exp(e.length-1-S),N=new Je(this.field,new Int32Array([this.field.subtract(0,T),1]));c=c.multiply(N)}let u=new Je(this.field,s),h=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),u,t),x=h[0],A=h[1],m=this.findErrorLocations(x),y=this.findErrorMagnitudes(A,x,m);for(let S=0;S<m.length;S++){let T=e.length-1-this.field.log(m[S]);if(T<0)throw Y.getChecksumInstance();e[T]=this.field.subtract(e[T],y[S])}return m.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let m=e;e=t,t=m}let r=e,s=t,o=this.field.getZero(),c=this.field.getOne();for(;s.getDegree()>=Math.round(n/2);){let m=r,y=o;if(r=s,o=c,r.isZero())throw Y.getChecksumInstance();s=m;let S=this.field.getZero(),T=r.getCoefficient(r.getDegree()),N=this.field.inverse(T);for(;s.getDegree()>=r.getDegree()&&!s.isZero();){let M=s.getDegree()-r.getDegree(),U=this.field.multiply(s.getCoefficient(s.getDegree()),N);S=S.add(this.field.buildMonomial(M,U)),s=s.subtract(r.multiplyByMonomial(M,U))}c=S.multiply(o).subtract(y).negative()}let u=c.getCoefficient(0);if(u===0)throw Y.getChecksumInstance();let h=this.field.inverse(u),x=c.multiply(h),A=s.multiply(h);return[x,A]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let s=1;s<this.field.getSize()&&r<t;s++)e.evaluateAt(s)===0&&(n[r]=this.field.inverse(s),r++);if(r!==t)throw Y.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),s=new Int32Array(r);for(let h=1;h<=r;h++)s[r-h]=this.field.multiply(h,t.getCoefficient(h));let o=new Je(this.field,s),c=n.length,u=new Int32Array(c);for(let h=0;h<c;h++){let x=this.field.inverse(n[h]),A=this.field.subtract(0,e.evaluateAt(x)),m=this.field.inverse(o.evaluateAt(x));u[h]=this.field.multiply(A,m)}return u}}class ln{constructor(e,t,n,r,s){e instanceof ln?this.constructor_2(e):this.constructor_1(e,t,n,r,s)}constructor_1(e,t,n,r,s){const o=t==null||n==null,c=r==null||s==null;if(o&&c)throw new B;o?(t=new Q(0,r.getY()),n=new Q(0,s.getY())):c&&(r=new Q(e.getWidth()-1,t.getY()),s=new Q(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=s,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),s.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new ln(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,s=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){let u=n?this.topLeft:this.topRight,h=Math.trunc(u.getY()-e);h<0&&(h=0);let x=new Q(u.getX(),h);n?r=x:o=x}if(t>0){let u=n?this.bottomLeft:this.bottomRight,h=Math.trunc(u.getY()+t);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);let x=new Q(u.getX(),h);n?s=x:c=x}return new ln(this.image,r,s,o,c)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class V1{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Zn{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(o,c,u,h,x,A){if(o==="%%")return"%";if(t[++n]===void 0)return;o=h?parseInt(h.substr(1)):void 0;let m=x?parseInt(x.substr(1)):void 0,y;switch(A){case"s":y=t[n];break;case"c":y=t[n][0];break;case"f":y=parseFloat(t[n]).toFixed(o);break;case"p":y=parseFloat(t[n]).toPrecision(o);break;case"e":y=parseFloat(t[n]).toExponential(o);break;case"x":y=parseInt(t[n]).toString(m||16);break;case"d":y=parseFloat(parseInt(t[n],m||10).toPrecision(o)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(m);let S=parseInt(u),T=u&&u[0]+""=="0"?"0":" ";for(;y.length<S;)y=c!==void 0?y+T:T+y;return y}let s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,r)}format(e,...t){this.buffer+=Zn.form(e,t)}toString(){return this.buffer}}class Kn{constructor(e){this.boundingBox=new ln(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<Kn.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],t!=null)||(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Zn;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}Kn.MAX_NEARBY_DISTANCE=5;class qn{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const s={getKey:()=>n,getValue:()=>r};s.getValue()>e?(e=s.getValue(),t=[],t.push(s.getKey())):s.getValue()===e&&t.push(s.getKey())}return ie.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class zs extends Kn{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,h=1,x=0;for(let A=o;A<c;A++){if(t[A]==null)continue;let m=t[A],y=m.getRowNumber()-u;if(y===0)x++;else if(y===1)h=Math.max(h,x),x=1,u=m.getRowNumber();else if(y<0||m.getRowNumber()>=e.getRowCount()||y>A)t[A]=null;else{let S;h>2?S=(h-2)*y:S=y;let T=S>=A;for(let N=1;N<=S&&!T;N++)T=t[A-N]!=null;T?t[A]=null:(u=m.getRowNumber(),x=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),c=this.getCodewords(),u=-1;for(let h=s;h<o;h++){if(c[h]==null)continue;let x=c[h];x.setRowNumberAsRowIndicatorColumn();let A=x.getRowNumber()-u;A===0||(A===1?u=x.getRowNumber():x.getRowNumber()>=e.getRowCount()?c[h]=null:u=x.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new qn,n=new qn,r=new qn,s=new qn;for(let c of e){if(c==null)continue;c.setRowNumberAsRowIndicatorColumn();let u=c.getValue()%30,h=c.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:n.setValue(u*3+1);break;case 1:s.setValue(u/3),r.setValue(u%3);break;case 2:t.setValue(u+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||s.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<ie.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>ie.MAX_ROWS_IN_BARCODE)return null;let o=new V1(t.getValue()[0],n.getValue()[0],r.getValue()[0],s.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let s=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:s*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(s/3)!==t.getErrorCorrectionLevel()||s%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:s+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qn{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ie.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let s=this.detectionResultColumns[r].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),s=0;for(let o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){let c=this.detectionResultColumns[o].getCodewords()[n];c!=null&&(s=Qn.adjustRowNumberIfValid(r,s,c),c.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),s=0;for(let o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){let c=this.detectionResultColumns[o].getCodewords()[n];c!=null&&(s=Qn.adjustRowNumberIfValid(r,s,c),c.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],s=this.detectionResultColumns[e-1].getCodewords(),o=s;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let c=new Array(14);c[2]=s[t],c[3]=o[t],t>0&&(c[0]=n[t-1],c[4]=s[t-1],c[5]=o[t-1]),t>1&&(c[8]=n[t-2],c[10]=s[t-2],c[11]=o[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=s[t+1],c[7]=o[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=s[t+2],c[13]=o[t+2]);for(let u of c)if(Qn.adjustRowNumber(r,u))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Zn;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let s=this.detectionResultColumns[r].getCodewords()[n];if(s==null){t.format("    |   ");continue}t.format(" %3d|%3d",s.getRowNumber(),s.getValue())}t.format("%n")}return t.toString()}}class Jn{constructor(e,t,n,r){this.rowNumber=Jn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Jn.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Jn.BARCODE_ROW_UNKNOWN=-1;class dt{static initialize(){for(let e=0;e<ie.SYMBOL_TABLE.length;e++){let t=ie.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<ie.BARS_IN_MODULE;r++){let s=0;for(;(t&1)===n;)s+=1,t>>=1;n=t&1,dt.RATIOS_TABLE[e]||(dt.RATIOS_TABLE[e]=new Array(ie.BARS_IN_MODULE)),dt.RATIOS_TABLE[e][ie.BARS_IN_MODULE-r-1]=Math.fround(s/ie.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=dt.getDecodedCodewordValue(dt.sampleBitCounts(e));return t!==-1?t:dt.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=xe.sum(e),n=new Int32Array(ie.BARS_IN_MODULE),r=0,s=0;for(let o=0;o<ie.MODULES_IN_CODEWORD;o++){let c=t/(2*ie.MODULES_IN_CODEWORD)+o*t/ie.MODULES_IN_CODEWORD;s+e[r]<=c&&(s+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=dt.getBitValue(e);return ie.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=xe.sum(e),n=new Array(ie.BARS_IN_MODULE);if(t>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/t);let r=pr.MAX_VALUE,s=-1;this.bSymbolTableReady||dt.initialize();for(let o=0;o<dt.RATIOS_TABLE.length;o++){let c=0,u=dt.RATIOS_TABLE[o];for(let h=0;h<ie.BARS_IN_MODULE;h++){let x=Math.fround(u[h]-n[h]);if(c+=Math.fround(x*x),c>=r)break}c<r&&(r=c,s=ie.SYMBOL_TABLE[o])}return s}}dt.bSymbolTableReady=!1,dt.RATIOS_TABLE=new Array(ie.SYMBOL_TABLE.length).map(p=>new Array(ie.BARS_IN_MODULE));class js{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Ys{static parseLong(e,t=void 0){return parseInt(e,t)}}class Zs extends E{}Zs.kind="NullPointerException";class H1{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new Zs;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new P;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class W1 extends E{}class G1 extends H1{constructor(e=32){if(super(),this.count=0,e<0)throw new O("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new W1;n=G.MAX_VALUE}this.buf=Z.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new P;this.ensureCapacity(this.count+n),X.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var ye;(function(p){p[p.ALPHA=0]="ALPHA",p[p.LOWER=1]="LOWER",p[p.MIXED=2]="MIXED",p[p.PUNCT=3]="PUNCT",p[p.ALPHA_SHIFT=4]="ALPHA_SHIFT",p[p.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ye||(ye={}));function Ks(){if(typeof window<"u")return window.BigInt||null;if(typeof Br<"u")return Br.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let _r;function Qt(p){if(typeof _r>"u"&&(_r=Ks()),_r===null)throw new Error("BigInt is not supported!");return _r(p)}function X1(){let p=[];p[0]=Qt(1);let e=Qt(900);p[1]=e;for(let t=2;t<16;t++)p[t]=p[t-1]*e;return p}class D{static decode(e,t){let n=new be(""),r=V.ISO8859_1;n.enableDecoding(r);let s=1,o=e[s++],c=new js;for(;s<e[0];){switch(o){case D.TEXT_COMPACTION_MODE_LATCH:s=D.textCompaction(e,s,n);break;case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:s=D.byteCompaction(o,e,r,s,n);break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case D.NUMERIC_COMPACTION_MODE_LATCH:s=D.numericCompaction(e,s,n);break;case D.ECI_CHARSET:V.getCharacterSetECIByValue(e[s++]);break;case D.ECI_GENERAL_PURPOSE:s+=2;break;case D.ECI_USER_DEFINED:s++;break;case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=D.decodeMacroBlock(e,s,c);break;case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:throw new k;default:s--,s=D.textCompaction(e,s,n);break}if(s<e.length)o=e[s++];else throw k.getFormatInstance()}if(n.length()===0)throw k.getFormatInstance();let u=new Gn(null,n.toString(),null,t);return u.setOther(c),u}static decodeMacroBlock(e,t,n){if(t+D.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw k.getFormatInstance();let r=new Int32Array(D.NUMBER_OF_SEQUENCE_CODEWORDS);for(let c=0;c<D.NUMBER_OF_SEQUENCE_CODEWORDS;c++,t++)r[c]=e[t];n.setSegmentIndex(G.parseInt(D.decodeBase900toBase10(r,D.NUMBER_OF_SEQUENCE_CODEWORDS)));let s=new be;t=D.textCompaction(e,t,s),n.setFileId(s.toString());let o=-1;for(e[t]===D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case D.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let c=new be;t=D.textCompaction(e,t+1,c),n.setFileName(c.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let u=new be;t=D.textCompaction(e,t+1,u),n.setSender(u.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let h=new be;t=D.textCompaction(e,t+1,h),n.setAddressee(h.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new be;t=D.numericCompaction(e,t+1,x),n.setSegmentCount(G.parseInt(x.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let A=new be;t=D.numericCompaction(e,t+1,A),n.setTimestamp(Ys.parseLong(A.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let m=new be;t=D.numericCompaction(e,t+1,m),n.setChecksum(G.parseInt(m.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let y=new be;t=D.numericCompaction(e,t+1,y),n.setFileSize(Ys.parseLong(y.toString()));break;default:throw k.getFormatInstance()}break;case D.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(o!==-1){let c=t-o;n.isLastSegment()&&c--,n.setOptionalData(Z.copyOfRange(e,o,o+c))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),s=new Int32Array((e[0]-t)*2),o=0,c=!1;for(;t<e[0]&&!c;){let u=e[t++];if(u<D.TEXT_COMPACTION_MODE_LATCH)r[o]=u/30,r[o+1]=u%30,o+=2;else switch(u){case D.TEXT_COMPACTION_MODE_LATCH:r[o++]=D.TEXT_COMPACTION_MODE_LATCH;break;case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],s[o]=u,o++;break}}return D.decodeTextCompaction(r,s,o,n),t}static decodeTextCompaction(e,t,n,r){let s=ye.ALPHA,o=ye.ALPHA,c=0;for(;c<n;){let u=e[c],h="";switch(s){case ye.ALPHA:if(u<26)h=String.fromCharCode(65+u);else switch(u){case 26:h=" ";break;case D.LL:s=ye.LOWER;break;case D.ML:s=ye.MIXED;break;case D.PS:o=s,s=ye.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:s=ye.ALPHA;break}break;case ye.LOWER:if(u<26)h=String.fromCharCode(97+u);else switch(u){case 26:h=" ";break;case D.AS:o=s,s=ye.ALPHA_SHIFT;break;case D.ML:s=ye.MIXED;break;case D.PS:o=s,s=ye.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:s=ye.ALPHA;break}break;case ye.MIXED:if(u<D.PL)h=D.MIXED_CHARS[u];else switch(u){case D.PL:s=ye.PUNCT;break;case 26:h=" ";break;case D.LL:s=ye.LOWER;break;case D.AL:s=ye.ALPHA;break;case D.PS:o=s,s=ye.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:s=ye.ALPHA;break}break;case ye.PUNCT:if(u<D.PAL)h=D.PUNCT_CHARS[u];else switch(u){case D.PAL:s=ye.ALPHA;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:s=ye.ALPHA;break}break;case ye.ALPHA_SHIFT:if(s=o,u<26)h=String.fromCharCode(65+u);else switch(u){case 26:h=" ";break;case D.TEXT_COMPACTION_MODE_LATCH:s=ye.ALPHA;break}break;case ye.PUNCT_SHIFT:if(s=o,u<D.PAL)h=D.PUNCT_CHARS[u];else switch(u){case D.PAL:s=ye.ALPHA;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:s=ye.ALPHA;break}break}h!==""&&r.append(h),c++}}static byteCompaction(e,t,n,r,s){let o=new G1,c=0,u=0,h=!1;switch(e){case D.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),A=t[r++];for(;r<t[0]&&!h;)switch(x[c++]=A,u=900*u+A,A=t[r++],A){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:r--,h=!0;break;default:if(c%5===0&&c>0){for(let m=0;m<6;++m)o.write(Number(Qt(u)>>Qt(8*(5-m))));u=0,c=0}break}r===t[0]&&A<D.TEXT_COMPACTION_MODE_LATCH&&(x[c++]=A);for(let m=0;m<c;m++)o.write(x[m]);break;case D.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!h;){let m=t[r++];if(m<D.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+m;else switch(m){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:r--,h=!0;break}if(c%5===0&&c>0){for(let y=0;y<6;++y)o.write(Number(Qt(u)>>Qt(8*(5-y))));u=0,c=0}}break}return s.append(ct.decode(o.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,s=!1,o=new Int32Array(D.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!s;){let c=e[t++];if(t===e[0]&&(s=!0),c<D.TEXT_COMPACTION_MODE_LATCH)o[r]=c,r++;else switch(c){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:t--,s=!0;break}(r%D.MAX_NUMERIC_CODEWORDS===0||c===D.NUMERIC_COMPACTION_MODE_LATCH||s)&&r>0&&(n.append(D.decodeBase900toBase10(o,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=Qt(0);for(let s=0;s<t;s++)n+=D.EXP900[t-s-1]*Qt(e[s]);let r=n.toString();if(r.charAt(0)!=="1")throw new k;return r.substring(1)}}D.TEXT_COMPACTION_MODE_LATCH=900,D.BYTE_COMPACTION_MODE_LATCH=901,D.NUMERIC_COMPACTION_MODE_LATCH=902,D.BYTE_COMPACTION_MODE_LATCH_6=924,D.ECI_USER_DEFINED=925,D.ECI_GENERAL_PURPOSE=926,D.ECI_CHARSET=927,D.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,D.MACRO_PDF417_TERMINATOR=922,D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,D.MAX_NUMERIC_CODEWORDS=15,D.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,D.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,D.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,D.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,D.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,D.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,D.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,D.PL=25,D.LL=27,D.AS=27,D.ML=28,D.AL=28,D.PS=29,D.PAL=29,D.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,D.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",D.EXP900=Ks()?X1():[],D.NUMBER_OF_SEQUENCE_CODEWORDS=2;class fe{constructor(){}static decode(e,t,n,r,s,o,c){let u=new ln(e,t,n,r,s),h=null,x=null,A;for(let S=!0;;S=!1){if(t!=null&&(h=fe.getRowIndicatorColumn(e,u,t,!0,o,c)),r!=null&&(x=fe.getRowIndicatorColumn(e,u,r,!1,o,c)),A=fe.merge(h,x),A==null)throw B.getNotFoundInstance();let T=A.getBoundingBox();if(S&&T!=null&&(T.getMinY()<u.getMinY()||T.getMaxY()>u.getMaxY()))u=T;else break}A.setBoundingBox(u);let m=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,h),A.setDetectionResultColumn(m,x);let y=h!=null;for(let S=1;S<=m;S++){let T=y?S:m-S;if(A.getDetectionResultColumn(T)!==void 0)continue;let N;T===0||T===m?N=new zs(u,T===0):N=new Kn(u),A.setDetectionResultColumn(T,N);let M=-1,U=M;for(let H=u.getMinY();H<=u.getMaxY();H++){if(M=fe.getStartColumn(A,T,H,y),M<0||M>u.getMaxX()){if(U===-1)continue;M=U}let F=fe.detectCodeword(e,u.getMinX(),u.getMaxX(),y,M,H,o,c);F!=null&&(N.setCodeword(H,F),U=M,o=Math.min(o,F.getWidth()),c=Math.max(c,F.getWidth()))}}return fe.createDecoderResult(A)}static merge(e,t){if(e==null&&t==null)return null;let n=fe.getBarcodeMetadata(e,t);if(n==null)return null;let r=ln.merge(fe.adjustBoundingBox(e),fe.adjustBoundingBox(t));return new Qn(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=fe.getMax(t),r=0;for(let c of t)if(r+=n-c,c>0)break;let s=e.getCodewords();for(let c=0;r>0&&s[c]==null;c++)r--;let o=0;for(let c=t.length-1;c>=0&&(o+=n-t[c],!(t[c]>0));c--);for(let c=s.length-1;o>0&&s[c]==null;c--)o--;return e.getBoundingBox().addMissingRows(r,o,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,s,o){let c=new zs(t,r);for(let u=0;u<2;u++){let h=u===0?1:-1,x=Math.trunc(Math.trunc(n.getX()));for(let A=Math.trunc(Math.trunc(n.getY()));A<=t.getMaxY()&&A>=t.getMinY();A+=h){let m=fe.detectCodeword(e,0,e.getWidth(),r,x,A,s,o);m!=null&&(c.setCodeword(A,m),r?x=m.getStartX():x=m.getEndX())}}return c}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-fe.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(s<1||s>ie.MAX_CODEWORDS_IN_BARCODE)throw B.getNotFoundInstance();n.setValue(s)}else r[0]!==s&&n.setValue(s)}static createDecoderResult(e){let t=fe.createBarcodeMatrix(e);fe.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array;for(let u=0;u<e.getBarcodeRowCount();u++)for(let h=0;h<e.getBarcodeColumnCount();h++){let x=t[u][h+1].getValue(),A=u*e.getBarcodeColumnCount()+h;x.length===0?n.push(A):x.length===1?r[A]=x[0]:(o.push(A),s.push(x))}let c=new Array(s.length);for(let u=0;u<c.length;u++)c[u]=s[u];return fe.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,ie.toIntArray(n),ie.toIntArray(o),c)}static createDecoderResultFromAmbiguousValues(e,t,n,r,s){let o=new Int32Array(r.length),c=100;for(;c-- >0;){for(let u=0;u<o.length;u++)t[r[u]]=s[u][o[u]];try{return fe.decodeCodewords(t,e,n)}catch(u){if(!(u instanceof Y))throw u}if(o.length===0)throw Y.getChecksumInstance();for(let u=0;u<o.length;u++)if(o[u]<s[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw Y.getChecksumInstance()}throw Y.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let s=0;s<t[r].length;s++)t[r][s]=new qn;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let s of r.getCodewords())if(s!=null){let o=s.getRowNumber();if(o>=0){if(o>=t.length)continue;t[o][n].setValue(s.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let s=r?1:-1,o=null;if(fe.isValidBarcodeColumn(e,t-s)&&(o=e.getDetectionResultColumn(t-s).getCodeword(n)),o!=null)return r?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(n),o!=null)return r?o.getStartX():o.getEndX();if(fe.isValidBarcodeColumn(e,t-s)&&(o=e.getDetectionResultColumn(t-s).getCodewordNearby(n)),o!=null)return r?o.getEndX():o.getStartX();let c=0;for(;fe.isValidBarcodeColumn(e,t-s);){t-=s;for(let u of e.getDetectionResultColumn(t).getCodewords())if(u!=null)return(r?u.getEndX():u.getStartX())+s*c*(u.getEndX()-u.getStartX());c++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,s,o,c,u){s=fe.adjustCodewordStartColumn(e,t,n,r,s,o);let h=fe.getModuleBitCount(e,t,n,r,s,o);if(h==null)return null;let x,A=xe.sum(h);if(r)x=s+A;else{for(let S=0;S<h.length/2;S++){let T=h[S];h[S]=h[h.length-1-S],h[h.length-1-S]=T}x=s,s=x-A}if(!fe.checkCodewordSkew(A,c,u))return null;let m=dt.getDecodedValue(h),y=ie.getCodeword(m);return y===-1?null:new Jn(s,x,fe.getCodewordBucketNumber(m),y)}static getModuleBitCount(e,t,n,r,s,o){let c=s,u=new Int32Array(8),h=0,x=r?1:-1,A=r;for(;(r?c<n:c>=t)&&h<u.length;)e.get(c,o)===A?(u[h]++,c+=x):(h++,A=!A);return h===u.length||c===(r?n:t)&&h===u.length-1?u:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,s,o){let c=s,u=r?-1:1;for(let h=0;h<2;h++){for(;(r?c>=t:c<n)&&r===e.get(c,o);){if(Math.abs(s-c)>fe.CODEWORD_SKEW_SIZE)return s;c+=u}u=-u,r=!r}return c}static checkCodewordSkew(e,t,n){return t-fe.CODEWORD_SKEW_SIZE<=e&&e<=n+fe.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw k.getFormatInstance();let r=1<<t+1,s=fe.correctErrors(e,n,r);fe.verifyCodewordCount(e,r);let o=D.decode(e,""+t);return o.setErrorsCorrected(s),o.setErasures(n.length),o}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+fe.MAX_ERRORS||n<0||n>fe.MAX_EC_CODEWORDS)throw Y.getChecksumInstance();return fe.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw k.getFormatInstance();let n=e[0];if(n>e.length)throw k.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw k.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return fe.getCodewordBucketNumber(fe.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Zn;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let s=e[n][r];s.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}t.format("%n")}return t.toString()}}fe.CODEWORD_SKEW_SIZE=2,fe.MAX_ERRORS=3,fe.MAX_EC_CODEWORDS=512,fe.errorCorrection=new Xs;class $e{decode(e,t=null){let n=$e.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw B.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return $e.decode(e,t,!0)}catch(n){throw n instanceof k||n instanceof Y?B.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,s=ue.detectMultiple(e,t,n);for(const o of s.getPoints()){const c=fe.decode(s.getBits(),o[4],o[5],o[6],o[7],$e.getMinCodewordWidth(o),$e.getMaxCodewordWidth(o)),u=new st(c.getText(),c.getRawBytes(),void 0,o,ne.PDF_417);u.putMetadata(Ze.ERROR_CORRECTION_LEVEL,c.getECLevel());const h=c.getOther();h!=null&&u.putMetadata(Ze.PDF417_EXTRA_METADATA,h),r.push(u)}return r.map(o=>o)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?G.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max($e.getMaxWidth(e[0],e[4]),$e.getMaxWidth(e[6],e[2])*ie.MODULES_IN_CODEWORD/ie.MODULES_IN_STOP_PATTERN),Math.max($e.getMaxWidth(e[1],e[5]),$e.getMaxWidth(e[7],e[3])*ie.MODULES_IN_CODEWORD/ie.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min($e.getMinWidth(e[0],e[4]),$e.getMinWidth(e[6],e[2])*ie.MODULES_IN_CODEWORD/ie.MODULES_IN_STOP_PATTERN),Math.min($e.getMinWidth(e[1],e[5]),$e.getMinWidth(e[7],e[3])*ie.MODULES_IN_CODEWORD/ie.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ir extends E{}Ir.kind="ReaderException";class qs{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!f(e)&&e.get(oe.TRY_HARDER)===!0,n=f(e)?null:e.get(oe.POSSIBLE_FORMATS),r=new Array;if(!f(n)){const s=n.some(o=>o===ne.UPC_A||o===ne.UPC_E||o===ne.EAN_13||o===ne.EAN_8||o===ne.CODABAR||o===ne.CODE_39||o===ne.CODE_93||o===ne.CODE_128||o===ne.ITF||o===ne.RSS_14||o===ne.RSS_EXPANDED);s&&!t&&r.push(new Sn(e,this.verbose)),n.includes(ne.QR_CODE)&&r.push(new qt),n.includes(ne.DATA_MATRIX)&&r.push(new Kt),n.includes(ne.AZTEC)&&r.push(new Er),n.includes(ne.PDF_417)&&r.push(new $e),s&&t&&r.push(new Sn(e,this.verbose))}r.length===0&&(t||r.push(new Sn(e,this.verbose)),r.push(new qt),r.push(new Kt),r.push(new Er),r.push(new $e),t&&r.push(new Sn(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Ir("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Ir)continue}throw new B("No MultiFormat Readers were able to detect the code.")}}class z1 extends rn{constructor(e=null,t=500){const n=new qs;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class j1 extends rn{constructor(e=500){super(new $e,e)}}class Y1 extends rn{constructor(e=500){super(new qt,e)}}var yi;(function(p){p[p.ERROR_CORRECTION=0]="ERROR_CORRECTION",p[p.CHARACTER_SET=1]="CHARACTER_SET",p[p.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",p[p.MIN_SIZE=3]="MIN_SIZE",p[p.MAX_SIZE=4]="MAX_SIZE",p[p.MARGIN=5]="MARGIN",p[p.PDF417_COMPACT=6]="PDF417_COMPACT",p[p.PDF417_COMPACTION=7]="PDF417_COMPACTION",p[p.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",p[p.AZTEC_LAYERS=9]="AZTEC_LAYERS",p[p.QR_VERSION=10]="QR_VERSION"})(yi||(yi={}));var ze=yi;class _i{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ut(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let s=t.length;s<=e;s++){const o=n.multiply(new ut(r,Int32Array.from([1,r.exp(s-1+r.getGeneratorBase())])));t.push(o),n=o}}return t[e]}encode(e,t){if(t===0)throw new O("No error correction bytes");const n=e.length-t;if(n<=0)throw new O("No data bytes provided");const r=this.buildGenerator(t),s=new Int32Array(n);X.arraycopy(e,0,s,0,n);let o=new ut(this.field,s);o=o.multiplyByMonomial(t,1);const u=o.divide(r)[1].getCoefficients(),h=t-u.length;for(let x=0;x<h;x++)e[n+x]=0;X.arraycopy(u,0,e,n+h,u.length)}}class Fe{constructor(){}static applyMaskPenaltyRule1(e){return Fe.applyMaskPenaltyRule1Internal(e,!0)+Fe.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),s=e.getHeight();for(let o=0;o<s-1;o++){const c=n[o];for(let u=0;u<r-1;u++){const h=c[u];h===c[u+1]&&h===n[o+1][u]&&h===n[o+1][u+1]&&t++}}return Fe.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),s=e.getHeight();for(let o=0;o<s;o++)for(let c=0;c<r;c++){const u=n[o];c+6<r&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(Fe.isWhiteHorizontal(u,c-4,c)||Fe.isWhiteHorizontal(u,c+7,c+11))&&t++,o+6<s&&n[o][c]===1&&n[o+1][c]===0&&n[o+2][c]===1&&n[o+3][c]===1&&n[o+4][c]===1&&n[o+5][c]===0&&n[o+6][c]===1&&(Fe.isWhiteVertical(n,c,o-4,o)||Fe.isWhiteVertical(n,c,o+7,o+11))&&t++}return t*Fe.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(e[r]===1)return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let s=n;s<r;s++)if(e[s][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),s=e.getHeight();for(let u=0;u<s;u++){const h=n[u];for(let x=0;x<r;x++)h[x]===1&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-o)*10/o)*Fe.N4}static getDataMaskBit(e,t,n){let r,s;switch(e){case 0:r=n+t&1;break;case 1:r=n&1;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:s=n*t,r=(s&1)+s%3;break;case 6:s=n*t,r=(s&1)+s%3&1;break;case 7:s=n*t,r=s%3+(n+t&1)&1;break;default:throw new O("Invalid mask pattern: "+e)}return r===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),s=t?e.getWidth():e.getHeight(),o=e.getArray();for(let c=0;c<r;c++){let u=0,h=-1;for(let x=0;x<s;x++){const A=t?o[c][x]:o[x][c];A===h?u++:(u>=5&&(n+=Fe.N1+(u-5)),u=1,h=A)}u>=5&&(n+=Fe.N1+(u-5))}return n}}Fe.N1=3,Fe.N2=3,Fe.N3=40,Fe.N4=10;class Sr{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)Z.fill(t,e)}equals(e){if(!(e instanceof Sr))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const s=this.bytes[n],o=t.bytes[n];for(let c=0,u=this.width;c<u;++c)if(s[c]!==o[c])return!1}return!0}toString(){const e=new be;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let s=0,o=this.width;s<o;++s)switch(r[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class cn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new be;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<cn.NUM_MASK_PATTERNS}}cn.NUM_MASK_PATTERNS=8;class Ie extends E{}Ie.kind="WriterException";class re{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,s){re.clearMatrix(s),re.embedBasicPatterns(n,s),re.embedTypeInfo(t,r,s),re.maybeEmbedVersionInfo(n,s),re.embedDataBits(e,r,s)}static embedBasicPatterns(e,t){re.embedPositionDetectionPatternsAndSeparators(t),re.embedDarkDotAtLeftBottomCorner(t),re.maybeEmbedPositionAdjustmentPatterns(e,t),re.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new ee;re.makeTypeInfoBits(e,t,r);for(let s=0,o=r.getSize();s<o;++s){const c=r.get(r.getSize()-1-s),u=re.TYPE_INFO_COORDINATES[s],h=u[0],x=u[1];if(n.setBoolean(h,x,c),s<8){const A=n.getWidth()-s-1;n.setBoolean(A,8,c)}else{const m=n.getHeight()-7+(s-8);n.setBoolean(8,m,c)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new ee;re.makeVersionInfoBits(e,n);let r=6*3-1;for(let s=0;s<6;++s)for(let o=0;o<3;++o){const c=n.get(r);r--,t.setBoolean(s,t.getHeight()-11+o,c),t.setBoolean(t.getHeight()-11+o,s,c)}}static embedDataBits(e,t,n){let r=0,s=-1,o=n.getWidth()-1,c=n.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);c>=0&&c<n.getHeight();){for(let u=0;u<2;++u){const h=o-u;if(!re.isEmpty(n.get(h,c)))continue;let x;r<e.getSize()?(x=e.get(r),++r):x=!1,t!==255&&Fe.getDataMaskBit(t,h,c)&&(x=!x),n.setBoolean(h,c,x)}c+=s}s=-s,c+=s,o-=2}if(r!==e.getSize())throw new Ie("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-G.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new O("0 polynomial");const n=re.findMSBSet(t);for(e<<=n-1;re.findMSBSet(e)>=n;)e^=t<<re.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!cn.isValidMaskPattern(t))throw new Ie("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const s=re.calculateBCHCode(r,re.TYPE_INFO_POLY);n.appendBits(s,10);const o=new ee;if(o.appendBits(re.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Ie("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=re.calculateBCHCode(e.getVersionNumber(),re.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Ie("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;re.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),re.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Ie;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!re.isEmpty(n.get(e+r,t)))throw new Ie;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!re.isEmpty(n.get(e,t+r)))throw new Ie;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const s=re.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(e+o,t+r,s[o])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const s=re.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(e+o,t+r,s[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=re.POSITION_DETECTION_PATTERN[0].length;re.embedPositionDetectionPattern(0,0,e),re.embedPositionDetectionPattern(e.getWidth()-t,0,e),re.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;re.embedHorizontalSeparationPattern(0,n-1,e),re.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),re.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;re.embedVerticalSeparationPattern(r,0,e),re.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),re.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=re.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let s=0,o=r.length;s!==o;s++){const c=r[s];if(c>=0)for(let u=0;u!==o;u++){const h=r[u];h>=0&&re.isEmpty(t.get(h,c))&&re.embedPositionAdjustmentPattern(h-2,c-2,t)}}}}re.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),re.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),re.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),re.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),re.VERSION_INFO_POLY=7973,re.TYPE_INFO_POLY=1335,re.TYPE_INFO_MASK_PATTERN=21522;class Z1{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ne{constructor(){}static calculateMaskPenalty(e){return Fe.applyMaskPenaltyRule1(e)+Fe.applyMaskPenaltyRule2(e)+Fe.applyMaskPenaltyRule3(e)+Fe.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=Ne.DEFAULT_BYTE_MODE_ENCODING;const s=n!==null&&n.get(ze.CHARACTER_SET)!==void 0;s&&(r=n.get(ze.CHARACTER_SET).toString());const o=this.chooseMode(e,r),c=new ee;if(o===te.BYTE&&(s||Ne.DEFAULT_BYTE_MODE_ENCODING!==r)){const H=V.getCharacterSetECIByName(r);H!==void 0&&this.appendECI(H,c)}this.appendModeInfo(o,c);const u=new ee;this.appendBytes(e,o,u,r);let h;if(n!==null&&n.get(ze.QR_VERSION)!==void 0){const H=Number.parseInt(n.get(ze.QR_VERSION).toString(),10);h=J.getVersionForNumber(H);const F=this.calculateBitsNeeded(o,c,u,h);if(!this.willFit(F,h,t))throw new Ie("Data too big for requested version")}else h=this.recommendVersion(t,o,c,u);const x=new ee;x.appendBitArray(c);const A=o===te.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(A,h,o,x),x.appendBitArray(u);const m=h.getECBlocksForLevel(t),y=h.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(y,x);const S=this.interleaveWithECBytes(x,h.getTotalCodewords(),y,m.getNumBlocks()),T=new cn;T.setECLevel(t),T.setMode(o),T.setVersion(h);const N=h.getDimensionForVersion(),M=new Sr(N,N),U=this.chooseMaskPattern(S,t,h,M);return T.setMaskPattern(U),re.buildMatrix(S,t,h,U,M),T.setMatrix(M),T}static recommendVersion(e,t,n,r){const s=this.calculateBitsNeeded(t,n,r,J.getVersionForNumber(1)),o=this.chooseVersion(s,e),c=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(c,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Ne.ALPHANUMERIC_TABLE.length?Ne.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(V.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return te.KANJI;let n=!1,r=!1;for(let s=0,o=e.length;s<o;++s){const c=e.charAt(s);if(Ne.isDigit(c))n=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)r=!0;else return te.BYTE}return r?te.ALPHANUMERIC:n?te.NUMERIC:te.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=ct.encode(e,V.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const s=t[r]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let s=Number.MAX_SAFE_INTEGER,o=-1;for(let c=0;c<cn.NUM_MASK_PATTERNS;c++){re.buildMatrix(e,t,n,c,r);let u=this.calculateMaskPenalty(r);u<s&&(s=u,o=c)}return o}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=J.getVersionForNumber(n);if(Ne.willFit(e,r,t))return r}throw new Ie("Data too big")}static willFit(e,t,n){const r=t.getTotalCodewords(),o=t.getECBlocksForLevel(n).getTotalECCodewords(),c=r-o,u=(e+7)/8;return c>=u}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new Ie("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let o=0;o<4&&t.getSize()<n;++o)t.appendBit(!1);const r=t.getSize()&7;if(r>0)for(let o=r;o<8;o++)t.appendBit(!1);const s=e-t.getSizeInBytes();for(let o=0;o<s;++o)t.appendBits(o&1?17:236,8);if(t.getSize()!==n)throw new Ie("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,s,o){if(r>=n)throw new Ie("Block ID too large");const c=e%n,u=n-c,h=Math.floor(e/n),x=h+1,A=Math.floor(t/n),m=A+1,y=h-A,S=x-m;if(y!==S)throw new Ie("EC bytes mismatch");if(n!==u+c)throw new Ie("RS blocks mismatch");if(e!==(A+y)*u+(m+S)*c)throw new Ie("Total bytes mismatch");r<u?(s[0]=A,o[0]=y):(s[0]=m,o[0]=S)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Ie("Number of bits and data bytes does not match");let s=0,o=0,c=0;const u=new Array;for(let x=0;x<r;++x){const A=new Int32Array(1),m=new Int32Array(1);Ne.getNumDataBytesAndNumECBytesForBlockID(t,n,r,x,A,m);const y=A[0],S=new Uint8Array(y);e.toBytes(8*s,S,0,y);const T=Ne.generateECBytes(S,m[0]);u.push(new Z1(S,T)),o=Math.max(o,y),c=Math.max(c,T.length),s+=A[0]}if(n!==s)throw new Ie("Data bytes does not match offset");const h=new ee;for(let x=0;x<o;++x)for(const A of u){const m=A.getDataBytes();x<m.length&&h.appendBits(m[x],8)}for(let x=0;x<c;++x)for(const A of u){const m=A.getErrorCorrectionBytes();x<m.length&&h.appendBits(m[x],8)}if(t!==h.getSizeInBytes())throw new Ie("Interleaving error: "+t+" and "+h.getSizeInBytes()+" differ.");return h}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let o=0;o<n;o++)r[o]=e[o]&255;new _i(pe.QR_CODE_FIELD_256).encode(r,t);const s=new Uint8Array(t);for(let o=0;o<t;o++)s[o]=r[n+o];return s}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const s=n.getCharacterCountBits(t);if(e>=1<<s)throw new Ie(e+" is bigger than "+((1<<s)-1));r.appendBits(e,s)}static appendBytes(e,t,n,r){switch(t){case te.NUMERIC:Ne.appendNumericBytes(e,n);break;case te.ALPHANUMERIC:Ne.appendAlphanumericBytes(e,n);break;case te.BYTE:Ne.append8BitBytes(e,n,r);break;case te.KANJI:Ne.appendKanjiBytes(e,n);break;default:throw new Ie("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Ne.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const s=Ne.getDigit(e.charAt(r));if(r+2<n){const o=Ne.getDigit(e.charAt(r+1)),c=Ne.getDigit(e.charAt(r+2));t.appendBits(s*100+o*10+c,10),r+=3}else if(r+1<n){const o=Ne.getDigit(e.charAt(r+1));t.appendBits(s*10+o,7),r+=2}else t.appendBits(s,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const s=Ne.getAlphanumericCode(e.charCodeAt(r));if(s===-1)throw new Ie;if(r+1<n){const o=Ne.getAlphanumericCode(e.charCodeAt(r+1));if(o===-1)throw new Ie;t.appendBits(s*45+o,11),r+=2}else t.appendBits(s,6),r++}}static append8BitBytes(e,t,n){let r;try{r=ct.encode(e,n)}catch(s){throw new Ie(s)}for(let s=0,o=r.length;s!==o;s++){const c=r[s];t.appendBits(c,8)}}static appendKanjiBytes(e,t){let n;try{n=ct.encode(e,V.SJIS)}catch(s){throw new Ie(s)}const r=n.length;for(let s=0;s<r;s+=2){const o=n[s]&255,c=n[s+1]&255,u=o<<8&4294967295|c;let h=-1;if(u>=33088&&u<=40956?h=u-33088:u>=57408&&u<=60351&&(h=u-49472),h===-1)throw new Ie("Invalid byte sequence");const x=(h>>8)*192+(h&255);t.appendBits(x,13)}}static appendECI(e,t){t.appendBits(te.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Ne.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ne.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class un{write(e,t,n,r=null){if(e.length===0)throw new O("Found empty contents");if(t<0||n<0)throw new O("Requested dimensions are too small: "+t+"x"+n);let s=Oe.L,o=un.QUIET_ZONE_SIZE;r!==null&&(r.get(ze.ERROR_CORRECTION)!==void 0&&(s=Oe.fromString(r.get(ze.ERROR_CORRECTION).toString())),r.get(ze.MARGIN)!==void 0&&(o=Number.parseInt(r.get(ze.MARGIN).toString(),10)));const c=Ne.encode(e,s,r);return this.renderResult(c,t,n,o)}writeToDom(e,t,n,r,s=null){typeof e=="string"&&(e=document.querySelector(e));const o=this.write(t,n,r,s);e&&e.appendChild(o)}renderResult(e,t,n,r){const s=e.getMatrix();if(s===null)throw new Dt;const o=s.getWidth(),c=s.getHeight(),u=o+r*2,h=c+r*2,x=Math.max(t,u),A=Math.max(n,h),m=Math.min(Math.floor(x/u),Math.floor(A/h)),y=Math.floor((x-o*m)/2),S=Math.floor((A-c*m)/2),T=this.createSVGElement(x,A);for(let N=0,M=S;N<c;N++,M+=m)for(let U=0,H=y;U<o;U++,H+=m)if(s.get(U,N)===1){const F=this.createSvgRectElement(H,M,m,m);T.appendChild(F)}return T}createSVGElement(e,t){const n=document.createElementNS(un.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const s=document.createElementNS(un.SVG_NS,"rect");return s.setAttributeNS(null,"x",e.toString()),s.setAttributeNS(null,"y",t.toString()),s.setAttributeNS(null,"height",n.toString()),s.setAttributeNS(null,"width",r.toString()),s.setAttributeNS(null,"fill","#000000"),s}}un.QUIET_ZONE_SIZE=4,un.SVG_NS="http://www.w3.org/2000/svg";class On{encode(e,t,n,r,s){if(e.length===0)throw new O("Found empty contents");if(t!==ne.QR_CODE)throw new O("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new O(`Requested dimensions are too small: ${n}x${r}`);let o=Oe.L,c=On.QUIET_ZONE_SIZE;s!==null&&(s.get(ze.ERROR_CORRECTION)!==void 0&&(o=Oe.fromString(s.get(ze.ERROR_CORRECTION).toString())),s.get(ze.MARGIN)!==void 0&&(c=Number.parseInt(s.get(ze.MARGIN).toString(),10)));const u=Ne.encode(e,o,s);return On.renderResult(u,n,r,c)}static renderResult(e,t,n,r){const s=e.getMatrix();if(s===null)throw new Dt;const o=s.getWidth(),c=s.getHeight(),u=o+r*2,h=c+r*2,x=Math.max(t,u),A=Math.max(n,h),m=Math.min(Math.floor(x/u),Math.floor(A/h)),y=Math.floor((x-o*m)/2),S=Math.floor((A-c*m)/2),T=new je(x,A);for(let N=0,M=S;N<c;N++,M+=m)for(let U=0,H=y;U<o;U++,H+=m)s.get(U,N)===1&&T.setRegion(H,M,m,m);return T}}On.QUIET_ZONE_SIZE=4;class K1{encode(e,t,n,r,s){let o;switch(t){case ne.QR_CODE:o=new On;break;default:throw new O("No encoder available for format "+t)}return o.encode(e,t,n,r,s)}}class Pt extends Wn{constructor(e,t,n,r,s,o,c,u){if(super(o,c),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=s,r+o>t||s+c>n)throw new O("Crop rectangle does not fit within image data.");u&&this.reverseHorizontal(o,c)}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return X.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let s=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return X.arraycopy(this.yuvData,s,r,0,n),r;for(let o=0;o<t;o++){const c=o*e;X.arraycopy(this.yuvData,s,r,c,e),s+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Pt(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/Pt.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Pt.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let s=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const c=o*e;for(let u=0;u<e;u++){const h=r[s+u*Pt.THUMBNAIL_SCALE_FACTOR]&255;n[c+u]=4278190080|h*65793}s+=this.dataWidth*Pt.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Pt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,s=this.top*this.dataWidth+this.left;r<t;r++,s+=this.dataWidth){const o=s+e/2;for(let c=s,u=s+e-1;c<o;c++,u--){const h=n[c];n[c]=n[u],n[u]=h}}}invert(){return new Xt(this)}}Pt.THUMBNAIL_SCALE_FACTOR=2;class Ii extends Wn{constructor(e,t,n,r,s,o,c){if(super(t,n),this.dataWidth=r,this.dataHeight=s,this.left=o,this.top=c,e.BYTES_PER_ELEMENT===4){const u=t*n,h=new Uint8ClampedArray(u);for(let x=0;x<u;x++){const A=e[x],m=A>>16&255,y=A>>7&510,S=A&255;h[x]=(m+y+S)/4&255}this.luminances=h}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),s===void 0&&(this.dataHeight=n),o===void 0&&(this.left=0),c===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new O("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return X.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let s=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return X.arraycopy(this.luminances,s,r,0,n),r;for(let o=0;o<t;o++){const c=o*e;X.arraycopy(this.luminances,s,r,c,e),s+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ii(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new Xt(this)}}class Qs extends V{static forName(e){return this.getCharacterSetECIByName(e)}}class Si{}Si.ISO_8859_1=V.ISO8859_1;class Js{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class $s{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class q1{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Nn extends q1{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Nn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+G.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Ti extends Nn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Ti(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Q1(p,e,t){return new Ti(p,e,t)}function $n(p,e,t){return new Nn(p,e,t)}const J1=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Jt=0,Tr=1,yt=2,eo=3,Lt=4,$1=new Nn(null,0,0),Oi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function el(p){for(let e of p)Z.fill(e,-1);return p[Jt][Lt]=0,p[Tr][Lt]=0,p[Tr][Jt]=28,p[eo][Lt]=0,p[yt][Lt]=0,p[yt][Jt]=15,p}const to=el(Z.createInt32Array(6,6));class Ft{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let o=Oi[this.mode][e];r=$n(r,o&65535,o>>16),n+=o>>16}let s=e===yt?4:5;return r=$n(r,t,s),new Ft(r,e,0,n+s)}shiftAndAppend(e,t){let n=this.token,r=this.mode===yt?4:5;return n=$n(n,to[this.mode][e],r),n=$n(n,t,5),new Ft(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Lt||this.mode===yt){let c=Oi[n][Jt];t=$n(t,c&65535,c>>16),r+=c>>16,n=Jt}let s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new Ft(t,n,this.binaryShiftByteCount+1,r+s);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=Q1(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ft(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Oi[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=Ft.calculateBinaryShiftCost(e)-Ft.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new ee;for(const r of t)r.appendTo(n,e);return n}toString(){return se.format("%s bits=%d bytes=%d",J1[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Ft.INITIAL_STATE=new Ft($1,Jt,0,0);function tl(p){const e=se.getCharCode(" "),t=se.getCharCode("."),n=se.getCharCode(",");p[Jt][e]=1;const r=se.getCharCode("Z"),s=se.getCharCode("A");for(let m=s;m<=r;m++)p[Jt][m]=m-s+2;p[Tr][e]=1;const o=se.getCharCode("z"),c=se.getCharCode("a");for(let m=c;m<=o;m++)p[Tr][m]=m-c+2;p[yt][e]=1;const u=se.getCharCode("9"),h=se.getCharCode("0");for(let m=h;m<=u;m++)p[yt][m]=m-h+2;p[yt][n]=12,p[yt][t]=13;const x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let m=0;m<x.length;m++)p[eo][se.getCharCode(x[m])]=m;const A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let m=0;m<A.length;m++)se.getCharCode(A[m])>0&&(p[Lt][se.getCharCode(A[m])]=m);return p}const Ni=tl(Z.createInt32Array(5,256));class er{constructor(e){this.text=e}encode(){const e=se.getCharCode(" "),t=se.getCharCode(`
`);let n=$s.singletonList(Ft.INITIAL_STATE);for(let s=0;s<this.text.length;s++){let o,c=s+1<this.text.length?this.text[s+1]:0;switch(this.text[s]){case se.getCharCode("\r"):o=c===t?2:0;break;case se.getCharCode("."):o=c===e?3:0;break;case se.getCharCode(","):o=c===e?4:0;break;case se.getCharCode(":"):o=c===e?5:0;break;default:o=0}o>0?(n=er.updateStateListForPair(n,s,o),s++):n=this.updateStateListForChar(n,s)}return $s.min(n,(s,o)=>s.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return er.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,s=Ni[e.getMode()][r]>0,o=null;for(let c=0;c<=Lt;c++){let u=Ni[c][r];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!s||c===e.getMode()||c===yt){const h=o.latchAndAppend(c,u);n.push(h)}if(!s&&to[e.getMode()][c]>=0){const h=o.shiftAndAppend(c,u);n.push(h)}}}if(e.getBinaryShiftByteCount()>0||Ni[e.getMode()][r]===0){let c=e.addBinaryShiftChar(t);n.push(c)}}static updateStateListForPair(e,t,n){const r=[];for(let s of e)this.updateStateForPair(s,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let s=e.endBinaryShift(t);if(r.push(s.latchAndAppend(Lt,n)),e.getMode()!==Lt&&r.push(s.shiftAndAppend(Lt,n)),n===3||n===4){let o=s.latchAndAppend(yt,16-n).latchAndAppend(yt,1);r.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(o)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const s of t){if(s.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(s)&&(t=t.filter(o=>o!==s))}r&&t.push(n)}return t}}class we{constructor(){}static encodeBytes(e){return we.encode(e,we.DEFAULT_EC_PERCENT,we.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new er(e).encode(),s=G.truncDivision(r.getSize()*t,100)+11,o=r.getSize()+s,c,u,h,x,A;if(n!==we.DEFAULT_AZTEC_LAYERS){if(c=n<0,u=Math.abs(n),u>(c?we.MAX_NB_BITS_COMPACT:we.MAX_NB_BITS))throw new O(se.format("Illegal value %s for layers",n));h=we.totalBitsInLayer(u,c),x=we.WORD_SIZE[u];let F=h-h%x;if(A=we.stuffBits(r,x),A.getSize()+s>F)throw new O("Data to large for user specified layer");if(c&&A.getSize()>x*64)throw new O("Data to large for user specified layer")}else{x=0,A=null;for(let F=0;;F++){if(F>we.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(c=F<=3,u=c?F+1:F,h=we.totalBitsInLayer(u,c),o>h)continue;(A==null||x!==we.WORD_SIZE[u])&&(x=we.WORD_SIZE[u],A=we.stuffBits(r,x));let de=h-h%x;if(!(c&&A.getSize()>x*64)&&A.getSize()+s<=de)break}}let m=we.generateCheckWords(A,h,x),y=A.getSize()/x,S=we.generateModeMessage(c,u,y),T=(c?11:14)+u*4,N=new Int32Array(T),M;if(c){M=T;for(let F=0;F<N.length;F++)N[F]=F}else{M=T+1+2*G.truncDivision(G.truncDivision(T,2)-1,15);let F=G.truncDivision(T,2),de=G.truncDivision(M,2);for(let ae=0;ae<F;ae++){let gt=ae+G.truncDivision(ae,15);N[F-ae-1]=de-gt-1,N[F+ae]=de+gt+1}}let U=new je(M);for(let F=0,de=0;F<u;F++){let ae=(u-F)*4+(c?9:12);for(let gt=0;gt<ae;gt++){let Tt=gt*2;for(let xt=0;xt<2;xt++)m.get(de+Tt+xt)&&U.set(N[F*2+xt],N[F*2+gt]),m.get(de+ae*2+Tt+xt)&&U.set(N[F*2+gt],N[T-1-F*2-xt]),m.get(de+ae*4+Tt+xt)&&U.set(N[T-1-F*2-xt],N[T-1-F*2-gt]),m.get(de+ae*6+Tt+xt)&&U.set(N[T-1-F*2-gt],N[F*2+xt])}de+=ae*8}if(we.drawModeMessage(U,c,M,S),c)we.drawBullsEye(U,G.truncDivision(M,2),5);else{we.drawBullsEye(U,G.truncDivision(M,2),7);for(let F=0,de=0;F<G.truncDivision(T,2)-1;F+=15,de+=16)for(let ae=G.truncDivision(M,2)&1;ae<M;ae+=2)U.set(G.truncDivision(M,2)-de,ae),U.set(G.truncDivision(M,2)+de,ae),U.set(ae,G.truncDivision(M,2)-de),U.set(ae,G.truncDivision(M,2)+de)}let H=new Js;return H.setCompact(c),H.setSize(M),H.setLayers(u),H.setCodeWords(y),H.setMatrix(U),H}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let s=t-r;s<=t+r;s++)e.set(s,t-r),e.set(s,t+r),e.set(t-r,s),e.set(t+r,s);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new ee;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=we.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=we.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let s=G.truncDivision(n,2);if(t)for(let o=0;o<7;o++){let c=s-3+o;r.get(o)&&e.set(c,s-5),r.get(o+7)&&e.set(s+5,c),r.get(20-o)&&e.set(c,s+5),r.get(27-o)&&e.set(s-5,c)}else for(let o=0;o<10;o++){let c=s-5+o+G.truncDivision(o,5);r.get(o)&&e.set(c,s-7),r.get(o+10)&&e.set(s+7,c),r.get(29-o)&&e.set(c,s+7),r.get(39-o)&&e.set(s-7,c)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,s=new _i(we.getGF(n)),o=G.truncDivision(t,n),c=we.bitsToWords(e,n,o);s.encode(c,o-r);let u=t%n,h=new ee;h.appendBits(0,u);for(const x of Array.from(c))h.appendBits(x,n);return h}static bitsToWords(e,t,n){let r=new Int32Array(n),s,o;for(s=0,o=e.getSize()/t;s<o;s++){let c=0;for(let u=0;u<t;u++)c|=e.get(s*t+u)?1<<t-u-1:0;r[s]=c}return r}static getGF(e){switch(e){case 4:return pe.AZTEC_PARAM;case 6:return pe.AZTEC_DATA_6;case 8:return pe.AZTEC_DATA_8;case 10:return pe.AZTEC_DATA_10;case 12:return pe.AZTEC_DATA_12;default:throw new O("Unsupported word size "+e)}}static stuffBits(e,t){let n=new ee,r=e.getSize(),s=(1<<t)-2;for(let o=0;o<r;o+=t){let c=0;for(let u=0;u<t;u++)(o+u>=r||e.get(o+u))&&(c|=1<<t-1-u);(c&s)===s?(n.appendBits(c&s,t),o--):c&s?n.appendBits(c,t):(n.appendBits(c|1,t),o--)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}we.DEFAULT_EC_PERCENT=33,we.DEFAULT_AZTEC_LAYERS=0,we.MAX_NB_BITS=32,we.MAX_NB_BITS_COMPACT=4,we.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Or{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,s){let o=Si.ISO_8859_1,c=we.DEFAULT_EC_PERCENT,u=we.DEFAULT_AZTEC_LAYERS;return s!=null&&(s.has(ze.CHARACTER_SET)&&(o=Qs.forName(s.get(ze.CHARACTER_SET).toString())),s.has(ze.ERROR_CORRECTION)&&(c=G.parseInt(s.get(ze.ERROR_CORRECTION).toString())),s.has(ze.AZTEC_LAYERS)&&(u=G.parseInt(s.get(ze.AZTEC_LAYERS).toString()))),Or.encodeLayers(e,t,n,r,o,c,u)}static encodeLayers(e,t,n,r,s,o,c){if(t!==ne.AZTEC)throw new O("Can only encode AZTEC, but got "+t);let u=we.encode(se.getBytes(e,s),o,c);return Or.renderResult(u,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new Dt;let s=r.getWidth(),o=r.getHeight(),c=Math.max(t,s),u=Math.max(n,o),h=Math.min(c/s,u/o),x=(c-s*h)/2,A=(u-o*h)/2,m=new je(c,u);for(let y=0,S=A;y<o;y++,S+=h)for(let T=0,N=x;T<s;T++,N+=h)r.get(T,y)&&m.setRegion(N,S,h,h);return m}}l.AbstractExpandedDecoder=gi,l.ArgumentException=I,l.ArithmeticException=wr,l.AztecCode=Js,l.AztecCodeReader=Er,l.AztecCodeWriter=Or,l.AztecDecoder=Te,l.AztecDetector=ks,l.AztecDetectorResult=Ls,l.AztecEncoder=we,l.AztecHighLevelEncoder=er,l.AztecPoint=ot,l.BarcodeFormat=ne,l.Binarizer=j,l.BinaryBitmap=W,l.BitArray=ee,l.BitMatrix=je,l.BitSource=Ai,l.BrowserAztecCodeReader=T1,l.BrowserBarcodeReader=M1,l.BrowserCodeReader=rn,l.BrowserDatamatrixCodeReader=B1,l.BrowserMultiFormatReader=z1,l.BrowserPDF417Reader=j1,l.BrowserQRCodeReader=Y1,l.BrowserQRCodeSvgWriter=un,l.CharacterSetECI=V,l.ChecksumException=Y,l.Code128Reader=z,l.Code39Reader=Ge,l.DataMatrixDecodedBitStreamParser=Zt,l.DataMatrixReader=Kt,l.DecodeHintType=oe,l.DecoderResult=Gn,l.DefaultGridSampler=Fs,l.DetectorResult=Ar,l.EAN13Reader=sn,l.EncodeHintType=ze,l.Exception=E,l.FormatException=k,l.GenericGF=pe,l.GenericGFPoly=ut,l.GlobalHistogramBinarizer=Ye,l.GridSampler=ui,l.GridSamplerInstance=jt,l.HTMLCanvasElementLuminanceSource=zt,l.HybridBinarizer=ce,l.ITFReader=_e,l.IllegalArgumentException=O,l.IllegalStateException=Dt,l.InvertedLuminanceSource=Xt,l.LuminanceSource=Wn,l.MathUtils=xe,l.MultiFormatOneDReader=Sn,l.MultiFormatReader=qs,l.MultiFormatWriter=K1,l.NotFoundException=B,l.OneDReader=Ve,l.PDF417DecodedBitStreamParser=D,l.PDF417DecoderErrorCorrection=Xs,l.PDF417Reader=$e,l.PDF417ResultMetadata=js,l.PerspectiveTransform=It,l.PlanarYUVLuminanceSource=Pt,l.QRCodeByteMatrix=Sr,l.QRCodeDataMask=Ct,l.QRCodeDecodedBitStreamParser=ve,l.QRCodeDecoderErrorCorrectionLevel=Oe,l.QRCodeDecoderFormatInformation=nt,l.QRCodeEncoder=Ne,l.QRCodeEncoderQRCode=cn,l.QRCodeMaskUtil=Fe,l.QRCodeMatrixUtil=re,l.QRCodeMode=te,l.QRCodeReader=qt,l.QRCodeVersion=J,l.QRCodeWriter=On,l.RGBLuminanceSource=Ii,l.RSS14Reader=Le,l.RSSExpandedReader=L,l.ReaderException=Ir,l.ReedSolomonDecoder=zn,l.ReedSolomonEncoder=_i,l.ReedSolomonException=bn,l.Result=st,l.ResultMetadataType=Ze,l.ResultPoint=Q,l.StringUtils=se,l.UnsupportedOperationException=Gt,l.VideoInputDevice=Ps,l.WhiteRectangleDetector=Vt,l.WriterException=Ie,l.ZXingArrays=Z,l.ZXingCharset=Qs,l.ZXingInteger=G,l.ZXingStandardCharsets=Si,l.ZXingStringBuilder=be,l.ZXingStringEncoding=ct,l.ZXingSystem=X,l.createAbstractExpandedDecoder=Ws,Object.defineProperty(l,"__esModule",{value:!0})})}(or,or.exports)),or.exports}var Re=Ku();const qu=Yu(Re),Qu=il({__proto__:null,default:qu},[Re]);var Po=function(){function i(a,l,f){if(this.formatMap=new Map([[q.QR_CODE,Re.BarcodeFormat.QR_CODE],[q.AZTEC,Re.BarcodeFormat.AZTEC],[q.CODABAR,Re.BarcodeFormat.CODABAR],[q.CODE_39,Re.BarcodeFormat.CODE_39],[q.CODE_93,Re.BarcodeFormat.CODE_93],[q.CODE_128,Re.BarcodeFormat.CODE_128],[q.DATA_MATRIX,Re.BarcodeFormat.DATA_MATRIX],[q.MAXICODE,Re.BarcodeFormat.MAXICODE],[q.ITF,Re.BarcodeFormat.ITF],[q.EAN_13,Re.BarcodeFormat.EAN_13],[q.EAN_8,Re.BarcodeFormat.EAN_8],[q.PDF_417,Re.BarcodeFormat.PDF_417],[q.RSS_14,Re.BarcodeFormat.RSS_14],[q.RSS_EXPANDED,Re.BarcodeFormat.RSS_EXPANDED],[q.UPC_A,Re.BarcodeFormat.UPC_A],[q.UPC_E,Re.BarcodeFormat.UPC_E],[q.UPC_EAN_EXTENSION,Re.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Qu)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=f;var g=this.createZXingFormats(a),d=new Map;d.set(Re.DecodeHintType.POSSIBLE_FORMATS,g),d.set(Re.DecodeHintType.TRY_HARDER,!1),this.hints=d}return i.prototype.decodeAsync=function(a){var l=this;return new Promise(function(f,g){try{f(l.decode(a))}catch(d){g(d)}})},i.prototype.decode=function(a){var l=new Re.MultiFormatReader(this.verbose,this.hints),f=new Re.HTMLCanvasElementLuminanceSource(a),g=new Re.BinaryBitmap(new Re.HybridBinarizer(f)),d=l.decode(g);return{text:d.text,format:_1.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(l,f,g){a.set(l,f)}),a},i.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},i.prototype.createZXingFormats=function(a){for(var l=[],f=0,g=a;f<g.length;f++){var d=g[f];this.formatMap.has(d)?l.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return l},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i}(),Ju=function(i,a,l,f){function g(d){return d instanceof l?d:new l(function(w){w(d)})}return new(l||(l=Promise))(function(d,w){function C(I){try{E(f.next(I))}catch(O){w(O)}}function _(I){try{E(f.throw(I))}catch(O){w(O)}}function E(I){I.done?d(I.value):g(I.value).then(C,_)}E((f=f.apply(i,a||[])).next())})},$u=function(i,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},f,g,d,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(I){return _([E,I])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(l=0)),l;)try{if(f=1,g&&(d=E[0]&2?g.return:E[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,E[1])).done)return d;switch(g=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return l.label++,{value:E[1],done:!1};case 5:l.label++,g=E[1],E=[0];continue;case 7:E=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){l=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){l.label=E[1];break}if(E[0]===6&&l.label<d[1]){l.label=d[1],d=E;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(E);break}d[2]&&l.ops.pop(),l.trys.pop();continue}E=a.call(i,l)}catch(I){E=[6,I],g=0}finally{f=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Lo=function(){function i(a,l,f){if(this.formatMap=new Map([[q.QR_CODE,"qr_code"],[q.AZTEC,"aztec"],[q.CODABAR,"codabar"],[q.CODE_39,"code_39"],[q.CODE_93,"code_93"],[q.CODE_128,"code_128"],[q.DATA_MATRIX,"data_matrix"],[q.ITF,"itf"],[q.EAN_13,"ean_13"],[q.EAN_8,"ean_8"],[q.PDF_417,"pdf417"],[q.UPC_A,"upc_a"],[q.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=f;var g=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},i.prototype.decodeAsync=function(a){return Ju(this,void 0,void 0,function(){var l,f;return $u(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(a)];case 1:if(l=g.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return f=this.selectLargestBarcode(l),[2,{text:f.rawValue,format:_1.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(a){for(var l=null,f=0,g=0,d=a;g<d.length;g++){var w=d[g],C=w.boundingBox.width*w.boundingBox.height;C>f&&(f=C,l=w)}if(!l)throw"No largest barcode found";return l},i.prototype.createBarcodeDetectorFormats=function(a){for(var l=[],f=0,g=a;f<g.length;f++){var d=g[f];this.formatMap.has(d)?l.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},i.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},i.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(l,f,g){a.set(l,f)}),a},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i}(),Fo=function(i,a,l,f){function g(d){return d instanceof l?d:new l(function(w){w(d)})}return new(l||(l=Promise))(function(d,w){function C(I){try{E(f.next(I))}catch(O){w(O)}}function _(I){try{E(f.throw(I))}catch(O){w(O)}}function E(I){I.done?d(I.value):g(I.value).then(C,_)}E((f=f.apply(i,a||[])).next())})},ko=function(i,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},f,g,d,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(I){return _([E,I])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(l=0)),l;)try{if(f=1,g&&(d=E[0]&2?g.return:E[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,E[1])).done)return d;switch(g=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return l.label++,{value:E[1],done:!1};case 5:l.label++,g=E[1],E=[0];continue;case 7:E=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){l=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){l.label=E[1];break}if(E[0]===6&&l.label<d[1]){l.label=d[1],d=E;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(E);break}d[2]&&l.ops.pop(),l.trys.pop();continue}E=a.call(i,l)}catch(I){E=[6,I],g=0}finally{f=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},ef=function(){function i(a,l,f,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=f,l&&Lo.isSupported()?(this.primaryDecoder=new Lo(a,f,g),this.secondaryDecoder=new Po(a,f,g)):this.primaryDecoder=new Po(a,f,g)}return i.prototype.decodeAsync=function(a){return Fo(this,void 0,void 0,function(){var l;return ko(this,function(f){switch(f.label){case 0:l=performance.now(),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,f.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(a){return Fo(this,void 0,void 0,function(){var l,f;return ko(this,function(g){switch(g.label){case 0:l=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,g.sent()];case 3:if(f=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw f;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(a){if(this.verbose){var l=performance.now()-a;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,l=0,f=this.executionResults;l<f.length;l++){var g=f[l];a+=g}var d=a/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i}(),Bs=function(){var i=function(a,l){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(f[d]=g[d])},i(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");i(a,l);function f(){this.constructor=a}a.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}}(),Yr=function(i,a,l,f){function g(d){return d instanceof l?d:new l(function(w){w(d)})}return new(l||(l=Promise))(function(d,w){function C(I){try{E(f.next(I))}catch(O){w(O)}}function _(I){try{E(f.throw(I))}catch(O){w(O)}}function E(I){I.done?d(I.value):g(I.value).then(C,_)}E((f=f.apply(i,a||[])).next())})},Zr=function(i,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},f,g,d,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(I){return _([E,I])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(l=0)),l;)try{if(f=1,g&&(d=E[0]&2?g.return:E[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,E[1])).done)return d;switch(g=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return l.label++,{value:E[1],done:!1};case 5:l.label++,g=E[1],E=[0];continue;case 7:E=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){l=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){l.label=E[1];break}if(E[0]===6&&l.label<d[1]){l.label=d[1],d=E;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(E);break}d[2]&&l.ops.pop(),l.trys.pop();continue}E=a.call(i,l)}catch(I){E=[6,I],g=0}finally{f=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},S1=function(){function i(a,l){this.name=a,this.track=l}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(a){var l={};l[this.name]=a;var f={advanced:[l]};return this.track.applyConstraints(f)},i.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var l=a[this.name];return l}return null},i}(),tf=function(i){Bs(a,i);function a(l,f){return i.call(this,l,f)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(l){var f={};f[this.name]=l;var g={advanced:[f]};return this.track.applyConstraints(g)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),f=l[this.name];return{min:f.min,max:f.max,step:f.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(S1),nf=function(i){Bs(a,i);function a(l){return i.call(this,"zoom",l)||this}return a}(tf),rf=function(i){Bs(a,i);function a(l){return i.call(this,"torch",l)||this}return a}(S1),sf=function(){function i(a){this.track=a}return i.prototype.zoomFeature=function(){return new nf(this.track)},i.prototype.torchFeature=function(){return new rf(this.track)},i}(),of=function(){function i(a,l,f){this.isClosed=!1,this.parentElement=a,this.mediaStream=l,this.callbacks=f,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return i.prototype.createVideoElement=function(a){var l=document.createElement("video");return l.style.width="".concat(a,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},i.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var f=a.surface.clientWidth,g=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(f,g),a.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(a,l,f,g){return Yr(this,void 0,void 0,function(){var d,w;return Zr(this,function(C){switch(C.label){case 0:return d=new i(a,l,g),f.aspectRatio?(w={aspectRatio:f.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:C.sent(),C.label=2;case 2:return d.setupSurface(),[2,d]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(a){this.failIfClosed();var l=this,f=function(){setTimeout(a,200),l.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(a){return Yr(this,void 0,void 0,function(){return Zr(this,function(l){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(l,f){var g=a.mediaStream.getVideoTracks(),d=g.length,w=0;a.mediaStream.getVideoTracks().forEach(function(C){a.mediaStream.removeTrack(C),C.stop(),++w,w>=d&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),l())})})},i.prototype.getCapabilities=function(){return new sf(this.getFirstTrackOrFail())},i}(),af=function(){function i(a){this.mediaStream=a}return i.prototype.render=function(a,l,f){return Yr(this,void 0,void 0,function(){return Zr(this,function(g){return[2,of.create(a,this.mediaStream,l,f)]})})},i.create=function(a){return Yr(this,void 0,void 0,function(){var l,f;return Zr(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return f=g.sent(),[2,new i(f)]}})})},i}(),Uo=function(i,a,l,f){function g(d){return d instanceof l?d:new l(function(w){w(d)})}return new(l||(l=Promise))(function(d,w){function C(I){try{E(f.next(I))}catch(O){w(O)}}function _(I){try{E(f.throw(I))}catch(O){w(O)}}function E(I){I.done?d(I.value):g(I.value).then(C,_)}E((f=f.apply(i,a||[])).next())})},Vo=function(i,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},f,g,d,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(I){return _([E,I])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(l=0)),l;)try{if(f=1,g&&(d=E[0]&2?g.return:E[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,E[1])).done)return d;switch(g=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return l.label++,{value:E[1],done:!1};case 5:l.label++,g=E[1],E=[0];continue;case 7:E=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){l=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){l.label=E[1];break}if(E[0]===6&&l.label<d[1]){l.label=d[1],d=E;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(E);break}d[2]&&l.ops.pop(),l.trys.pop();continue}E=a.call(i,l)}catch(I){E=[6,I],g=0}finally{f=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},lf=function(){function i(){}return i.failIfNotSupported=function(){return Uo(this,void 0,void 0,function(){return Vo(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(a){return Uo(this,void 0,void 0,function(){return Vo(this,function(l){return[2,af.create(a)]})})},i}(),cf=function(i,a,l,f){function g(d){return d instanceof l?d:new l(function(w){w(d)})}return new(l||(l=Promise))(function(d,w){function C(I){try{E(f.next(I))}catch(O){w(O)}}function _(I){try{E(f.throw(I))}catch(O){w(O)}}function E(I){I.done?d(I.value):g(I.value).then(C,_)}E((f=f.apply(i,a||[])).next())})},uf=function(i,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},f,g,d,w;return w={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function C(E){return function(I){return _([E,I])}}function _(E){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(l=0)),l;)try{if(f=1,g&&(d=E[0]&2?g.return:E[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,E[1])).done)return d;switch(g=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return l.label++,{value:E[1],done:!1};case 5:l.label++,g=E[1],E=[0];continue;case 7:E=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){l=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){l.label=E[1];break}if(E[0]===6&&l.label<d[1]){l.label=d[1],d=E;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(E);break}d[2]&&l.ops.pop(),l.trys.pop();continue}E=a.call(i,l)}catch(I){E=[6,I],g=0}finally{f=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},ff=function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var a=Mn.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(a=Mn.insecureContextCameraQueryError()),Promise.reject(a)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},i.getCamerasFromMediaDevices=function(){return cf(this,void 0,void 0,function(){var a,l,f,g,d,w,C;return uf(this,function(_){switch(_.label){case 0:return a=function(E){for(var I=E.getVideoTracks(),O=0,W=I;O<W.length;O++){var Y=W[O];Y.enabled=!1,Y.stop(),E.removeTrack(Y)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(f=_.sent(),g=[],d=0,w=f;d<w.length;d++)C=w[d],C.kind==="videoinput"&&g.push({id:C.deviceId,label:C.label});return a(l),[2,g]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,l){var f=function(d){for(var w=[],C=0,_=d;C<_.length;C++){var E=_[C];E.kind==="video"&&w.push({id:E.id,label:E.label})}a(w)},g=MediaStreamTrack;g.getSources(f)})},i}(),ke;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(ke||(ke={}));var hf=function(){function i(){this.state=ke.NOT_STARTED,this.onGoingTransactionNewState=ke.UNKNOWN}return i.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},i.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===ke.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ke.UNKNOWN,this.directTransition(a)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===ke.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ke.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ke.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(a){switch(this.state){case ke.UNKNOWN:throw"Transition from unknown is not allowed";case ke.NOT_STARTED:this.failIfNewStateIs(a,[ke.PAUSED]);break;case ke.SCANNING:break;case ke.PAUSED:break}},i.prototype.failIfNewStateIs=function(a,l){for(var f=0,g=l;f<g.length;f++){var d=g[f];if(a===d)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},i}(),df=function(){function i(a){this.stateManager=a}return i.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},i.prototype.directTransition=function(a){this.stateManager.directTransition(a)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===ke.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==ke.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ke.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===ke.PAUSED},i}(),gf=function(){function i(){}return i.create=function(){return new df(new hf)},i}(),xf=function(){var i=function(a,l){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(f[d]=g[d])},i(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");i(a,l);function f(){this.constructor=a}a.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}}(),At=function(i){xf(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(Xu),wf=function(){function i(a,l){this.logger=l,this.fps=At.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=At.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?I1.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!Ht(this.qrbox)},i.create=function(a,l){return new i(a,l)},i}(),pf=function(){function i(a,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var f;typeof l=="boolean"?this.verbose=l===!0:l&&(f=l,this.verbose=f.verbose===!0,f.experimentalFeatures),this.logger=new ju(this.verbose),this.qrcode=new ef(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(f),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=gf.create()}return i.prototype.start=function(a,l,f,g){var d=this;if(!a)throw"cameraIdOrConfig is required";if(!f||typeof f!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;g?w=g:w=this.verbose?this.logger.log:function(){};var C=wf.create(l,this.logger);this.clearElement();var _=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=_,I=document.getElementById(this.elementId);I.clientWidth?I.clientWidth:At.DEFAULT_WIDTH,I.style.position="relative",this.shouldScan=!0,this.element=I;var O=this,W=this.stateManagerProxy.startTransition(ke.SCANNING);return new Promise(function(Y,j){var X=E?C.videoConstraints:O.createVideoConstraints(a);if(!X){W.cancel(),j("videoConstraints should be defined");return}var P={};(!E||C.aspectRatio)&&(P.aspectRatio=C.aspectRatio);var $={onRenderSurfaceReady:function(Z,G){O.setupUi(Z,G,C),O.isScanning=!0,O.foreverScan(C,f,w)}};lf.failIfNotSupported().then(function(Z){Z.create(X).then(function(G){return G.render(d.element,P,$).then(function(ee){O.renderedCamera=ee,W.execute(),Y(null)}).catch(function(ee){W.cancel(),j(ee)})}).catch(function(G){W.cancel(),j(Mn.errorGettingUserMedia(G))})}).catch(function(Z){W.cancel(),j(Mn.cameraStreamingNotSupported())})})},i.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ke.PAUSED),this.showPausedState(),(Ht(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,l=function(){a.stateManagerProxy.directTransition(ke.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(ke.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var f=function(){if(a.element){var d=document.getElementById(At.SHADED_REGION_ELEMENT_ID);d&&a.element.removeChild(d)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),f(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),l.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(a,l){return this.scanFileV2(a,l).then(function(f){return f.decodedText})},i.prototype.scanFileV2=function(a,l){var f=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ht(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,d){f.possiblyCloseLastScanImageFile(),f.clearElement(),f.lastScanImageFile=URL.createObjectURL(a);var w=new Image;w.onload=function(){var C=w.width,_=w.height,E=document.getElementById(f.elementId),I=E.clientWidth?E.clientWidth:At.DEFAULT_WIDTH,O=Math.max(E.clientHeight?E.clientHeight:_,At.FILE_SCAN_MIN_HEIGHT),W=f.computeCanvasDrawConfig(C,_,I,O);if(l){var Y=f.createCanvasElement(I,O,"qr-canvas-visible");Y.style.display="inline-block",E.appendChild(Y);var j=Y.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=I,j.canvas.height=O,j.drawImage(w,0,0,C,_,W.x,W.y,W.width,W.height)}var X=At.FILE_SCAN_HIDDEN_CANVAS_PADDING,P=Math.max(w.width,W.width),$=Math.max(w.height,W.height),Z=P+2*X,G=$+2*X,ee=f.createCanvasElement(Z,G);E.appendChild(ee);var me=ee.getContext("2d");if(!me)throw"Unable to get 2d context from canvas";me.canvas.width=Z,me.canvas.height=G,me.drawImage(w,0,0,C,_,X,X,P,$);try{f.qrcode.decodeRobustlyAsync(ee).then(function(oe){g(vo.createFromQrcodeResult(oe))}).catch(d)}catch(oe){d("QR code parse error, error = ".concat(oe))}},w.onerror=d,w.onabort=d,w.onstalled=d,w.onsuspend=d,w.src=URL.createObjectURL(a)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return ff.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(a){if(a){if(!I1.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(a){var l=[q.QR_CODE,q.AZTEC,q.CODABAR,q.CODE_39,q.CODE_93,q.CODE_128,q.DATA_MATRIX,q.MAXICODE,q.ITF,q.EAN_13,q.EAN_8,q.PDF_417,q.RSS_14,q.RSS_EXPANDED,q.UPC_A,q.UPC_E,q.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return l;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var f=[],g=0,d=a.formatsToSupport;g<d.length;g++){var w=d[g];Gu(w)?f.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(f.length===0)throw"None of formatsToSupport match supported values.";return f},i.prototype.getUseBarCodeDetectorIfSupported=function(a){if(Ht(a))return!0;if(!Ht(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(Ht(a.experimentalFeatures))return!0;var l=a.experimentalFeatures;return Ht(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(a,l,f){var g=this,d=f.qrbox;this.validateQrboxConfig(d);var w=this.toQrdimensions(a,l,d),C=function(E){if(E<At.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(At.MIN_QR_BOX_SIZE,"px.")},_=function(E){return E>a&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=a),E};C(w.width),C(w.height),w.width=_(w.width)},i.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(a,l,f){if(typeof f=="number")return{width:f,height:f};if(typeof f=="function")try{return f(a,l)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return f},i.prototype.setupUi=function(a,l,f){f.isShadedBoxEnabled()&&this.validateQrboxSize(a,l,f);var g=Ht(f.qrbox)?{width:a,height:l}:f.qrbox;this.validateQrboxConfig(g);var d=this.toQrdimensions(a,l,g);d.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=f.isShadedBoxEnabled()&&d.height<=l,C={x:0,y:0,width:a,height:l},_=w?this.getShadedRegionBounds(a,l,d):C,E=this.createCanvasElement(_.width,_.height),I={willReadFrequently:!0},O=E.getContext("2d",I);O.canvas.width=_.width,O.canvas.height=_.height,this.element.append(E),w&&this.possiblyInsertShadingElement(this.element,a,l,d),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=O,this.canvasElement=E},i.prototype.createScannerPausedUiElement=function(a){var l=document.createElement("div");l.innerText=Mn.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",a.appendChild(l),this.scannerPausedUiElement=l},i.prototype.scanContext=function(a,l){var f=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return a(g.text,vo.createFromQrcodeResult(g)),f.possiblyUpdateShaders(!0),!0}).catch(function(g){f.possiblyUpdateShaders(!1);var d=Mn.codeParseError(g);return l(d,zu.createFrom(d)),!1})},i.prototype.foreverScan=function(a,l,f){var g=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),w=d.videoWidth/d.clientWidth,C=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*w,E=this.qrRegion.height*C,I=this.qrRegion.x*w,O=this.qrRegion.y*C;this.context.drawImage(d,I,O,_,E,0,0,this.qrRegion.width,this.qrRegion.height);var W=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(a,l,f)},g.getTimeoutFps(a.fps))};this.scanContext(l,f).then(function(Y){!Y&&a.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(l,f).finally(function(){W()})):W()}).catch(function(Y){g.logger.logError("Error happend while scanning context",Y),W()})}},i.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var l="facingMode",f="deviceId",g={user:!0,environment:!0},d="exact",w=function(j){if(j in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},C=Object.keys(a);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var _=Object.keys(a)[0];if(_!==l&&_!==f)throw"Only '".concat(l,"' and '").concat(f,"' ")+" are supported for 'cameraIdOrConfig'";if(_===l){var E=a.facingMode;if(typeof E=="string"){if(w(E))return{facingMode:E}}else if(typeof E=="object")if(d in E){if(w(E["".concat(d)]))return{facingMode:{exact:E["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var I=typeof E;throw"Invalid type of 'facingMode' = ".concat(I)}}else{var O=a.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(d in O)return{deviceId:{exact:O["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var W=typeof O;throw"Invalid type of 'deviceId' = ".concat(W)}}}var Y=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(Y)},i.prototype.computeCanvasDrawConfig=function(a,l,f,g){if(a<=f&&l<=g){var d=(f-a)/2,w=(g-l)/2;return{x:d,y:w,width:a,height:l}}else{var C=a,_=l;return a>f&&(l=f/a*l,a=f),l>g&&(a=g/l*a,l=g),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(_)+" to ".concat(a,"X").concat(l,".")),this.computeCanvasDrawConfig(a,l,f,g)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},i.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=a?At.BORDER_SHADER_MATCH_COLOR:At.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(a,l,f){var g=a,d=l,w=document.createElement("canvas");return w.style.width="".concat(g,"px"),w.style.height="".concat(d,"px"),w.style.display="none",w.id=Ht(f)?"qr-canvas":f,w},i.prototype.getShadedRegionBounds=function(a,l,f){if(f.width>a||f.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-f.width)/2,y:(l-f.height)/2,width:f.width,height:f.height}},i.prototype.possiblyInsertShadingElement=function(a,l,f,g){if(!(l-g.width<1||f-g.height<1)){var d=document.createElement("div");d.style.position="absolute";var w=(l-g.width)/2,C=(f-g.height)/2;if(d.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(At.SHADED_REGION_ELEMENT_ID),l-g.width<11||f-g.height<11)this.hasBorderShaders=!1;else{var _=5,E=40;this.insertShaderBorders(d,E,_,-_,null,0,!0),this.insertShaderBorders(d,E,_,-_,null,0,!1),this.insertShaderBorders(d,E,_,null,-_,0,!0),this.insertShaderBorders(d,E,_,null,-_,0,!1),this.insertShaderBorders(d,_,E+_,-_,null,-_,!0),this.insertShaderBorders(d,_,E+_,null,-_,-_,!0),this.insertShaderBorders(d,_,E+_,-_,null,-_,!1),this.insertShaderBorders(d,_,E+_,null,-_,-_,!1),this.hasBorderShaders=!0}a.append(d)}},i.prototype.insertShaderBorders=function(a,l,f,g,d,w,C){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=At.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(l,"px"),_.style.height="".concat(f,"px"),g!==null&&(_.style.top="".concat(g,"px")),d!==null&&(_.style.bottom="".concat(d,"px")),C?_.style.left="".concat(w,"px"):_.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),a.appendChild(_)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(a){return 1e3/a},i}(),Ho;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ho||(Ho={}));document.addEventListener("DOMContentLoaded",()=>{const i="reader",a=new pf(i);let l="";const f=(d,w)=>{console.log(`Code scanned: ${d}`),l=d,document.getElementById("search").value=l,document.getElementById("btnsearch").click()},g={fps:10,qrbox:250};a.start({facingMode:"environment"},g,f).catch(d=>{console.error(`Unable to start scanning: ${d}`)})});window.Alpine=y1;y1.start();
